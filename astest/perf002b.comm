# MODIF  DATE 04/11/2008   AUTEUR CNGUYEN C.NGUYEN 
# TITRE CALCUL THERMO-ELASTIQUE D'UN ANNEAU CREUX SOUMIS A UN CHARGEMENT THERMIQUE
# perf002b.para = tps_job 1000 mem_job 810Mo ncpus 1 liste_test P
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2008  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# INTERET : MESURER LES PERFORMANCES D'UN CALCUL ELASTIQUE 3D AVEC PLUSIEURS PAS DE TEMPS
# REMARQUE : LE MATERIAU NE DEPEND PAS DE LA TEMPERATURE. LA MATRICE N'EST DONC FACTORISEE
#            QU'UNE SEULE FOIS
#-------------------------------------------------------------------------------------
# Chargement thermique :
#   Le chargement transitoire thermique evolue sur l'intervalle [0. 10.]
#   On impose un gradient de thermique (fonction de Z) qui varie dans le temps
# Calcul mecanique :
#   Le materiau ne depend pas de la temperature (mais il se dilate)
#   On teste le deplacement d'un noeud a l'instant 9s.
#-------------------------------------------------------------------------------------

DEBUT(CODE=_F(NOM='PERF002B',NIV_PUB_WEB='INTERNET'))

MA=LIRE_MAILLAGE(FORMAT='MED')

MA = MODI_MAILLAGE( reuse=MA,  MAILLAGE=MA,
                    ORIE_PEAU_3D=_F(GROUP_MA = ('P1')))

LINST1=DEFI_LIST_REEL(DEBUT=0., INTERVALLE=_F(JUSQU_A = 10.0, NOMBRE = 2) )
LINST2=DEFI_LIST_REEL(DEBUT=0., INTERVALLE=_F(JUSQU_A = 10.0, NOMBRE = 10) )


# 1. chargement thermique :
#--------------------------
TEMPZ1=DEFI_NAPPE(   NOM_RESU='TEMP', NOM_PARA='INST',  NOM_PARA_FONC='Z',
           PARA=(0.,10.,),DEFI_FONCTION=(
            _F( VALE = (-20.,20.,   30.,20.,)),    # PROFIL A T=  0.
            _F( VALE = (-20.,20.,   30.,220.,)),   # PROFIL A T= 10.
        ))

CHTEMF1=CREA_CHAMP(OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_F',MAILLAGE=MA,
             AFFE= _F(TOUT = 'OUI', NOM_CMP = 'TEMP',  VALE_F = TEMPZ1))


TEMPER1=CREA_RESU(  OPERATION='AFFE', TYPE_RESU='EVOL_THER', NOM_CHAM='TEMP',
                    AFFE= _F( CHAM_GD = CHTEMF1, LIST_INST=LINST1),)



# 2. calcul mecanique :
#-----------------------
MO=AFFE_MODELE(MAILLAGE=MA,
         AFFE=_F(TOUT='OUI', PHENOMENE='MECANIQUE', MODELISATION='3D') )


MAT1=DEFI_MATERIAU(ELAS=_F(E= 5.E11, NU=0.3, RHO=9800., ALPHA=2.E-5 ))

CHMAT=AFFE_MATERIAU(MAILLAGE=MA, AFFE=_F(TOUT='OUI',MATER=MAT1),
                    AFFE_VARC=_F(NOM_VARC='TEMP',EVOL=TEMPER1, VALE_REF = 0. ,
                                 PROL_GAUCHE='CONSTANT',PROL_DROITE='CONSTANT'))

CHAR1=AFFE_CHAR_MECA(MODELE=MO,
        DDL_IMPO=(_F(GROUP_NO=('A',), DX=0., DY=0., DZ=0.,),
                  _F(GROUP_NO=('A2'), DY=0., DZ=0.,),
                  _F(GROUP_NO=('X1'), DZ=0.),
        ))

RESU=MECA_STATIQUE( MODELE=MO, CHAM_MATER=CHMAT, LIST_INST=LINST2, INFO=1,
            # SOLVEUR=_F(NPREC=9),
            # SOLVEUR=_F(METHODE='MUMPS',),
             EXCIT=( _F(CHARGE = CHAR1),), OPTION='SANS', )

TEST_RESU(RESU=(_F( RESULTAT = RESU,  NOM_CHAM='DEPL', GROUP_NO='X2', NOM_CMP='DZ',
                    CRITERE = 'RELATIF',  INST = 9.,
                    REFERENCE='NON_REGRESSION', VALE = 3.57E-2,  PRECISION = 1.E-5,)))

if 0 :   # pour faire une belle image :
    RESU=CALC_ELEM(reuse =RESU, RESULTAT=RESU,
               OPTION=('SIEF_ELGA_DEPL', 'SIEF_ELNO_ELGA','EQUI_ELNO_SIGM',),)

    RESU=CALC_NO(reuse =RESU, RESULTAT=RESU,
             OPTION=('EQUI_NOEU_SIGM',),);

    IMPR_RESU(FORMAT='CASTEM', UNITE=38,
              RESU=_F(MAILLAGE=MA, RESULTAT=RESU, NOM_CHAM=('DEPL','EQUI_NOEU_SIGM')))


FIN()
