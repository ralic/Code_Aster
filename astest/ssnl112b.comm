# MODIF  DATE 11/06/2012   AUTEUR PELLET J.PELLET 
# TITRE ESSAI DE THERMOPLASTICITE (MISES ECR. CINE. BARRE)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F(NOM='SSNL112B',
              NIV_PUB_WEB='INTERNET',),
      DEBUG=_F(SDVERI='OUI',),);

#

MAIL=LIRE_MAILLAGE();

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_MA=_F(NOM='TOUT',
                                 TOUT='OUI',),);

#

MOD=AFFE_MODELE(MAILLAGE=MAIL,
                AFFE=_F(TOUT='OUI',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='BARRE',),);

#

MATER=DEFI_MATERIAU(ELAS=_F(E=2.E11,
                            NU=0.3,
                            ALPHA=1.E-5,),
                    ECRO_LINE=_F(D_SIGM_EPSI=2.E9,
                                 SY=2.E8,),);

#

CARBA=AFFE_CARA_ELEM(MODELE=MOD,
                     BARRE=_F(GROUP_MA='TOUT',
                              SECTION='GENERALE',
                              CARA='A',
                              VALE=5.E-4,),);

#

F1_T=DEFI_FONCTION(NOM_PARA='INST',VALE=(0.0,50.0,
                         1.0,-50.0,
                         2.0,-300.0,
                         3.0,-100.0,
                         4.0,50.0,
                         5.0,-150.0,
                         6.0,-350.0,
                         7.0,-200.0,
                         ),PROL_DROITE='EXCLU',PROL_GAUCHE='EXCLU',);

#

LINST=DEFI_LIST_REEL(DEBUT=0.,
                     INTERVALLE=(_F(JUSQU_A=1.,
                                    NOMBRE=1,),
                                 _F(JUSQU_A=2.,
                                    NOMBRE=1,),
                                 _F(JUSQU_A=3.,
                                    NOMBRE=1,),
                                 _F(JUSQU_A=4.,
                                    NOMBRE=1,),
                                 _F(JUSQU_A=5.,
                                    NOMBRE=1,),
                                 _F(JUSQU_A=6.,
                                    NOMBRE=1,),
                                 _F(JUSQU_A=7.,
                                    NOMBRE=1,),),);

#

TEMPIMPO=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_F',
                    OPERATION='AFFE',
                    MAILLAGE=MAIL,
                    AFFE=_F(GROUP_NO='BARRE',
                            NOM_CMP='TEMP',
                            VALE_F=F1_T,),);

#

TEMPRESU=CREA_RESU(OPERATION='AFFE',
                   TYPE_RESU='EVOL_THER',
                   NOM_CHAM='TEMP',
                   AFFE=_F(CHAM_GD=TEMPIMPO,
                           LIST_INST=LINST,
                           NUME_INIT=1,
                           NUME_FIN=8,),);

LIAISON=AFFE_CHAR_MECA(MODELE=MOD,
                       DDL_IMPO=_F(TOUT='OUI',
                                   DX=0.,
                                   DY=0.,
                                   DZ=0.,),);

#

CHMTM=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=_F(TOUT='OUI',
                            MATER=MATER,),
                    AFFE_VARC=_F(TOUT='OUI',
                                 NOM_VARC='TEMP',
                                 EVOL=TEMPRESU,
                                 NOM_CHAM='TEMP',
                                 VALE_REF=50.0,),);

#

UELAS=MECA_STATIQUE(MODELE=MOD,
                    CHAM_MATER=CHMTM,
                    CARA_ELEM=CARBA,
                    EXCIT=_F(CHARGE=LIAISON,),
                    LIST_INST=LINST,);

UELAS=CALC_CHAMP(reuse=UELAS,RESULTAT=UELAS,LIST_INST=LINST,CONTRAINTE=('EFGE_ELNO'))


UELAS=CALC_CHAMP(reuse =UELAS,
              RESULTAT=UELAS,
              FORCE='FORC_NODA',);

TEST_RESU(RESU=(_F(RESULTAT=UELAS,
                   INST=1.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   NOEUD='N1',
                   VALE=100000.0,
                   PRECISION=0.001,),
                _F(RESULTAT=UELAS,
                   INST=1.0,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='N',
                   MAILLE='M1',
                   POINT=1,
                   VALE=100000.0,
                   PRECISION=0.001,),),);

U=STAT_NON_LINE(MODELE=MOD,
                CHAM_MATER=CHMTM,
                CARA_ELEM=CARBA,
                EXCIT=_F(CHARGE=LIAISON,),
                COMP_INCR=_F(RELATION='VMIS_CINE_LINE',),
                INCREMENT=_F(LIST_INST=LINST,
                             NUME_INST_INIT=0,
                             NUME_INST_FIN=7,),
                NEWTON=_F(REAC_INCR=1,
                          MATRICE='ELASTIQUE',
                          REAC_ITER=1,),
                RECH_LINEAIRE=_F(ITER_LINE_MAXI=8,),
                CONVERGENCE=_F(RESI_GLOB_MAXI=1.0E-04,
                               ITER_GLOB_MAXI=40,),);

U=CALC_CHAMP(reuse=U,RESULTAT=U,CONTRAINTE=('SIEF_ELNO'))


U=CALC_CHAMP(reuse =U,
          RESULTAT=U,
          FORCE='FORC_NODA',);

#

SIGY_T=RECU_FONCTION(RESULTAT=U,
                     TOUT_INST='OUI',
                     NOM_CHAM='SIEF_ELNO',
                     NOM_CMP='N',
                     MAILLE='M1',
                     NOEUD='N1',
                     NOM_PARA='INST',
                     NOM_RESU='SIGY_T',
                     INTERPOL='LIN',
                     PROL_GAUCHE='LINEAIRE',);

#

TEMP_T=RECU_FONCTION(RESULTAT=TEMPRESU,
                     TOUT_INST='OUI',
                     NOM_CHAM='TEMP',
                     NOM_CMP='TEMP',
                     MAILLE='M1',
                     NOEUD='N1',
                     NOM_PARA='INST',
                     NOM_RESU='TEMP_T',
                     INTERPOL='LIN',);

TEST_RESU(RESU=(_F(RESULTAT=U,
                   INST=1.0,
                   NOM_CHAM='SIEF_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   NOEUD='N1',
                   VALE=100000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=2.0,
                   NOM_CHAM='SIEF_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   NOEUD='N1',
                   VALE=102500.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=3.0,
                   NOM_CHAM='SIEF_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   NOEUD='N1',
                   VALE=-97500.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=4.0,
                   NOM_CHAM='SIEF_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   NOEUD='N1',
                   VALE=-99000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=5.0,
                   NOM_CHAM='SIEF_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   NOEUD='N1',
                   VALE=101000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=6.0,
                   NOM_CHAM='SIEF_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   NOEUD='N1',
                   VALE=103000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=7.0,
                   NOM_CHAM='SIEF_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   NOEUD='N1',
                   VALE=-47000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=U,
                   INST=1.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   NOEUD='N1',
                   VALE=100000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=2.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   NOEUD='N1',
                   VALE=102500.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=3.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   NOEUD='N1',
                   VALE=-97500.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=4.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   NOEUD='N1',
                   VALE=-99000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=5.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   NOEUD='N1',
                   VALE=101000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=6.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   NOEUD='N1',
                   VALE=103000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   INST=7.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   NOEUD='N1',
                   VALE=-47000.0,
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),),);

FIN();
