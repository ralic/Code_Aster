# MODIF  DATE 09/05/2011   AUTEUR VERRIER A.VERRIER 
# TITRE CAMPBELL POUR UN ROTOR AVEC PALIERS A CARACTERISTIQUES VARIABLES
# sdll129a.para = tps_job 900 mem_job 512Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# RESPONSABLE TORKHANI M.TORKHANI
#

import numpy as NP
from Utilitai.Table import Table

DEBUT(CODE=_F(NOM='SDLL129A',
              NIV_PUB_WEB='INTERNET',
              VISU_EFICAS='OUI',),
              PAR_LOT='OUI',
              DEBUG=_F(SDVERI='OUI'),);

K1YY=DEFI_FONCTION(NOM_PARA='INST',
                   VALE=(0.0,    0.9000000e+08,
                         5000.0, 0.9000000e+08,
                         6500.0, 1.0000000e+08,
                         8000.0, 1.1000000e+08,
                         10000.0,1.1500000e+08,
                         14000.0,1.2000000e+08,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='EXCLU',
                   );

K1YZ=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='K1YZ',
                   VALE=(0.0,    -0.9000000e+05,
                         5000.0, -0.9000000e+05,
                         6500.0, -1.5000000e+05,
                         8000.0, -2.0000000e+05,
                         10000.0,-3.5000000e+05,
                         14000.0,-7.0000000e+05,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

K1ZY=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='K1ZY',
                   VALE=(0.0,    0.9000000e+05,
                         5000.0, 0.9000000e+05,
                         6500.0, 1.5000000e+05,
                         8000.0, 2.0000000e+05,
                         10000.0,3.5000000e+05,
                         14000.0,7.0000000e+05,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

K1ZZ=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='K1ZZ',
                   VALE=(0.0,    5.0000000e+08,
                         5000.0, 5.0000000e+08,
                         6500.0, 4.0000000e+08,
                         8000.0, 3.5000000e+08,
                         10000.0,3.3000000e+08,
                         14000.0,3.0000000e+08,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

C1YY=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='C1YY',
                   VALE=(0.0,    1.5000000e+05,
                         5000.0, 1.5000000e+05,
                         6500.0, 1.3000000e+05,
                         8000.0, 1.1000000e+05,
                         10000.0,1.0000000e+05,
                         14000.0,0.7000000e+05,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

C1YZ=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='C1YZ',
                   VALE=(0.0,    1.0000000e+02,
                         5000.0, 1.0000000e+02,
                         6500.0, 1.0000000e+02,
                         8000.0, 2.0000000e+02,
                         10000.0,2.0000000e+02,
                         14000.0,3.0000000e+02,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

C1ZY=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='C1ZY',
                   VALE=(0.0,    -1.0000000e+02,
                         5000.0, -1.0000000e+02,
                         6500.0, -1.0000000e+02,
                         8000.0, -2.0000000e+02,
                         10000.0,-3.0000000e+02,
                         14000.0,-4.0000000e+02,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

C1ZZ=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='C1ZZ',
                   VALE=(0.0,    4.5000000e+05,
                         5000.0, 4.5000000e+05,
                         6500.0, 3.3000000e+05,
                         8000.0, 2.6000000e+05,
                         10000.0,2.0000000e+05,
                         14000.0,1.5000000e+05,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

K2YY=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='K2YY',
                   VALE=(0.0,    0.6000000e+08,
                         5000.0, 0.6000000e+08,
                         6500.0, 0.7000000e+08,
                         8000.0, 0.8000000e+08,
                         10000.0,0.9000000e+08,
                         14000.0,1.0000000e+08,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

K2YZ=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='K2YZ',
                   VALE=(0.0,    -0.8000000e+05,
                         5000.0, -0.8000000e+05,
                         6500.0, -1.3000000e+05,
                         8000.0, -2.0000000e+05,
                         10000.0,-3.0000000e+05,
                         14000.0,-6.0000000e+05,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

K2ZY=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='K2ZY',
                   VALE=(0.0,    0.8000000e+05,
                         5000.0, 0.8000000e+05,
                         6500.0, 1.3000000e+05,
                         8000.0, 2.0000000e+05,
                         10000.0,3.0000000e+05,
                         14000.0,6.0000000e+05,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

K2ZZ=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='K2ZZ',
                   VALE=(0.0,    1.5000000e+08,
                         5000.0, 1.5000000e+08,
                         6500.0, 1.4000000e+08,
                         8000.0, 1.4000000e+08,
                         10000.0,1.4000000e+08,
                         14000.0,1.4000000e+08,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

C2YY=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='C2YY',
                   VALE=(0.0,    1.2000000e+05,
                         5000.0, 1.2000000e+05,
                         6500.0, 1.0000000e+05,
                         8000.0, 0.9000000e+05,
                         10000.0,0.8000000e+05,
                         14000.0,0.6000000e+05,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

C2YZ=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='C2YZ',
                   VALE=(0.0,    1.0000000e+02,
                         5000.0, 1.0000000e+02,
                         6500.0, 1.0000000e+02,
                         8000.0, 2.0000000e+02,
                         10000.0,2.0000000e+02,
                         14000.0,3.0000000e+02,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

C2ZY=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='C2ZY',
                   VALE=(0.0,    -1.0000000e+02,
                         5000.0, -1.0000000e+02,
                         6500.0, -1.0000000e+02,
                         8000.0, -2.0000000e+02,
                         10000.0,-2.0000000e+02,
                         14000.0,-3.0000000e+02,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

C2ZZ=DEFI_FONCTION(NOM_PARA='INST',
                   NOM_RESU='C2ZZ',
                   VALE=(0.0,    1.9000000e+05,
                         5000.0, 1.9000000e+05,
                         6500.0, 1.5000000e+05,
                         8000.0, 1.3000000e+05,
                         10000.0,1.0000000e+05,
                         14000.0,0.8000000e+05,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',
                   );

mail=LIRE_MAILLAGE();

# ---------------------
# DEFINITION DU MATERIAU
# ---------------------
acier=DEFI_MATERIAU(ELAS=_F(E=2.e11,
                            NU=0.3,
                            RHO=7800,),);

# ---------------------
# AFFECTATION DU MODELE
# ---------------------
modele=AFFE_MODELE(MAILLAGE=mail,
                   AFFE=(_F(GROUP_MA='ROTOR',
                            PHENOMENE='MECANIQUE',
                            MODELISATION='POU_D_T',),
                         _F(GROUP_MA=('DISQ1','DISQ2','DISQ3','PALIER1','PALIER2'),
                            PHENOMENE='MECANIQUE',
                            MODELISATION='DIS_TR',),),);

# -----------------------
# AFFECTATION DU MATERIAU
# -----------------------
chmat=AFFE_MATERIAU(MAILLAGE=mail,
                    AFFE=_F(GROUP_MA='ROTOR',
                            MATER=acier,),);

# ------------------
# CONDITIONS AUX LIMITES
# ------------------
blocage=AFFE_CHAR_MECA(MODELE=modele,
                     DDL_IMPO=(_F(GROUP_NO=('PALIER1',),
                                  DX=0,
                                  ),))
                                    
cara1=AFFE_CARA_ELEM(MODELE=modele,
                    POUTRE=(_F(GROUP_MA='SA1',
                              SECTION='CERCLE',
                              CARA=('R','EP'),
                              VALE=(0.08,0.02,),),
                            _F(GROUP_MA='SA2',
                              SECTION='CERCLE',
                              CARA='R',
                              VALE=0.08,),
                            _F(GROUP_MA='SA3',
                              SECTION='CERCLE',
                              CARA='R',
                              VALE=0.045,),
                            _F(GROUP_MA='SA4',
                              SECTION='CERCLE',
                              CARA='R',
                              VALE=0.03,),),
                    DISCRET=(_F(CARA='M_TR_D_N',
                                GROUP_MA='DISQ1',
                                VALE=(2.00E+01,4.00E-01, 
                                2.00E-01,2.00E-01,0,0,0,0,0,0,),),
                             _F(CARA='K_TR_D_N',
                                GROUP_MA='DISQ1',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='A_TR_D_N',
                                GROUP_MA='DISQ1',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='M_TR_D_N',
                                GROUP_MA='DISQ2',
                                VALE=(1.70E+01,3.40E-01, 
                                1.70E-01,1.70E-01,0,0,0,0,0,0,),),
                             _F(CARA='K_TR_D_N',
                                GROUP_MA='DISQ2',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='A_TR_D_N',
                                GROUP_MA='DISQ2',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='M_TR_D_N',
                                GROUP_MA='DISQ3',
                                VALE=(1.00E+01,3.00E-02, 
                                1.50E-02,1.50E-02,0,0,0,0,0,0,),),
                             _F(CARA='K_TR_D_N',
                                GROUP_MA='DISQ3',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='A_TR_D_N',
                                GROUP_MA='DISQ3',
                                VALE=(0,0,0,0,0,0,),),
                             _F(GROUP_MA='PALIER1',
                                CARA='K_TR_D_N',
                                SYME='OUI',
                                VALE=(0.,0.9000000e+08,3.0000000e+08,0.,0.,0. ) ),
                             _F(GROUP_MA='PALIER2',
                                CARA='K_TR_D_N',
                                SYME='OUI',
                                VALE=(0.,0.6000000e+08,1.4000000e+08,0.,0.,0. ) ),
                             )
                        );

MACRO_MATR_ASSE(MODELE=modele,
                CHAM_MATER=chmat,
                CARA_ELEM=cara1,
                CHARGE=blocage,
                NUME_DDL=CO('NUMEDDL'),
                MATR_ASSE=(_F(MATRICE=CO('RIGIDIT1'),
                              OPTION='RIGI_MECA',),
                           _F(MATRICE=CO('MASSE1'),
                              OPTION='MASS_MECA',),
                           _F(MATRICE=CO('AMOR1'),
                              OPTION='AMOR_MECA',),),);

MODET=MODE_ITER_SIMULT(MATR_A=RIGIDIT1,
                       MATR_B=MASSE1,
                       METHODE='SORENSEN',
                       CALC_FREQ=_F(OPTION='BANDE',
                                    FREQ=(0.1,25000),));

MODES=EXTR_MODE(FILTRE_MODE=_F(MODE=MODET,
                               NUME_ORDRE=(1,2,3,4,5,6,8,9,11,12,15,16,18,19,20,21,23,24,26,
                                           27,28,29,32,33,37,38,39,40,42,43,46,47,50,51,52,
                                           53,55,56,58,59),),)

DEBV=0.0;
FINV=20000;
PASV = 500.0;
nbF=12;
VIT=NP.arange(DEBV,FINV+1,PASV);
nbV=len(VIT);
L_VITROT=[VIT[ii]*2*pi/60. for ii in range(nbV)];

cara=[None]*nbV
RIGI=[None]*nbV
MASS=[None]*nbV
AMOR=[None]*nbV
GYOM=[None]*nbV
GYAS=[None]*nbV
RIGE=[None]*nbV
MAGE=[None]*nbV
AMGE=[None]*nbV
GYGE=[None]*nbV
OMGE=[None]*nbV
NUME=[None]*nbV

_mod1=[None]*nbV;
_mod2=[None]*nbV;
tab=Table()

for kk in range(0,nbV,1) :

   # --------------------------------
   # DEF DES SECTIONS et des RAIDEURS
   # --------------------------------
   OM=L_VITROT[kk]
   RPM=OM*60/(2*pi)
   nom = 'OM_'+str(kk)
   cara[kk]=AFFE_CARA_ELEM(MODELE=modele,
                    POUTRE=(_F(GROUP_MA='SA1',
                              SECTION='CERCLE',
                              CARA=('R','EP'),
                              VALE=(0.08,0.02,),),
                            _F(GROUP_MA='SA2',
                              SECTION='CERCLE',
                              CARA='R',
                              VALE=0.08,),
                            _F(GROUP_MA='SA3',
                              SECTION='CERCLE',
                              CARA='R',
                              VALE=0.045,),
                            _F(GROUP_MA='SA4',
                              SECTION='CERCLE',
                              CARA='R',
                              VALE=0.03,),),
                    DISCRET=(_F(CARA='M_TR_D_N',
                                GROUP_MA='DISQ1',
                                VALE=(2.00E+01,4.00E-01, 
                                2.00E-01,2.00E-01,0,0,0,0,0,0,),),
                             _F(CARA='K_TR_D_N',
                                GROUP_MA='DISQ1',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='A_TR_D_N',
                                GROUP_MA='DISQ1',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='M_TR_D_N',
                                GROUP_MA='DISQ2',
                                VALE=(1.70E+01,3.40E-01, 
                                1.70E-01,1.70E-01,0,0,0,0,0,0,),),
                             _F(CARA='K_TR_D_N',
                                GROUP_MA='DISQ2',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='A_TR_D_N',
                                GROUP_MA='DISQ2',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='M_TR_D_N',
                                GROUP_MA='DISQ3',
                                VALE=(1.00E+01,3.00E-02, 
                                1.50E-02,1.50E-02,0,0,0,0,0,0,),),
                             _F(CARA='K_TR_D_N',
                                GROUP_MA='DISQ3',
                                VALE=(0,0,0,0,0,0,),),
                             _F(CARA='A_TR_D_N',
                                GROUP_MA='DISQ3',
                                VALE=(0,0,0,0,0,0,),),
                             _F(GROUP_MA='PALIER1',
                                   CARA='K_TR_N',
                                   SYME='NON',
                                   VALE = ( 0.,   0.,   0.,   0.,   0.,   0.,  0.,   K1YY(RPM),   K1ZY(RPM),   0.,
                                   0.,   0.,   0.,   K1YZ(RPM),   K1ZZ(RPM),   0.,   0.,   0.,   0.,   0.,
                                   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,
                                   0.,   0.,   0.,   0.,   0.,   0.,),),
                             _F(GROUP_MA='PALIER1',
                                   CARA='A_TR_N',
                                   SYME='NON',
                                   VALE = ( 0.,   0.,   0.,   0.,   0.,   0.,  0.,   C1YY(RPM),   C1ZY(RPM),   0.,
                                   0.,   0.,   0.,   C1YZ(RPM),   C1ZZ(RPM),   0.,   0.,   0.,   0.,   0.,
                                   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,
                                   0.,   0.,   0.,   0.,   0.,   0.,),),
                             _F(GROUP_MA='PALIER2',
                                   CARA='K_TR_N',
                                   SYME='NON',
                                   VALE = ( 0.,   0.,   0.,   0.,   0.,   0.,  0.,   K2YY(RPM),   K2ZY(RPM),   0.,
                                   0.,   0.,   0.,   K2YZ(RPM),   K2ZZ(RPM),   0.,   0.,   0.,   0.,   0.,
                                   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,
                                   0.,   0.,   0.,   0.,   0.,   0.,),),
                             _F(GROUP_MA='PALIER2',
                                   CARA='A_TR_N',
                                   SYME='NON',
                                   VALE = ( 0.,   0.,   0.,   0.,   0.,   0.,  0.,   C2YY(RPM),   C2ZY(RPM),   0.,
                                   0.,   0.,   0.,   C2YZ(RPM),   C2ZZ(RPM),   0.,   0.,   0.,   0.,   0.,
                                   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,
                                   0.,   0.,   0.,   0.,   0.,   0.,),),
                           )
                        );

   # --------------------------------
   #MATRICES ASSEMBLEES K, M
   # --------------------------------
   
   RIGI[kk]=CO('RIGI_%d' % (kk))
   MASS[kk]=CO('MASS_%d' % (kk))
   AMOR[kk]=CO('AMOR_%d' % (kk))
   GYAS[kk]=CO('GYAS_%d' % (kk))
   RIGE[kk]=CO('RIGE_%d' % (kk))
   MAGE[kk]=CO('MAGE_%d' % (kk))
   AMGE[kk]=CO('AMGE_%d' % (kk))
   GYGE[kk]=CO('GYGE_%d' % (kk))
   OMGE[kk]=CO('OMGE_%d' % (kk))
   NUME[kk]=CO('NUME_%d' % (kk)) 
   
   MACRO_MATR_ASSE(MODELE=modele,
                CHAM_MATER=chmat,
                CARA_ELEM=cara[kk],
                CHARGE=blocage,
                NUME_DDL=NUME[kk],
                MATR_ASSE=(_F(MATRICE=RIGI[kk],
                              OPTION='RIGI_MECA',),
                           _F(MATRICE=MASS[kk],
                              OPTION='MASS_MECA',),
                           _F(MATRICE=GYAS[kk],
                              OPTION='MECA_GYRO',),
                           _F(MATRICE=AMOR[kk],
                              OPTION='AMOR_MECA',),),);

   GYOM[kk]=COMB_MATR_ASSE(COMB_R=(_F(MATR_ASSE=GYAS[kk], COEF_R=OM,),
                                   _F(MATR_ASSE=AMOR[kk], COEF_R=1.,),))

   MACRO_PROJ_BASE(BASE=MODES,
                PROFIL='PLEIN',
                MATR_ASSE_GENE=(_F(MATRICE=MAGE[kk],
                                   MATR_ASSE=MASS[kk],),
                                _F(MATRICE=RIGE[kk],
                                   MATR_ASSE=RIGI[kk],),
                                _F(MATRICE=AMGE[kk],
                                   MATR_ASSE=AMOR[kk],),
                                _F(MATRICE=GYGE[kk],
                                   MATR_ASSE=GYAS[kk],),
                                _F(MATRICE=OMGE[kk],
                                   MATR_ASSE=GYOM[kk],),),);
   
   _mod1[kk]=MODE_ITER_SIMULT(MATR_A=RIGI[kk],
                               MATR_B=MASS[kk],
                               MATR_C=GYOM[kk],
                               METHODE='QZ',
                               CALC_FREQ=_F(OPTION='CENTRE',FREQ=10.,NMAX_FREQ=nbF,),
                               VERI_MODE=_F(PREC_SHIFT=5.000000000000000E-3,
                                            STOP_ERREUR='NON',
                                            STURM='NON',
                                            SEUIL=1.9999999999999995E-04),
                               )
   
   _mod2[kk]=MODE_ITER_SIMULT(MATR_A=RIGE[kk],
                               MATR_B=MAGE[kk],
                               MATR_C=OMGE[kk],
                               METHODE='QZ',
                               CALC_FREQ=_F(OPTION='CENTRE',FREQ=10.,NMAX_FREQ=nbF,),
                               VERI_MODE=_F(PREC_SHIFT=5.000000000000000E-3,
                                            STOP_ERREUR='NON',
                                            STURM='NON',
                                            SEUIL=1.9999999999999995E-04),
                               )
   
   tab.append({'NUME_VITE' : kk, 'VITE_ROTA' : OM, 'NOM_OBJET': 'MODE_MECA', 'TYPE_OBJET': 'MODE_MECA', 'NOM_SD' : _mod1[kk].nom})

motcles=tab.dict_CREA_TABLE()
tab_out=CREA_TABLE(TYPE_TABLE = 'TABLE_CONTENEUR', **motcles);

#VITESSE DE ROTATION OMEGA=0 RAD/S, METHODE QZ DIRECT
TEST_RESU(RESU=(
          _F( RESULTAT = _mod1_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 1,  VALE = 1.30695E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 1,  VALE = 6.37866E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 2,  VALE = 2.27925E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 2,  VALE = 9.58757E-02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 3,  VALE = 3.13311E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 3,  VALE = 2.27364E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 4,  VALE = 3.81529E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 4,  VALE = 6.52812E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 5,  VALE = 3.90802E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 5,  VALE = 1.77361E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 7,  VALE = 1.44801E+03, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 7,  VALE = 1.42312E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 8,  VALE = 1.55484E+03, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 8,  VALE = 1.07354E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 10,  VALE = 2.05012E+03, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-1,
                NUME_ORDRE = 10,  VALE = 3.08294E-01, REFERENCE='SOURCE_EXTERNE',),
            ),)

#VITESSE DE ROTATION OMEGA=0 RAD/S, METHODE QZ A 2 ETAGES
TEST_RESU(RESU=(
          _F( RESULTAT = _mod2_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 1,  VALE = 1.30695E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 1,  VALE = 6.37866E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 2,  VALE = 2.27925E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 2,  VALE = 9.58757E-02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 3,  VALE = 3.13311E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 3,  VALE = 2.27364E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 4,  VALE = 3.81529E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 4,  VALE = 6.52812E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 5,  VALE = 3.90802E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 5,  VALE = 1.77361E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 6,  VALE = 1.44801E+03, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 6,  VALE = 1.42312E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 7,  VALE = 1.55484E+03, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 7,  VALE = 1.07354E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 8,  VALE = 2.05012E+03, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_0, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 8,  VALE = 3.08294E-01, REFERENCE='SOURCE_EXTERNE',),
            ),)

#VITESSE DE ROTATION OMEGA=20000 RAD/S, METHODE QZ DIRECT
TEST_RESU(RESU=(
          _F( RESULTAT = _mod1_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 1,  VALE = 1.23683E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 1,  VALE = 1.24817E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 2,  VALE = 2.00581E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 2,  VALE = 2.17961E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 3,  VALE = 2.86743E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 3,  VALE = 1.81652E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 4,  VALE = 3.08624E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 4,  VALE = 4.32727E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 5,  VALE = 3.70338E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 5,  VALE = 2.54912E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 6,  VALE = 4.09861E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 6,  VALE = 5.58764E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 8,  VALE = 8.13124E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 8,  VALE = 4.73230E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 9,  VALE = 9.97312E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod1_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 9,  VALE = 4.93828E-01, REFERENCE='SOURCE_EXTERNE',),
            ),)

#VITESSE DE ROTATION OMEGA=20000 RAD/S, METHODE QZ A 2 ETAGES
TEST_RESU(RESU=(
          _F( RESULTAT = _mod2_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 1,  VALE = 1.23683E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 1,  VALE = 1.24817E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 2,  VALE = 2.00581E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 2,  VALE = 2.17961E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 3,  VALE = 2.86743E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 3,  VALE = 1.81652E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 4,  VALE = 3.08624E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 4,  VALE = 4.32727E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 5,  VALE = 3.70338E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 5,  VALE = 2.54912E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 6,  VALE = 4.09861E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 6,  VALE = 5.58764E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 7,  VALE = 8.13124E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 7,  VALE = 4.73230E-01, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 8,  VALE = 9.97312E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = _mod2_40, PARA = 'AMOR_REDUIT',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 8,  VALE = 4.93828E-01, REFERENCE='SOURCE_EXTERNE',),
            ),)
# --------------------------------------------------------------
# APPEL MACRO DE CALCUL DES FREQUENCES ET DES MODES EN ROTATION
# --------------------------------------------------------------
#TYPE DE PRECESSION (1 SOMME, 2 PLUS GRANDE ORBITE)
typ_prec =1
#TYPE DE SUIVI, (0 SANS_TRI, 1 TRI_PREC, 2 TRI_FORM_MOD)
typ_tri=2

nbF_camp=8;

# UNITES DES FICHIERS DE SORTIE DES TRACES
unit_fle = 29;
unit_tor = 28; 
uniy_lon = 27;
unit_tot = 26;
unit_int = 25;
nomfic   = 'intersec.txt'

L_S=[1.0, 1.0];
# ---------------------------------------------------
# APPEL MACRO PERMETTANT DE TRACER LE DIAGRAMME DE CAMPBELL
# ---------------------------------------------------
IMPR_DIAG_CAMPBELL(MAILLAGE   =mail, 
                 MODES      =tab_out,
                 NFREQ_CAMP =nbF_camp,
                 TYP_PREC   =typ_prec, 
                 TYP_TRI    =typ_tri,
                 UNIT_FLE   = unit_fle,
                 UNIT_TOR   = unit_tor, 
                 UNIT_LON   = uniy_lon, 
                 UNIT_TOT   = unit_tot,
                 UNIT_INT   = unit_int,
                 L_S        = L_S);

FIN();
