# MODIF  DATE 13/01/2011   AUTEUR PELLET J.PELLET 
# TITRE POUTRE CONSOLE 3D EN FLEXION
# VALIDATION DE LA METHODE ARLEQUIN
# sslp104b.para = tps_job 60 mem_job 70Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# ARLEQUIN : RACCORD 3D/3D INCOMPATIBLE.
#            MAILLAGES DE DENSITES DIFFERENTES
#
# VERSION 3D DE SSLP104A

DEBUT(CODE=_F(NOM='SSLP104B',
              NIV_PUB_WEB='INTERNET',),
      DEBUG=_F(SDVERI='OUI',),);

############################
# 1. Lecture du maillage fin
############################

PRE_GMSH(UNITE_GMSH=21,
         UNITE_MAILLAGE=23,);

ma1=LIRE_MAILLAGE(UNITE=23,);

#################################
# 2. Lecture du maillage grossier
#################################

PRE_GMSH(UNITE_GMSH=22,
         UNITE_MAILLAGE=24,);

ma2=LIRE_MAILLAGE(UNITE=24,);

MAIL=ASSE_MAILLAGE(MAILLAGE_1=ma1,
                   MAILLAGE_2=ma2,
                   OPERATION='SUPERPOSE',);

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=(_F(GROUP_MA='GM2011',),
                               _F(GROUP_MA='GM2001',),),);

ELAS=DEFI_MATERIAU(ELAS=_F(E=300.0,
                           NU=0.3,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=_F(TOUT='OUI',
                            MATER=ELAS,),);

MOD=AFFE_MODELE(MAILLAGE=MAIL,
                AFFE=(_F(TOUT='OUI',
                         PHENOMENE='MECANIQUE',
                         MODELISATION='3D',),
                      _F(GROUP_MA='GM1',
                         PHENOMENE='MECANIQUE',
                         MODELISATION='POU_D_E',),),);

carel=AFFE_CARA_ELEM(MODELE=MOD,
                     POUTRE=_F(GROUP_MA='GM1',
                               SECTION='RECTANGLE',
                               CARA='H',
                               VALE=8.0,),);

BLQ=AFFE_CHAR_MECA(MODELE=MOD,
                   DDL_IMPO=_F(GROUP_NO='GM101',
                               DX=0.0,
                               DY=0.0,
                               DZ=0.0,
                               DRX=0.0,
                               DRY=0.0,
                               DRZ=0.0,),
                   LIAISON_ELEM=_F(OPTION='3D_POU',
                                   GROUP_MA_1='GM2001',
                                   GROUP_NO_2='GM100',),);

DPL=AFFE_CHAR_MECA(MODELE=MOD,
                   FORCE_FACE=_F(GROUP_MA='GM2002',
                                 FY=-0.05,),);

################################################
# 3. Creation des relations de couplage Arlequin
#    entre les groupes de mailles
#    GM4002 (maillage fin) et
#    GM3001 (maillage grossier)
#    Collage sur le modele grossier
################################################

ARL=AFFE_CHAR_MECA(MODELE=MOD,
                   ARLEQUIN=_F(GROUP_MA_1='GM4002',
                               GROUP_MA_2='GM3001',
                               GROUP_MA_COLL='GM3001',
                               COLLAGE='GROUP_MA_2',
                               POIDS_1=0.99,),);

RES=MECA_STATIQUE(MODELE=MOD,
                  CHAM_MATER=CHMAT,
                  CARA_ELEM=carel,
                  EXCIT=(_F(CHARGE=BLQ,),
                         _F(CHARGE=DPL,),
                         _F(CHARGE=ARL,),),);

RES=CALC_ELEM(reuse =RES,

              RESULTAT=RES,
              OPTION='SIEF_ELNO',);

RES=CALC_NO(reuse =RES,
            RESULTAT=RES,
            OPTION='SIEF_NOEU',
            );

TEST_RESU(RESU=(_F(RESULTAT=RES,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='GM5015',
                   VALE=-2.67,
                   CRITERE='RELATIF',
                   PRECISION=0.02,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RES,
                   NUME_ORDRE=1,
                   NOM_CHAM='SIEF_NOEU',
                   NOM_CMP='SIZZ',
                   GROUP_NO='GM103',
                   VALE=2.346,
                   CRITERE='RELATIF',
                   PRECISION=0.02,
                   REFERENCE='ANALYTIQUE',),),);

FIN();
