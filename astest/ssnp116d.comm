
# MODIF  DATE 18/03/2008   AUTEUR PELLET J.PELLET 
# TITRE COUPLAGE FLUAGE/NADAI_B - TRACTION UNIAXIALE EN BARRES
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2006  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#-----------------------------------------------------------------------
#   TEST DU MODELE DE COUPLAGE D'UNE LOI DE FLUAGE DE GRANGER
#   (GRANGER_FP) ET DES LOIS DE PLASTICITE/FISSURATION :
#   NADAI_B, VMIS_ISOT_LINE EN DEPLACEMENT IMPOSE,
#    EN MODELISATION BARRE, EN TRACTION UNIAXIALE (XX).
#
#   POUR SIMPLIFIER LA SOLUTION ANALYTIQUE DE REFERENCE :
#   - LES PARAMETRES DE LA LOI DE PLASTICITE/FISSURATION SONT CHOISIS
#   AFIN D'OBTENIR UN COMPORTMENT ELASTO PLASTIQUE QUASI PARFAIT
#   (ECROUISSAGE QUASI NUL) .
#   LES VARIATIONS DE TEMPERATURE ET DE SECHAGE ET LES COEFFICIENTS
#  DE RETRAIT DE DESSICCATION ET RETRAIT THERMIQUE SONT CHOISIS DE TELLE
#   SORTE QUE LES 2 EFFETS S'ANNULENT
#-----------------------------------------------------------------------

DEBUT(CODE=_F(NOM='SSNP116D', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

MAIL=LIRE_MAILLAGE(VERI_MAIL=_F(VERIF='OUI',),);

MO=AFFE_MODELE(MAILLAGE=MAIL,
               AFFE=_F(TOUT='OUI',
                       PHENOMENE='MECANIQUE',
                       MODELISATION='BARRE',),);

CARA=AFFE_CARA_ELEM(MODELE=MO,
                    BARRE=_F(GROUP_MA='TOUT',
                             SECTION='GENERALE',
                             CARA='A',
                             VALE=1.,),);

DESORP=DEFI_FONCTION(NOM_PARA='SECH',
                     VALE=(0.,1.,
1.,1.,
),);

E=DEFI_CONSTANTE(VALE=31000,);

NU=DEFI_CONSTANTE(VALE=0.2,);

ALPHA=DEFI_CONSTANTE(VALE=1.E-5,);

FC=DEFI_CONSTANTE(VALE=40.,);

FT=DEFI_CONSTANTE(VALE=4.,);

BETA=DEFI_CONSTANTE(VALE=1.16,);

GC=DEFI_CONSTANTE(VALE=10.,);
# VALEUR NON PHYSIQUE DE GT POUR MODELISER UN ECROUISSAGE QUASI NUL
# VALEUR USUELLE : GT = 0.1

GT=DEFI_CONSTANTE(VALE=10000.,);

ECRO=DEFI_CONSTANTE(VALE=0.01,);

BETON=DEFI_MATERIAU(ELAS_FO=_F(E=E,
                               NU=NU,
                               TEMP_DEF_ALPHA=0.,
                               ALPHA=ALPHA,
                               K_DESSIC=2.E-4,
                               FONC_DESORP=DESORP,),
                    ECRO_LINE_FO=_F(D_SIGM_EPSI=ECRO,
                                    SY=FT,),
                    NADAI_B=_F(F_C=40.,
                               F_T=4.,
                               CRIT_E_C=1.,
                               EPSP_P_C=9.64705,
                               EPSP_R_C=5.,
                               EPSI_R_T=5000.,
                               FAC_T_C=0.2,),
                    GRANGER_FP=_F(J1=0.2,
                                  TAUX_1=4320000.,
                                  QSR_K=0.,),);

SECH1=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                 OPERATION='AFFE',
                 MAILLAGE=MAIL,
                 AFFE=_F(
                 TOUT='OUI',
                 NOM_CMP='TEMP',
                 VALE=1.,),);

SECH2=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                 OPERATION='AFFE',
                 MAILLAGE=MAIL,
                 AFFE=_F(
                 TOUT='OUI',
                 NOM_CMP='TEMP',
                 VALE=0.,),);

TEMP1=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                 OPERATION='AFFE',
                 MAILLAGE=MAIL,
                 AFFE=_F(
                 TOUT='OUI',
                 NOM_CMP='TEMP',
                 VALE=0.,),);

TEMP2=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                 OPERATION='AFFE',
                 MAILLAGE=MAIL,
                 AFFE=_F(
                 TOUT='OUI',
                 NOM_CMP='TEMP',
                 VALE=20.,),);

TEMP=CREA_RESU(OPERATION='AFFE',
               TYPE_RESU='EVOL_THER',
               NOM_CHAM='TEMP',
               AFFE=(
               _F(CHAM_GD=TEMP1,
                  INST=0.,),
               _F(CHAM_GD=TEMP1,
                  INST=100.,),),);

SECH=CREA_RESU(OPERATION='AFFE',
               TYPE_RESU='EVOL_THER',
               NOM_CHAM='TEMP',
               AFFE=(
               _F(CHAM_GD=SECH1,
                  INST=0.,),
               _F(CHAM_GD=SECH1,
                  INST=100.,),),);

CM=AFFE_MATERIAU(MAILLAGE=MAIL,
                 AFFE=_F(TOUT='OUI',
                         MATER=BETON,),
                 AFFE_VARC=(_F(TOUT='OUI',
                              EVOL=SECH,
                              NOM_VARC='SECH',
                              NOM_CHAM='TEMP',
                              VALE_REF=1),
                            _F(TOUT='OUI',
                              EVOL=TEMP,
                              NOM_VARC='TEMP',
                              NOM_CHAM='TEMP',
                              VALE_REF=0),),);

COND_LIM=AFFE_CHAR_MECA(MODELE=MO,
                        DDL_IMPO=(_F(GROUP_NO='A',
                                     DX=0.,
                                     DY=0.,
                                     DZ=0.,),
                                  _F(GROUP_NO='B',
                                     DY=0.,
                                     DZ=0.,),),);

TRAC=AFFE_CHAR_MECA(MODELE=MO,
                    DDL_IMPO=_F(GROUP_NO='B',
                                DX=0.006,),);

LINST=DEFI_LIST_REEL(DEBUT=0.,
                     INTERVALLE=(_F(JUSQU_A=10.,
                                    NOMBRE=4,),
                                 _F(JUSQU_A=13.0242,
                                    NOMBRE=3,),
                                 _F(JUSQU_A=100.,
                                    NOMBRE=3,),),);

COEF_TR=DEFI_FONCTION(NOM_PARA='INST',
                      VALE=(0.,0.,
100.,1.,
),);
#########################################################
###    COUPLAGE GRANGER_FP NADAI_B            ###
#####################################################################
################################################
###    COUPLAGE   GRANGER_FP  VMIS_ISOT_LINE      ###
################################################

#     THERMIQUE ET SECHAGE CST - SOLUTION ANALYTIQUE  ###

COUPLA=STAT_NON_LINE(SOLVEUR=_F(METHODE='MUMPS',PARALLELISME='DISTRIBUE_MD'),MODELE=MO,
                     CHAM_MATER=CM,
                     CARA_ELEM=CARA,
                     EXCIT=(_F(CHARGE=COND_LIM,),
                            _F(CHARGE=TRAC,
                               FONC_MULT=COEF_TR,),),
                     COMP_INCR=_F(RELATION='KIT_DDI',
                                  RELATION_KIT=('GRANGER_FP','NADAI_B',),
                                  DEFORMATION='PETIT',
                                  ALGO_1D='DEBORST',
                                  TOUT='OUI',
                                  RESI_INTE_RELA=1.E-6,
                                  ITER_INTE_MAXI=20,
                                  ITER_INTE_PAS=0,),
                     INCREMENT=_F(LIST_INST=LINST,),
                     NEWTON=_F(REAC_INCR=1,
                               MATRICE='TANGENTE',
                               REAC_ITER=5,),
                     CONVERGENCE=_F(RESI_GLOB_RELA=1.E-6,
                                    ITER_GLOB_MAXI=30,),
                     TITRE='COUPLAGE FLUAGE/FISSURATION',);

COUPLA=CALC_ELEM(reuse =COUPLA,
                 RESULTAT=COUPLA,
                 OPTION='SIEF_ELNO_ELGA',);

RELEVE_1=POST_RELEVE_T(ACTION=_F(INTITULE='SIEF',
                                 GROUP_NO='B',
                                 RESULTAT=COUPLA,
                                 NOM_CHAM='SIEF_ELNO_ELGA',
                                 LIST_INST=LINST,
                                 PRECISION=1.E-8,
                                 NOM_CMP='N',
                                 OPERATION='EXTRACTION',),);

TEST_TABLE(TABLE=RELEVE_1,
           FILTRE=(_F(NOM_PARA='INTITULE',
                      VALE_K='SIEF',),
                   _F(NOM_PARA='INST',
                      VALE=10.0,),),
           NOM_PARA='N',
           VALE=3.07786,
           PRECISION=0.0001,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=RELEVE_1,
           FILTRE=(_F(NOM_PARA='INTITULE',
                      VALE_K='SIEF',),
                   _F(NOM_PARA='INST',
                      VALE=100.0,),),
           NOM_PARA='N',
           VALE=4.0,
           PRECISION=0.0001,
           REFERENCE='ANALYTIQUE',);
#   TEST DE TOUS LES COUPLAGES AVEC THERMIQUE ET SECHAGE VARIABLES

TEMPV=CREA_RESU(OPERATION='AFFE',
                TYPE_RESU='EVOL_THER',
                NOM_CHAM='TEMP',
                AFFE=(
                _F(CHAM_GD=TEMP1,
                   INST=0.,),
                _F(CHAM_GD=TEMP2,
                   INST=100.,),),);

SECHV=CREA_RESU(OPERATION='AFFE',
                TYPE_RESU='EVOL_THER',
                NOM_CHAM='TEMP',
                AFFE=(
                _F(CHAM_GD=SECH1,
                   INST=0.,),
                _F(CHAM_GD=SECH2,
                   INST=100.,),),);

CMV=AFFE_MATERIAU(MAILLAGE=MAIL,
                 AFFE=_F(TOUT='OUI',
                         MATER=BETON,),
                 AFFE_VARC=(_F(TOUT='OUI',
                              EVOL=SECHV,
                              NOM_VARC='SECH',
                              NOM_CHAM='TEMP',
                              VALE_REF=1),
                           _F(TOUT='OUI',
                              EVOL=TEMPV,
                              NOM_VARC='TEMP',
                              NOM_CHAM='TEMP',
                              VALE_REF=0),),);

COND_LI2=AFFE_CHAR_MECA(MODELE=MO,
                        DDL_IMPO=(_F(GROUP_NO='A',
                                     DX=0.,
                                     DY=0.,
                                     DZ=0.,),
                                  _F(GROUP_NO='B',
                                     DY=0.,
                                     DZ=0.,),),);

COUPLA2=STAT_NON_LINE(SOLVEUR=_F(METHODE='MUMPS',PARALLELISME='DISTRIBUE_MD'),MODELE=MO,
                      CHAM_MATER=CMV,
                      CARA_ELEM=CARA,
                      EXCIT=(_F(CHARGE=COND_LI2,),
                             _F(CHARGE=TRAC,
                                FONC_MULT=COEF_TR,),),
                      COMP_INCR=_F(RELATION='KIT_DDI',
                                   RELATION_KIT=('GRANGER_FP','NADAI_B',),
                                   DEFORMATION='PETIT',
                                   ALGO_1D='DEBORST',
                                   TOUT='OUI',
                                   RESI_INTE_RELA=1.E-6,
                                   ITER_INTE_MAXI=20,
                                   ITER_INTE_PAS=0,),
                      INCREMENT=_F(LIST_INST=LINST,),
                      NEWTON=_F(MATRICE='ELASTIQUE',),
                      CONVERGENCE=_F(RESI_GLOB_RELA=1.E-6,
                                     ITER_GLOB_MAXI=50,),
                      TITRE='COUPLAGE FLUAGE/FISSURATION',);

COUPLA2=CALC_ELEM(reuse =COUPLA2,
                  RESULTAT=COUPLA2,
                  OPTION='SIEF_ELNO_ELGA',);

RELEVE_3=POST_RELEVE_T(ACTION=_F(INTITULE='SIEF',
                                 GROUP_NO='B',
                                 RESULTAT=COUPLA2,
                                 NOM_CHAM='SIEF_ELNO_ELGA',
                                 LIST_INST=LINST,
                                 PRECISION=1.E-8,
                                 NOM_CMP='N',
                                 OPERATION='EXTRACTION',),);

TEST_TABLE(TABLE=RELEVE_3,
           FILTRE=(_F(NOM_PARA='INTITULE',
                      VALE_K='SIEF',),
                   _F(NOM_PARA='INST',
                      VALE=10.0,),),
           NOM_PARA='N',
           VALE=3.077192,
           PRECISION=0.0001,
           REFERENCE='NON_REGRESSION',
           VERSION='7.3.9',);

COUPLA3=STAT_NON_LINE(SOLVEUR=_F(METHODE='MUMPS',PARALLELISME='DISTRIBUE_MD'),MODELE=MO,
                      CHAM_MATER=CMV,
                      CARA_ELEM=CARA,
                      EXCIT=(_F(CHARGE=COND_LI2,),
                             _F(CHARGE=TRAC,
                                FONC_MULT=COEF_TR,),),
                      COMP_INCR=_F(RELATION='KIT_DDI',
                                   RELATION_KIT=('GRANGER_FP','VMIS_ISOT_LINE',),
                                   DEFORMATION='PETIT',
                                   ALGO_1D='DEBORST',
                                   TOUT='OUI',
                                   RESI_INTE_RELA=1.E-6,
                                   ITER_INTE_MAXI=20,
                                   ITER_INTE_PAS=0,),
                      INCREMENT=_F(LIST_INST=LINST,),
                      NEWTON=_F(MATRICE='ELASTIQUE',),
                      CONVERGENCE=_F(RESI_GLOB_RELA=1.E-6,
                                     ITER_GLOB_MAXI=50,),
                      TITRE='COUPLAGE FLUAGE/FISSURATION',);

COUPLA3=CALC_ELEM(reuse =COUPLA3,
                  RESULTAT=COUPLA3,
                  OPTION='SIEF_ELNO_ELGA',);

RELEVE_4=POST_RELEVE_T(ACTION=_F(INTITULE='SIEF',
                                 GROUP_NO='B',
                                 RESULTAT=COUPLA3,
                                 NOM_CHAM='SIEF_ELNO_ELGA',
                                 LIST_INST=LINST,
                                 PRECISION=1.E-8,
                                 NOM_CMP='N',
                                 OPERATION='EXTRACTION',),);

TEST_TABLE(TABLE=RELEVE_4,
           FILTRE=(_F(NOM_PARA='INTITULE',
                      VALE_K='SIEF',),
                   _F(NOM_PARA='INST',
                      VALE=10.0,),),
           NOM_PARA='N',
           VALE=3.077193,
           PRECISION=0.0001,
           REFERENCE='NON_REGRESSION',
           VERSION='7.3.9',);

TEST_TABLE(TABLE=RELEVE_4,
           FILTRE=(_F(NOM_PARA='INTITULE',
                      VALE_K='SIEF',),
                   _F(NOM_PARA='INST',
                      VALE=100.0,),),
           NOM_PARA='N',
           VALE=4.000009,
           PRECISION=0.0001,
           REFERENCE='NON_REGRESSION',
           VERSION='7.3.9',);



FIN();
