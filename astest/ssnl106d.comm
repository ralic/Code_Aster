# MODIF  DATE 11/03/2003   AUTEUR DURAND C.DURAND 
# TITRE POUTRE ENCASTREE A UNE EXTREMITE ET CHARGEE PAR UNE TRACTION
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
# AVEC ECRO-LINE OU UN MOMENT EN PLASTICITE PARFAITE
# MODELISATION TUYAU.


DEBUT( CODE=_F(  NOM = 'SSNL106D',NIV_PUB_WEB='INTERNET') )

TITRE=DEFI_VALEUR(TX='SSNL106 TUYAU NCOU=3 NSEC=16' )

COMMENT=DEFI_VALEUR(  TX='R=0.1 EP=0.001 '  )

EP=0.001

REXT=0.1

PRE_GIBI()

MA=LIRE_MAILLAGE(  )

MA=DEFI_GROUP( reuse=MA,   MAILLAGE=MA,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

MO=AFFE_MODELE(        MAILLAGE=MA,
     AFFE=_F( TOUT = 'OUI', PHENOMENE = 'MECANIQUE',
                       MODELISATION = 'TUYAU_3M')
                        )

CAREL=AFFE_CARA_ELEM(   MODELE=MO,
           POUTRE=_F(
       GROUP_MA = 'TOUT',
   SECTION = 'CERCLE',
          CARA = (   'R', 'EP',  ), VALE = (  REXT, EP, )),
 ORIENTATION=_F( GROUP_NO = 'A', CARA = 'GENE_TUYAU', VALE = (0., 0.,  1.,))
 )

MATC2=DEFI_MATERIAU(   ELAS=_F( E = 2.E11, NU = 0.3),
           ECRO_LINE=_F( D_SIGM_EPSI = 2.E9, SY = 150.E6)
       )

CHMAT1=AFFE_MATERIAU(   MAILLAGE=MA,
                       AFFE=_F( TOUT = 'OUI', MATER = MATC2))

CHART=AFFE_CHAR_MECA(  MODELE=MO,DDL_IMPO=(
     _F( GROUP_NO = 'A', DX = 0., DY = 0., DZ = 0., DRX = 0., DRY = 0., DRZ = 0.),
     _F( GROUP_NO = 'B', DX = 0.75E-3))
    )

FONCT=DEFI_FONCTION(   NOM_PARA='INST',
                      VALE=( 0., 0., 10., 10., ) )

#

LINST=DEFI_LIST_REEL(DEBUT=0.,INTERVALLE=(
               _F( JUSQU_A = 1., NOMBRE = 1),
               _F( JUSQU_A = 2., NOMBRE = 10),
               _F( JUSQU_A = 3., NOMBRE = 10))
)

REST=STAT_NON_LINE(
                            MODELE=MO,
                        CHAM_MATER=CHMAT1,
                         CARA_ELEM=CAREL,
                             EXCIT=_F(
                CHARGE = CHART,
                FONC_MULT = FONCT),
                         COMP_INCR=_F( RELATION = 'VMIS_ISOT_LINE', ),
                         INCREMENT=_F(
                LIST_INST = LINST),
                            NEWTON=_F(
                MATRICE = 'TANGENTE',
                REAC_ITER = 3),
                       CONVERGENCE=_F(
                RESI_GLOB_RELA = 1.E-4,
                ITER_GLOB_MAXI = 20,
                ITER_INTE_MAXI = 50,
                RESI_INTE_RELA = 1.E-6)
              )

REST=CALC_ELEM( reuse=REST,
                            OPTION=('EPSI_ELGA_DEPL',
                  'SIEF_ELNO_ELGA',  'VARI_ELNO_ELGA',),
                          RESULTAT=REST,
                            MODELE=MO,
                        CHAM_MATER=CHMAT1,
                         CARA_ELEM=CAREL
              )

REST=CALC_NO( reuse=REST,     RESULTAT=REST,  MODELE=MO,
                     CHAM_MATER=CHMAT1,
                      CARA_ELEM=CAREL,
                    OPTION='REAC_NODA' )

REST=CALC_ELEM( reuse=REST,
                      MODELE=MO,
                      CHAM_MATER=CHMAT1,
                       CARA_ELEM=CAREL,
                      TOUT_ORDRE='OUI',
                     OPTION=('SIGM_ELNO_TUYO',),
                      NUME_COUCHE=3,
                     NIVE_COUCHE='SUP',
                       ANGLE=90,
                      RESULTAT=REST
                   )
REST=CALC_ELEM( reuse=REST,
                      MODELE=MO,
                      CHAM_MATER=CHMAT1,
                      CARA_ELEM=CAREL,
                      TOUT_ORDRE='OUI',
                      EXCIT=_F(
                            CHARGE = CHART,
                            FONC_MULT = FONCT),
                     OPTION=('EPSI_ELNO_TUYO',
                     'EPEQ_ELNO_TUYO',
                     'SIEQ_ELNO_TUYO',),
                      NUME_COUCHE=3,
                     NIVE_COUCHE='SUP',
                       ANGLE=90,
                      RESULTAT=REST
                   )

IMPR_RESU(  MODELE=MO,
                 RESU=_F( GROUP_NO = ('A', 'B',),
                       RESULTAT = REST, 
                       NOM_CHAM =( 'EPSI_ELNO_TUYO', 'EPEQ_ELNO_TUYO',
                     'SIEQ_ELNO_TUYO',))
            )

REST=CALC_ELEM( reuse=REST,
                      MODELE=MO,
                      CHAM_MATER=CHMAT1,
                       CARA_ELEM=CAREL,
                      TOUT_ORDRE='OUI',
                     OPTION=('VARI_ELNO_TUYO',),
                      NUME_COUCHE=3,
                     NIVE_COUCHE='SUP',
                       ANGLE=360,
                      RESULTAT=REST
                   )

TEST_RESU(RESU=(
           _F( RESULTAT = REST,
                 NUME_ORDRE = 11,
                 NOM_CHAM = 'SIGM_ELNO_TUYO',
                 MAILLE = 'M2',
                 GROUP_NO = 'B',
                 NOM_CMP = 'SIXX',
                 REFERENCE = 'ANALYTIQUE',
                 VALE = 1.5E+08,
                 PRECISION = 1.2E-2),
           _F( RESULTAT = REST,
                 NUME_ORDRE = 11,
                 NOM_CHAM = 'VARI_ELNO_TUYO',
                 MAILLE = 'M2',
                 GROUP_NO = 'B',
                 NOM_CMP = 'V1',
                  REFERENCE = 'ANALYTIQUE',
                 VALE = 7.425E-4,
                 PRECISION = 1.E-3),
           _F( RESULTAT = REST,
                 NUME_ORDRE = 11,
                 NOM_CHAM = 'VARI_ELNO_TUYO',
                 MAILLE = 'M2',
                 NOEUD = 'N5',
                 REFERENCE = 'ANALYTIQUE',
                 NOM_CMP = 'V1',
                 VALE = 7.425E-4,
                 PRECISION = 1.E-3),
           _F( RESULTAT = REST,
                 NUME_ORDRE = 11,
                 NOM_CHAM = 'VARI_ELNO_TUYO',
                 MAILLE = 'M2',
                 GROUP_NO = 'B',
                 REFERENCE = 'ANALYTIQUE',
                 NOM_CMP = 'V2',
                 VALE = 1.E0,
                 PRECISION = 1.E-3),
           _F( RESULTAT = REST,
                 NUME_ORDRE = 11,
                 NOM_CHAM = 'REAC_NODA',
                 GROUP_NO = 'B',
                 REFERENCE = 'ANALYTIQUE',
                 NOM_CMP = 'DX',
                 VALE = 9.47152E+04,
                 PRECISION = 1.E-3),
           _F( RESULTAT = REST,
                 NUME_ORDRE = 21,
                 NOM_CHAM = 'REAC_NODA',
                 REFERENCE = 'ANALYTIQUE',
                 GROUP_NO = 'B',
                 NOM_CMP = 'DX',
                 VALE = 9.56530E+04,
                 PRECISION = 1.E-3))
          )

MATC1=DEFI_MATERIAU(   ELAS=_F( E = 2.E11, NU = 0.3),
           ECRO_LINE=_F( D_SIGM_EPSI = 0.0, SY = 150.E6)
                        )

CHMAT2=AFFE_MATERIAU(   MAILLAGE=MA,
                       AFFE=_F( TOUT = 'OUI', MATER = MATC1))

CHARM=AFFE_CHAR_MECA(  MODELE=MO,DDL_IMPO=(
     _F( GROUP_NO = 'A', DX = 0., DY = 0., DZ = 0., DRX = 0., DRY = 0., DRZ = 0.),
     _F( GROUP_NO = ('A', 'B',), UO3 = 0., VO3 = 0., WO3 = 0.),
      _F( GROUP_NO = 'B',  DRZ = 0.75E-2)))

FONCM=DEFI_FONCTION(   NOM_PARA='INST',
                      VALE=( 0., 0., 100., 100., ) )

LINSR=DEFI_LIST_REEL(DEBUT=0.,INTERVALLE=(
               _F( JUSQU_A = 1.,    NOMBRE = 1),
               _F( JUSQU_A = 5.,    NOMBRE = 20))
               #INTERVALLE:(JUSQU_A: 10.   NOMBRE:10)
               #INTERVALLE:(JUSQU_A: 20.   NOMBRE:10)
  )

RESM=STAT_NON_LINE(
                            MODELE=MO,
                        CHAM_MATER=CHMAT2,
                         CARA_ELEM=CAREL,
                             EXCIT=_F(
                CHARGE = CHARM,
                FONC_MULT = FONCM),
                         COMP_INCR=_F(  RELATION = 'VMIS_ISOT_LINE', ),
                         INCREMENT=_F(
                LIST_INST = LINSR),
                       CONVERGENCE=_F(
                RESI_GLOB_RELA = 1.E-4,
                ITER_GLOB_MAXI = 1000,
                ITER_INTE_MAXI = 100,
                RESI_INTE_RELA = 1.E-6),
                            NEWTON=_F(
                REAC_ITER = 5)
              )

RESM=CALC_NO( reuse=RESM,     RESULTAT=RESM,  MODELE=MO,
                     CHAM_MATER=CHMAT2,
                      CARA_ELEM=CAREL,
                    OPTION='REAC_NODA' )

TEST_RESU(RESU=(
# MOMENT DE PREMIERE PLASTIFICATION TUYAU EN HYPOTHESE DE POUTRE
           _F( RESULTAT = RESM, NOM_CHAM = 'REAC_NODA',
                 GROUP_NO = 'B', NOM_CMP = 'DRZ',
                 REFERENCE = 'ANALYTIQUE',
                 NUME_ORDRE = 1, VALE = 4.64217E+03),
# CHARGE LIMITE TUYAU EN HYPOTHESE DE POUTRE
           _F( RESULTAT = RESM, NOM_CHAM = 'REAC_NODA',
                 GROUP_NO = 'B', NOM_CMP = 'DRZ', PRECISION = 0.005,
                 REFERENCE = 'ANALYTIQUE',
                 NUME_ORDRE = 21, VALE = 5.9106E+03))
          )

RESM=CALC_ELEM( reuse=RESM,
                      MODELE=MO,
                      CHAM_MATER=CHMAT2,
                       CARA_ELEM=CAREL,
                      TOUT_ORDRE='OUI',
                     OPTION=('SIGM_ELNO_TUYO',),
                      NUME_COUCHE=3,
                     NIVE_COUCHE='SUP',
                       ANGLE=90,
                      RESULTAT=RESM
                   )

IMPR_RESU(  MODELE=MO,
                 RESU=_F( GROUP_NO = ('A', 'B',),
                       RESULTAT = RESM, NUME_ORDRE = 1,
                       NOM_CHAM = 'SIGM_ELNO_TUYO')
            )


RESM=CALC_ELEM( reuse=RESM,
                      MODELE=MO,
                      CHAM_MATER=CHMAT2,
                       CARA_ELEM=CAREL,
                      TOUT_ORDRE='OUI',
                     OPTION=('SIGM_ELNO_TUYO',),
                      NUME_COUCHE=1,
                     NIVE_COUCHE='INF',
                       ANGLE=90,
                      RESULTAT=RESM
                   )

IMPR_RESU(  MODELE=MO,
                 RESU=_F( GROUP_NO = ('A', 'B',),
                       RESULTAT = RESM, NUME_ORDRE = 1,
                       NOM_CHAM = 'SIGM_ELNO_TUYO')
            )

#
# POUR VALIDER L'IMPRESSION DES VARIABLES INTERNES:
#

IMPR_RESU(   RESU=_F(  RESULTAT = REST,
                      INST = 1.10000E+00,
                      MAILLE = 'M1',
                      NOM_CHAM = 'VARI_ELNO_ELGA') )

FIN( )
