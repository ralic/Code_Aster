# MODIF  DATE 17/01/2012   AUTEUR SELLENET N.SELLENET 
# RESPONSABLE GNICOLAS G.NICOLAS
# TITRE validation du calcul de sensibilite au chargement en MECA_STATIQUE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
DEBUT(CODE=_F(NOM='SENSM03A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='NON'))
#
#          J                               OPPOSE
#           *-------------------------------*
#           !               !               !
#           !               !               !
#           !               !               !
#           !               * CENTRE        !
#           !               !               !
#           !               !               !
#           !               !               !
#           *-------------------------------*
#       ORIGINE                              I
#
#              1   < X < 11
#             -1.5 < Y <  1.5
#
# Chargement par une force nodale au noeud OPPOSE
# La solution de reference de sensibilite parvient
# d'un calcul par differences finies.
#
# 1. Definition des parametres sensibles
#
PSX=DEFI_PARA_SENSI(VALE=10.,);
PSY=DEFI_PARA_SENSI(VALE=3.,);

#
# 2. Prealable
#
MAILLAGE=LIRE_MAILLAGE(FORMAT='MED',);
#
# 2.1. Mise en place des materiaux
#
MAT=DEFI_MATERIAU( ELAS=_F(E=2.0E+5, NU=0.3, RHO=8.E-6, ALPHA=1.E-5),);
MATEMAIL=AFFE_MATERIAU(MAILLAGE=MAILLAGE,
                       AFFE=_F(TOUT='OUI',MATER=MAT,),);

#
# 2.2. Modele
#
MODEMECA=AFFE_MODELE(MAILLAGE=MAILLAGE,
                     AFFE=_F(TOUT='OUI',
                             PHENOMENE='MECANIQUE',
                             MODELISATION='C_PLAN',),);
#
# 2.3. Chargements
#
CH_0=AFFE_CHAR_MECA(MODELE=MODEMECA,
                    DDL_IMPO=(_F(GROUP_NO='ORIGINE', DX=0.0,DY=0.0),
                              _F(GROUP_MA='BORD_GAU',DX=0.0)),);
#
CH_1=AFFE_CHAR_MECA_F(MODELE=MODEMECA,
                      FORCE_NODALE=(_F(GROUP_NO='OPPOSE',
                                       FX=PSX,
                                       FY=PSY,),
                                       )
                                       );
#
# 3. Calcul
#
REMS=MECA_STATIQUE(MODELE=MODEMECA,
                   CHAM_MATER=MATEMAIL,
                   EXCIT=(_F(CHARGE=CH_0,),_F(CHARGE=CH_1,),),
                   SENSIBILITE=(PSX,PSY)
                  );

REMS = CALC_ELEM( reuse = REMS, RESULTAT = REMS, OPTION =('EPSI_ELNO','SIGM_ELNO') );

REMS = CALC_NO( reuse      =  REMS         , RESULTAT   =  REMS         , OPTION     = ('REAC_NODA',),);


CALC_SENSI( reuse = REMS,RESULTAT = REMS , SENSIBILITE = (PSX,PSY),
              OPTION     = ('EPSI_ELNO','SIGM_ELNO','SIEF_ELGA','REAC_NODA',),
              );


#
# 4. Tests
#
TEST_RESU(RESU=(
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-8,
          NOM_CMP = 'DX',    VALE = 8.1094117774520E-05, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE = 3.0721034884009E-04, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'DEPL',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-4,
          NOM_CMP = 'DX',    VALE = 8.44126E-6, REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'DEPL',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-4,
          NOM_CMP = 'DY',    VALE = -3.38199E-5, REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSY),
          NOM_CHAM = 'DEPL',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-4,
          NOM_CMP = 'DX',    VALE = -1.10617E-6, REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSY),
          NOM_CHAM = 'DEPL',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-4,
          NOM_CMP = 'DY',    VALE = 2.15136E-4, REFERENCE = 'AUTRE_ASTER' ),

     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          NOM_CHAM = 'EPSI_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'EPXX',    VALE = 1.880248017E-05,
          REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'EPSI_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'EPXX',    VALE = 3.623592484E-06,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSY),
          NOM_CHAM = 'EPSI_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'EPXX',    VALE = -5.811148227E-06,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          NOM_CHAM = 'EPSI_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'EPXY',    VALE = 7.718191E-06,
          REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'EPSI_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'EPXY',    VALE = -6.48942207E-07,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSY),
          NOM_CHAM = 'EPSI_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'EPXY',    VALE = 4.73587096E-06,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          NOM_CHAM = 'EPSI_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'EPYY',    VALE = -5.73388805E-06,
          REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'EPSI_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'EPYY',    VALE = -7.82666128E-07,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSY),
          NOM_CHAM = 'EPSI_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'EPYY',    VALE = 6.97591076E-07,
          REFERENCE = 'AUTRE_ASTER' ),

     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          NOM_CHAM = 'SIGM_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'SIXX',    VALE = 3.75435467E+00,
          REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'SIGM_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'SIXX',    VALE = 7.447896E-01,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSY),
          NOM_CHAM = 'SIGM_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'SIXX',    VALE = -1.2311804E+00,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          NOM_CHAM = 'SIGM_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'SIXY',    VALE = 1.18741397E+00,
          REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'SIGM_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'SIXY',    VALE = -9.983726E-02,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSY),
          NOM_CHAM = 'SIGM_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'SIXY',    VALE = 7.28595532E-01,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          NOM_CHAM = 'SIGM_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'SIYY',    VALE = -2.0471209E-02,
          REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'SIGM_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'SIYY',    VALE = 6.69036522E-02,
          REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSY),
          NOM_CHAM = 'SIGM_ELNO',   GROUP_NO = 'CENTRE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,MAILLE ='MA74',
          NOM_CMP = 'SIYY',    VALE = -2.2983591E-01,
          REFERENCE = 'AUTRE_ASTER' ),

     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'REAC_NODA',   GROUP_NO = 'ORIGINE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,
          NOM_CMP = 'DX',    VALE = 2.451455E-01, REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSX),
          NOM_CHAM = 'REAC_NODA',   GROUP_NO = 'ORIGINE',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE = 0., REFERENCE = 'AUTRE_ASTER' ),
     _F(  RESULTAT = REMS,   NUME_ORDRE = 1,
          SENSIBILITE=(PSY),
          NOM_CHAM = 'REAC_NODA',   GROUP_NO = 'ORIGINE',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,
          NOM_CMP = 'DX',    VALE = -2.6565524, REFERENCE = 'AUTRE_ASTER' ),


        ),);
#
FIN();
