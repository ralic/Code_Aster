# MODIF  DATE 02/02/2011   AUTEUR PELLET J.PELLET 
# RESPONSABLE JMBHH01 J.M.PROIX
# TITRE PLAQUE STRATIFIEE EN FLEXION
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# SSLS111A
# PLAQUE DE STRATIFIE RECTANGULAIRE EXCENTREE
# CALCUL : 2 MONOCOUCHES EXCENTRES
# SOLUTION ANALYTIQUE DE PLAQUE SANS CT
# MODELISATION DKT
# ------------------------------------------------
#
#                 MAILLES QUAD4
#----------------------------------------------------------------------
#POINTS:  A4                          A3
#           -------------------------
#           -                       -
#           -                       -
#           -                       -
#           -                       -
#           -------------------------
#         A1                          A2
#
# ______________________________________________________________________

DEBUT(CODE=_F(NOM='SSLS111A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

h = 0.8;     # epaisseur
hs2 = h/2
hs4 = h/4    # excentrement sup
hs4m = -hs4  # excentrement inf
E = 200000000000.0;
Nu=0.0
G = E/2/(1.0+Nu)

# chargement
frep = -1000.0;

# solution analytique
L=10.0
b=5.0
I=b*h*h*h/12.0
u_l = frep*b*L*L*L/3/E/I
T=frep
M=-T*L

# Materiau

# MATA=DEFI_MATERIAU(ELAS_ORTH=_F(E_L=E,
#                                 E_T=E,
#                                 NU_LT=0.0,
#                                 G_LT=G,
#                                 RHO=1000.0,),);

MATISO=DEFI_MATERIAU(ELAS=_F(E=E,
                             NU=0.0,
                             RHO=1000.0,),);

# ______________________________________________________________________
#
#                         2 PLAQUES EXCENTREES
# ______________________________________________________________________

#PRE_GIBI();

MA0=LIRE_MAILLAGE(VERI_MAIL=_F(VERIF='OUI',),);


# creation de plaq2 : meme noeuds que plaq1 mais mailles distinctes

MA1=CREA_MAILLAGE(MAILLAGE=MA0,
                  CREA_GROUP_MA=_F(NOM = 'PLAQ2',
                                   PREF_MAILLE = 'B',
                                   GROUP_MA = 'PLAQ1',)
                 )

MA1=DEFI_GROUP(reuse =MA1,
               MAILLAGE=MA1,
               CREA_GROUP_NO=(_F(GROUP_MA='PLAQ1',
                                 NOM='PLAQ1',),
                              _F(GROUP_MA='PLAQ2',
                                 NOM='PLAQ2',),),);

MO2=AFFE_MODELE(MAILLAGE=MA1,
                AFFE=_F(GROUP_MA=('PLAQ1','PLAQ2','L12',),
                        PHENOMENE='MECANIQUE',
                        MODELISATION='DST',),);

EP2=AFFE_CARA_ELEM(MODELE=MO2,
                   COQUE=(_F(GROUP_MA=('PLAQ1','L12'),
                             EPAIS=hs2,
                             ANGL_REP=(0.0,0.0,),
                             EXCENTREMENT=hs4,
                             INER_ROTA='OUI',),
                          _F(GROUP_MA='PLAQ2',
                             EPAIS=hs2,
                             ANGL_REP=(0.0,0.0,),
                             EXCENTREMENT=hs4m,
                             INER_ROTA='OUI',),),);

CHMAT2=AFFE_MATERIAU(MAILLAGE=MA1,
                     AFFE=(_F(GROUP_MA='PLAQ1',
                              MATER=MATISO,),
                           _F(GROUP_MA='PLAQ2',
                              MATER=MATISO,),),);

# egalite des deplacements car ils sont calcules sur le plan mail

CL2=AFFE_CHAR_MECA(MODELE=MO2,
                     DDL_IMPO=(_F(GROUP_MA='L14',
                                  DX=0.0,
                                  DY=0.0,
                                  DZ=0.0,
                                  DRX=0.0,
                                  DRY=0.0,
                                  DRZ=0.0,),),
                                     );

CHME2A=AFFE_CHAR_MECA(MODELE=MO2,
                      FORCE_ARETE=_F(GROUP_MA='L12',
                                      FZ=frep),);

MACRO_MATR_ASSE(MODELE=MO2,
                CHAM_MATER=CHMAT2,
                CARA_ELEM=EP2,
                CHARGE=CL2,
                NUME_DDL=CO('NU2'),
                MATR_ASSE=(_F(MATRICE=CO('MATASS2'),
                              OPTION='RIGI_MECA',),
                           _F(MATRICE=CO('MATASM2'),
                              OPTION='MASS_MECA',),),);

MODE2=MODE_ITER_SIMULT(MATR_A=MATASS2,
                       MATR_B=MATASM2,
                       CALC_FREQ=_F(OPTION='PLUS_PETITE',
                                    NMAX_FREQ=4,),);

RESU2A=MECA_STATIQUE(MODELE=MO2,
                CHAM_MATER=CHMAT2,
                CARA_ELEM=EP2,
               EXCIT=(
                      _F(CHARGE=CL2),
                      _F(CHARGE=CHME2A),
                      ),
                      )

RESU2A=CALC_ELEM(reuse=RESU2A,
                RESULTAT=RESU2A,
                OPTION='EFGE_ELNO',
                      )

IMPR_RESU(RESU=_F(RESULTAT=RESU2A,))


RESU2A=CALC_NO(reuse=RESU2A,
                RESULTAT=RESU2A,
                OPTION='EFGE_NOEU',
                      )


# Test

TEST_RESU(RESU=_F(RESULTAT=RESU2A,NOM_CHAM='DEPL',NUME_ORDRE=1,
                     GROUP_NO='A3',PRECISION=0.005,
                     VALE=u_l,NOM_CMP='DZ',
                     REFERENCE='ANALYTIQUE',),);

TEST_RESU(RESU=_F(RESULTAT=RESU2A,NOM_CHAM='SIEF_ELGA',NUME_ORDRE=1,
                     MAILLE='M1',POINT=1,SOUS_POINT=1,PRECISION=0.005,
                     VALE=0.,NOM_CMP='SIXX',CRITERE='ABSOLU',
                     REFERENCE='ANALYTIQUE',),);

TEST_RESU(RESU=_F(RESULTAT=RESU2A,NOM_CHAM='SIEF_ELGA',NUME_ORDRE=1,
                     MAILLE='M1',POINT=1,SOUS_POINT=2,PRECISION=0.005,
                     VALE=-1087.9,NOM_CMP='SIXX',
                     REFERENCE='ANALYTIQUE',),);

TEST_RESU(RESU=_F(RESULTAT=RESU2A,NOM_CHAM='EFGE_NOEU',NUME_ORDRE=1,
                     GROUP_NO='A1',
                     VALE=-500.0,NOM_CMP='QX',
                     REFERENCE='ANALYTIQUE',),);

TEST_RESU(RESU=_F(RESULTAT=RESU2A,NOM_CHAM='EFGE_NOEU',NUME_ORDRE=1,
                     GROUP_NO='A1',
                     VALE=5000.0,NOM_CMP='MXX',
                     REFERENCE='ANALYTIQUE',),);

TEST_RESU(RESU=(_F(RESULTAT=MODE2,
                   NUME_ORDRE=1,
                   PARA='FREQ',
                   VALE=1.82E+01,
                   CRITERE='RELATIF',
                   REFERENCE='NON_REGRESSION',
                   VERSION='7.3.19',),
                _F(RESULTAT=MODE2,
                   NUME_ORDRE=2,
                   PARA='FREQ',
                   VALE=8.46E+01,
                   CRITERE='RELATIF',
                   REFERENCE='NON_REGRESSION',
                   VERSION='7.3.19',),
                _F(RESULTAT=MODE2,
                   NUME_ORDRE=3,
                   PARA='FREQ',
                   VALE=1.0121E+02,
                   CRITERE='RELATIF',
                   REFERENCE='NON_REGRESSION',
                   VERSION='7.3.19',),
                _F(RESULTAT=MODE2,
                   NUME_ORDRE=4,
                   PARA='FREQ',
                   VALE=1.1128E+02,
                   CRITERE='RELATIF',
                   REFERENCE='NON_REGRESSION',
                   VERSION='7.3.19',),),);


# Sensibilite des resultats le long des aretes

# IMPR_RESU(RESU=_F(RESULTAT=RESU2A,GROUP_MA='L12',))
# IMPR_RESU(RESU=_F(RESULTAT=RESU2A,GROUP_MA='L14',))

FIN();
