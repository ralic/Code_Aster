# MODIF  DATE 17/07/2007   AUTEUR PELLET J.PELLET 
# TITRE  TEST DES ELEMENTS DE LA MODELISATION 3D_FAISCEAU
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#        RESEAU PERIODIQUE DE POUTRES BAIGNE PAR UN FLUIDE
#              INCOMPRESSIBLE INITIALEMENT AU REPOS.
#--------------------------------------------------------------------
#                 B :   ETUDE DU CAS AVEC FLUIDE
#--------------------------------------------------------------------

DEBUT(CODE=_F(NOM='SDLV111B', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

MA=LIRE_MAILLAGE( )

MA=DEFI_GROUP( reuse=MA,   MAILLAGE=MA,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

MA=DEFI_GROUP( reuse=MA,
                 MAILLAGE=MA,CREA_GROUP_NO=(
           _F( GROUP_MA = 'SB'),
           _F( GROUP_MA = 'SH'))
                   )

MO=AFFE_MODELE(
            MAILLAGE=MA,
               AFFE=_F(  GROUP_MA = 'V',
                      PHENOMENE = 'MECANIQUE',
                      MODELISATION = '3D_FAISCEAU')
                    )

MTB=DEFI_MATERIAU(
                ELAS=_F(      E = 1.0E+9,
                           NU = 0.3,
                           RHO = 7641.),
              FLUIDE=_F(      RHO = 1000.)
                      )

AMB=AFFE_MATERIAU(
             MAILLAGE=MA,
                AFFE=_F(  TOUT = 'OUI',
                       MATER = MTB)
                      )

AC=AFFE_CARA_ELEM(
                  MODELE=MO,
                  POUTRE=_F(
       GROUP_MA = 'TOUT',

                           SECTION = 'RECTANGLE',
                           CARA = ('H',),
                           VALE = ( 0.15, )),
             ORIENTATION=_F(  GROUP_MA = 'TOUT',
                           CARA = 'ANGL_NAUT',
                           VALE = (0., -90., 0.,)),
             POUTRE_FLUI=_F(
       GROUP_MA = 'TOUT',

                           B_T = 0.79,
                           B_N = 0.79,
                           A_FLUI = 2.16,
                           A_CELL = 4.41,
                           COEF_ECHELLE = 10.)
                       )

CHB=AFFE_CHAR_MECA(
                  MODELE=MO,DDL_IMPO=(
               _F(  GROUP_NO = 'SB',
                          DX = 0.,  DY = 0.,  DZ = 0.,
                          DRX = 0., DRY = 0., DRZ = 0.),
               _F(  GROUP_NO = 'SH',
                                    DZ = 0.,
                          DRX = 0., DRY = 0., DRZ = 0.),
               _F(  NOEUD = 'N1',
                          PHI = 0.)),LIAISON_UNIF=(
           _F(  GROUP_NO = 'SH',
                          DDL = 'DX'),
           _F(  GROUP_NO = 'SH',
                          DDL = 'DY'))
                       )

MRB=CALC_MATR_ELEM(
                MODELE=MO,
                OPTION='RIGI_MECA',
            CHAM_MATER=AMB,
                CHARGE=CHB,
             CARA_ELEM=AC
                       )

MMB=CALC_MATR_ELEM(
                MODELE=MO,
                OPTION='MASS_MECA',
            CHAM_MATER=AMB,
                CHARGE=CHB,
             CARA_ELEM=AC
                       )

NUMB=NUME_DDL(
            MATR_RIGI=MRB
                 )

MASRB=ASSE_MATRICE(  MATR_ELEM=MRB,    NUME_DDL=NUMB  )

MASMB=ASSE_MATRICE(  MATR_ELEM=MMB,    NUME_DDL=NUMB  )

RESB=MODE_ITER_SIMULT(
                MATR_A=MASRB,
                MATR_B=MASMB,
             OPTION='SANS',
             CALC_FREQ=_F(  OPTION = 'BANDE',
                         FREQ = ( 0.5,  3.8, ),
                         SEUIL_FREQ = 0.)
                         )

TEST_RESU(RESU=(
   _F(   RESULTAT = RESB,       PARA = 'FREQ',
           CRITERE = 'RELATIF',  PRECISION = 5.E-3,
           NUME_MODE = 1,          VALE = 0.06908E+1),
   _F(   RESULTAT = RESB,       PARA = 'FREQ',
           CRITERE = 'RELATIF',  PRECISION = 5.E-3,
           NUME_MODE = 2,          VALE = 0.06908E+1),
   _F(   RESULTAT = RESB,       PARA = 'FREQ',
           CRITERE = 'RELATIF',  PRECISION = 5.E-3,
           NUME_MODE = 19,          VALE = 0.37871E+1),
   _F(   RESULTAT = RESB,       PARA = 'FREQ',
           CRITERE = 'RELATIF',  PRECISION = 5.E-3,
           NUME_MODE = 20,          VALE = 0.37871E+1))
           )

FIN()
#
#
