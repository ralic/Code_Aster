
# MODIF  DATE 13/03/2007   AUTEUR MARKOVIC D.MARKOVIC 
# RESPONSABLE KOECHLIN P.KOECHLIN
#  DATE   : 27/10/03
#  AUTEUR : F. LEBOUVIER (DeltaCAD)
#  TITRE  : FLEXION D'UNE DALLE EN BETON ARME (MODELE GLRC) APPUYEE SUR 2 COTES:
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2003  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#           REGIME DE POUTRE PLASTIQUE
#
#  DETAILS : MODELISATION DKTG
#            Mailles TRIA3

DEBUT(CODE=_F(NOM='SSNS104A',NIV_PUB_WEB='INTERNET',),);
EP = 0.12
EB = 9.6500e+09
NUB = 0.0


PRE_GIBI();

MAIL=LIRE_MAILLAGE();

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=(_F(GROUP_MA='LCONTY',),
                               _F(GROUP_MA='LCONTX',),
                               _F(GROUP_MA='LSYMX' ,),
                               _F(GROUP_MA='LSYMY' ,),
                             ),);

MOD=AFFE_MODELE(MAILLAGE=MAIL,
                AFFE=_F(TOUT='OUI',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='DKTG',),);

MAIL=MODI_MAILLAGE(reuse=MAIL,
                   MAILLAGE=MAIL,
                   ORIE_NORM_COQUE=_F(GROUP_MA='DALLE',
                                      VECT_NORM=(0.,0.,1.),
                                      GROUP_NO='A1',),
                   );

MOMLIM_1=DEFI_FONCTION(NOM_PARA='NORM',
                     VALE=(0.0, 32500.,1.0, 32500.),
                     PROL_DROITE='LINEAIRE',
                     PROL_GAUCHE='LINEAIRE',
                     );
MOMLIM_2=DEFI_FONCTION(NOM_PARA='NORM',
                     VALE=(0.0, -32500.,1.0, -32500.),
                     PROL_DROITE='LINEAIRE',
                     PROL_GAUCHE='LINEAIRE',
                     );
CPRAG=DEFI_FONCTION(NOM_PARA='NORM',
                     VALE=(0.0, 73700.,1.0, 73700.),
                     PROL_DROITE='LINEAIRE',
                     PROL_GAUCHE='LINEAIRE',
                     );
                     
MLM1  = 32500
CPRG  = 73700
GAM  = 0.

MF     = 1.0E16 
QP     = 0.15E0 

aq  = 1.0E-10/MLM1/MLM1 
                  
                  
fquad  = FORMULE (
                  NOM_PARA = 'X ',
                  VALE = ''' -aq*X*X + MLM1'''
                  )
                  
fquadm  = FORMULE (
                  NOM_PARA = 'X ',
                  VALE = '''  aq*X*X - MLM1'''
                  )
                  
pn1  = -100*MLM1
pn2  =  100*MLM1
lisn = DEFI_LIST_REEL (
                       DEBUT = pn1, 
                       INTERVALLE  = _F(
                                         JUSQU_A = pn2,
                                         PAS     = 0.01*(-pn1 + pn2)
                                       )
                        
                       )
                       
fonm0 = CALC_FONC_INTERP (
                          FONCTION   = fquad,
                          LIST_PARA  = lisn,
                          PROL_DROITE = 'LINEAIRE',
                          PROL_GAUCHE = 'LINEAIRE',
                          )
 
fonm0m = CALC_FONC_INTERP (
                          FONCTION   = fquadm,
                          LIST_PARA  = lisn,
                          PROL_DROITE = 'LINEAIRE',
                          PROL_GAUCHE = 'LINEAIRE',

                          )

fonm1 = CALC_FONCTION (
                         DERIVE = _F(
                                     FONCTION = fonm0 
                                     ),
                          PROL_DROITE = 'CONSTANT',
                          PROL_GAUCHE = 'CONSTANT',
                       ) 
                  
fonm1m = CALC_FONCTION (
                         DERIVE = _F(
                                     FONCTION = fonm0m 
                                     ),
                          PROL_DROITE = 'CONSTANT',
                          PROL_GAUCHE = 'CONSTANT',
                       ) 
                  
fonm2 = CALC_FONCTION (
                         DERIVE = _F(
                                     FONCTION = fonm1 
                                     ),
                          PROL_DROITE = 'CONSTANT',
                          PROL_GAUCHE = 'CONSTANT',
                       ) 
                       
fonm2m = CALC_FONCTION (
                         DERIVE = _F(
                                     FONCTION = fonm1m 
                                     ),
                          PROL_DROITE = 'CONSTANT',
                          PROL_GAUCHE = 'CONSTANT',
                       ) 



MAT=DEFI_MATERIAU(
            GLRC_DAMAGE=_F(
                                CX1  =  CPRG, 
                                CY1  =  CPRG, 
                                CXY1 =  CPRG, 
                                CX2  =  CPRG, 
                                CY2  =  CPRG, 
                                CXY2 =  CPRG, 

                                FMEX1 =  fonm0,   
                                FMEY1 =  fonm0,
                                FMEX2 =  fonm0m,
                                FMEY2 =  fonm0m,
                                DFMEX1 =  fonm1,   
                                DFMEY1 =  fonm1,
                                DFMEX2 =  fonm1m,
                                DFMEY2 =  fonm1m,
                                DDFMEX1 =  fonm2,   
                                DDFMEY1 =  fonm2,
                                DDFMEX2 =  fonm2m,
                                DDFMEY2 =  fonm2m,
                                MF1  =  MF,
                                MF2  = -MF,
                                QP1  =  QP,
                                QP2  =  QP,
                                GAMMA=  GAM,
                           ),
                           
                           ELAS = _F(
                                      E    =  EB,   
                                      NU   =  NUB,              
                                     ),


                         );

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=(_F(TOUT='OUI',MATER=MAT,),),
                    );

CARA_ELE=AFFE_CARA_ELEM(MODELE=MOD,
                        COQUE=_F(GROUP_MA='MESH',
                                 EPAIS=EP,
                                 ANGL_REP=(0.0,0.0,),),);

COND_LIM=AFFE_CHAR_MECA(MODELE=MOD,
                        DDL_IMPO=(_F(GROUP_NO='LCONTY',
                                     DZ=0.0,),
                                  _F(GROUP_NO='LSYMX',
                                     DY=0,
                                     DRX=0,),
                                  _F(GROUP_NO='LSYMY',
                                     DX=0,
                                     DRY=0.0,),),);

PRES=AFFE_CHAR_MECA(MODELE=MOD,
                    FORCE_COQUE=_F(GROUP_MA='DALLE',
                                   PRES=-100000.0,),);

CH_FO=DEFI_FONCTION(NOM_PARA='INST',
                     VALE=(0.0, 0.0,1.0, 1.0),
                     PROL_DROITE='LINEAIRE',
                     PROL_GAUCHE='LINEAIRE',
                    );
NN = 10
INST=DEFI_LIST_REEL(DEBUT=0.0,INTERVALLE=(
                          _F(JUSQU_A = .8,NOMBRE = 1),
                          _F(JUSQU_A = 1.,NOMBRE = NN),
                      ),);
  
RESU=STAT_NON_LINE( MODELE=MOD,
                      CHAM_MATER= CHMAT,
                      CARA_ELEM = CARA_ELE,
                      COMP_INCR=_F(
                                   RELATION = 'GLRC_DAMAGE',
                                   ),
                      CONVERGENCE=_F(ITER_GLOB_MAXI=250,),
                      NEWTON=_F(
                               REAC_ITER=1, 
                               PAS_MINI_ELAS=0.0,
                               MATRICE='TANGENTE',
                               REAC_INCR=1),
                      INCREMENT=_F( LIST_INST = INST,
                                    PRECISION =1.E-1),
                      EXCIT=(   _F( CHARGE = COND_LIM,),
                                _F( CHARGE = PRES,
                                    FONC_MULT = CH_FO,), 
                     ),);

RESU=CALC_ELEM(reuse=RESU,
            OPTION=('SIEF_ELNO_ELGA',
                    'DEGE_ELNO_DEPL',
                    'VARI_ELNO_ELGA'),
                     RESULTAT=RESU,
              );

NORD = NN + 1  
TEST_RESU(RESU=(             
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'DEPL',   
               CRITERE = 'RELATIF',    
               PRECISION = 0.001,
               GROUP_NO = 'A1',    
               NOM_CMP = 'DZ',      
               VALE = 3.125E-02, 
               REFERENCE = 'NON_REGRESSION'),
             ),);

#
# TEST DE EFFORT NORMAL AU CENTRE DE LA DALLE
#

TEST_RESU(RESU=(             
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'SIEF_ELNO_ELGA',   
               CRITERE = 'ABSOLU',    
               PRECISION = 0.0006,
               GROUP_NO = 'A1',
               MAILLE='M266',    
               NOM_CMP = 'NXX',      
               VALE = 0., 
               REFERENCE = 'ANALYTIQUE',),
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'SIEF_ELNO_ELGA',   
               CRITERE = 'ABSOLU',    
               PRECISION = 0.0006,
               GROUP_NO = 'A1',
               MAILLE='M266',    
               NOM_CMP = 'NYY',      
               VALE = 0., 
               REFERENCE = 'ANALYTIQUE',),
             ),
          );
#
# TEST DU MOMENT FLECHISSANT AU CENTRE DE LA DALLE
#
TEST_RESU(RESU=(             
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'SIEF_ELNO_ELGA',   
               CRITERE = 'RELATIF',    
               PRECISION = 0.003,
               GROUP_NO = 'A1',
               MAILLE='M266',    
               NOM_CMP = 'MXX',      
               VALE = 40500., 
               REFERENCE = 'ANALYTIQUE'),
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'SIEF_ELNO_ELGA',   
               CRITERE = 'ABSOLU',    
               PRECISION = 100.,
               GROUP_NO = 'A1',
               MAILLE='M266',    
               NOM_CMP = 'MYY',      
               VALE = 0., 
               REFERENCE = 'ANALYTIQUE'),
             ),
          );
#
# TEST DU MOMENT DE RAPPEL AU CENTRE DE LA DALLE
#  V1 = Mxx - mx
#  V2 = Myy - my
#
TEST_RESU(RESU=(             
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'VARI_ELNO_ELGA',   
               CRITERE = 'RELATIF',    
               PRECISION = 0.00001,
               GROUP_NO = 'A1',
               MAILLE='M266',    
#               NOM_CMP = 'V1',      
               NOM_CMP = 'V17',      
               VALE = 32500., 
               REFERENCE = 'ANALYTIQUE'),
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'VARI_ELNO_ELGA',   
               CRITERE = 'ABSOLU',    
               PRECISION = 100,
               GROUP_NO = 'A1',
               MAILLE='M266',    
#               NOM_CMP = 'V2',      
               NOM_CMP = 'V18',      
               VALE = 0., 
               REFERENCE = 'ANALYTIQUE'),
             ),
         );
#
# TEST DE LA COURBURE PLASTIQUE AU CENTRE DE LA DALLE
#
TEST_RESU(RESU=(             
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'VARI_ELNO_ELGA',   
               CRITERE = 'RELATIF',    
               PRECISION = 0.015,
               GROUP_NO = 'A1',
               MAILLE='M266',    
               NOM_CMP = 'V4',      
               VALE = 0.1085, 
               REFERENCE = 'ANALYTIQUE'),
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'VARI_ELNO_ELGA',   
               CRITERE = 'ABSOLU',    
               PRECISION = 6.E-5,
               GROUP_NO = 'A1',
               MAILLE='M266',    
               NOM_CMP = 'V5',      
               VALE = 0., 
               REFERENCE = 'ANALYTIQUE'),
             ),
           );
#
# TEST DE LA COURBURE AU CENTRE DE LA DALLE
#
TEST_RESU(RESU=(             
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'DEGE_ELNO_DEPL',   
               CRITERE = 'RELATIF',    
               PRECISION = 0.015,
               GROUP_NO = 'A1',
               MAILLE='M266',    
               NOM_CMP = 'KXX',      
               VALE = 0.1376, 
               REFERENCE = 'ANALYTIQUE'),
           _F( RESULTAT = RESU,
               NUME_ORDRE = NORD,  
               NOM_CHAM = 'DEGE_ELNO_DEPL',   
               CRITERE = 'ABSOLU',    
               PRECISION = 9.E-5,
               GROUP_NO = 'A1',
               MAILLE='M266',    
               NOM_CMP = 'KYY',      
               VALE = 0., 
               REFERENCE = 'ANALYTIQUE'),
            ),
          );

FIN();
