# ======================================================================
# COPYRIGHT (C) 1991 - 2016  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F(NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

#-----------------------------------------------------------------------
# VALIDATION DU MODELE GRILLE_ISOT_LINE EN PLASTICITE
# PAS D ARMATURE Y
#-----------------------------------------------------------------------

MAILTOT=LIRE_MAILLAGE(   )

#
# -----------------------------------------------------
# DEFINITION DES MATERIAUX
# -----------------------------------------------------
#

ACIER=DEFI_MATERIAU(
            ELAS=_F(  E = 2.E11,   NU = 0.0, ALPHA = 1.E-5,   ),
            ECRO_LINE=_F( D_SIGM_EPSI = 2.E10,      SY = 2.E08, )
                          )

#
# -------------------------------------------------
# AFFECTATION DES MODELES
# -------------------------------------------------
#
LEMOD=AFFE_MODELE(    MAILLAGE=MAILTOT,     
                        AFFE=_F(  GROUP_MA = 'GEOB',
                               PHENOMENE = 'MECANIQUE',
                               MODELISATION = 'GRILLE_EXCENTRE',
                             )
                      )

# -------------------------------------------------
# AFFECTATION DES CARACTERISTIQUES
# -------------------------------------------------
#
LACAR=AFFE_CARA_ELEM(    MODELE=LEMOD,
                       GRILLE=_F( GROUP_MA = 'GEOB',
                                SECTION = .01,
                                ANGL_REP = (0.0, 0.0,),
                                EXCENTREMENT = 0.0,
                              )
                        )

# -------------------------------------------------
# CONSTRUCTION DU CHAMP DE TEMPERATURE POUR
# TENTER DE REPRODUIRE LA PRECONTRAINTE
# ------------------------------------------------
#
T0=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (50., ),
                               )
                      )

T1=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (-50., ),
                               )
                      )

T2=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (-250.,),
                               )
                      )

T3=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (-150., ),
                               )
                      )

T4=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (-250., ),
                               )
                      )

T5=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (-50., ),
                               )
                      )

T6=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (350., ),
                               )
                      )

T7=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (50.,),
                               )
                      )

T8=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (-450., ),
                               )
                      )

T9=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (-110.,),
                               )
                      )

T10=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (550., ),
                               )
                      )

T11=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAILTOT,
                          AFFE=_F(
                           TOUT = 'OUI',
                           NOM_CMP = ('TEMP', ),
                           VALE = (50.,),
                               )
                      )

LATEMP=CREA_RESU(
             OPERATION='AFFE', TYPE_RESU='EVOL_THER',
              NOM_CHAM='TEMP',AFFE=(
           _F( CHAM_GD = T0,  INST = 0.,),
           _F( CHAM_GD = T1,  INST = 1.,),
           _F( CHAM_GD = T2,  INST = 2.,),
           _F( CHAM_GD = T3,  INST = 3.,),
           _F( CHAM_GD = T4,  INST = 4.,),
           _F( CHAM_GD = T5,  INST = 5.,),
           _F( CHAM_GD = T6,  INST = 6.,),
           _F( CHAM_GD = T7,  INST = 7.,),
           _F( CHAM_GD = T8,  INST = 8.,),
           _F( CHAM_GD = T9,  INST = 9.,),
           _F( CHAM_GD = T10,  INST = 10.,),
           _F( CHAM_GD = T11,  INST = 11.,))
                 )

#
# -------------------------------------------------
# AFFECTATION DES MATERIAUX
# -------------------------------------------------
#
MATAF=AFFE_MATERIAU(    MAILLAGE=MAILTOT,
                          AFFE=_F(  GROUP_MA = 'GEOB',
                                 MATER = ACIER,

                               ),
                          AFFE_VARC=  _F(TOUT='OUI',EVOL=LATEMP,NOM_VARC='TEMP',
                                     NOM_CHAM='TEMP',VALE_REF=50.0), )

# ----------------------------------------------
# CHARGEMENT
# ----------------------------------------------
#
ZCHM=AFFE_CHAR_MECA(
             MODELE=LEMOD,
            DDL_IMPO=_F(  TOUT = 'OUI',
                       DX = 0.,   DY = 0.,   DZ = 0.,
                       DRX = 0.,   DRY = 0.,   DRZ = 0.,  )
                       )

#
# ----------------------------------------------
# CALCUL
# ----------------------------------------------
#


ZLIST=DEFI_LIST_REEL(   DEBUT=0.,
             INTERVALLE=_F( JUSQU_A = 11.0,  NOMBRE = 11, )
           )

LEDEP=STAT_NON_LINE(
                MODELE=LEMOD,
                CHAM_MATER=MATAF,
                CARA_ELEM=LACAR,
                EXCIT=_F(       CHARGE = ZCHM,  ),
                COMPORTEMENT=_F(   RELATION = 'GRILLE_ISOT_LINE', ),
                INCREMENT=_F(   LIST_INST = ZLIST,
                                NUME_INST_FIN = 11,
                ),
                NEWTON=_F(      MATRICE = 'TANGENTE',
                                REAC_ITER = 10,  ),
                CONVERGENCE=_F( RESI_GLOB_MAXI = 1.E-3,
                                ITER_GLOB_MAXI = 30,
                ),
                RECH_LINEAIRE=_F(  ITER_LINE_MAXI = 10,  )
              )

LEDEP=CALC_CHAMP(reuse=LEDEP,CONTRAINTE=('SIGM_ELNO'),VARI_INTERNE=('VARI_ELNO'),RESULTAT=LEDEP)


#
# -------------------------------------------------
# POST TRAITEMENT DES RESULTATS
# -------------------------------------------------
#
TEST_RESU(RESU=(_F(INST=1.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=2.0E+08,
                   VALE_REFE=2.E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=2.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=2.4E+08,
                   VALE_REFE=2.40000000E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=3.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=4.0E+07,
                   VALE_REFE=4.E7,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=4.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=2.4E+08,
                   VALE_REFE=2.40000000E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=5.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=-1.6E+08,
                   VALE_REFE=-1.60000000E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=6.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=-3.12E+08,
                   VALE_REFE=-3.12000000E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=7.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=2.88E+08,
                   VALE_REFE=2.88000000E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=8.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=4.096E+08,
                   VALE_REFE=4.09600000E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=9.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=-2.704E+08,
                   VALE_REFE=-2.70400000E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=10.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=-5.2768E+08,
                   VALE_REFE=-5.27680000E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                _F(INST=11.0,
                   RESULTAT=LEDEP,
                   NOM_CHAM='SIGM_ELNO',
                   NOEUD='NO1',
                   NOM_CMP='SIXX',
                   VALE_CALC=4.7232E+08,
                   VALE_REFE=4.72320000E8,
                   REFERENCE = 'ANALYTIQUE',
                   PRECISION=1.E-3,
                   MAILLE='MA1',),
                ),
          )

FIN()
#
#
