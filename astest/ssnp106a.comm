# MODIF  DATE 22/10/2007   AUTEUR PELLET J.PELLET 
# TITRE EPROUVETTE EN BETON EN TRACTION COMPRESSION
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
DEBUT(CODE=_F(NOM='SSNP106A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

#......................................................................
# EPROUVETTE DE BETON EN TRACTION COMPRESSION
# FISSURATION  NADAI_B  (CONTRAINTES PLANES)
# COMPORTEMENT ELASTO-PLASTIQUE PRE-PIC + FISSURATION
#......................................................................


M=LIRE_MAILLAGE( )

MO=AFFE_MODELE(
            MAILLAGE=M,    VERIF='MAILLE',
           AFFE=_F( TOUT = 'OUI',PHENOMENE = 'MECANIQUE',MODELISATION = 'C_PLAN')
           )

EPRO=DEFI_MATERIAU(
                ELAS=_F( E = 30000., NU = 0.2),

                NADAI_B=_F(
                F_C = 30.,
                F_T = 3.,
                CRIT_E_C = 0.,
                EPSP_R_C = 4.E-3,
                EPSP_P_C = 1.E-3,
                EPSI_R_T = 4.E-4,
                FAC_T_C = 0.4)
           )

CM=AFFE_MATERIAU(
            MAILLAGE=M,
           AFFE=_F( TOUT = 'OUI',MATER = EPRO)
           )

LIAISON=AFFE_CHAR_MECA(
            MODELE=MO,DDL_IMPO=(
           _F( NOEUD = 'NO1',  DX = 0.,  DY = 0.),
           _F( NOEUD = 'NO2',  DY = 0.),
           _F( NOEUD = 'NO4',  DX = 0.))


           )

CH_FO=AFFE_CHAR_MECA(
            MODELE=MO,DDL_IMPO=(
           _F( NOEUD = 'NO3',  DX = 2.E-2),
           _F( NOEUD = 'NO2',  DX = 2.E-2),
           _F( NOEUD = 'NO3',  DY = -2.E-2),
           _F( NOEUD = 'NO4',  DY = -2.E-2))

           )

L_INST=DEFI_LIST_REEL(   DEBUT=0.,INTERVALLE=(
             _F( JUSQU_A = 0.05, NOMBRE = 4),
                        _F( JUSQU_A = 1.,    NOMBRE = 2))

           )

COEF_TR=DEFI_FONCTION(      NOM_PARA='INST',
                                  VALE=(
                                           0.,   0.,
                                           1.,   0.2,  )
                         )

# STAT_NON_LINE 'NADAI_B'
#-------------------------------



U=STAT_NON_LINE(
                            MODELE=MO,
                        CHAM_MATER=CM,EXCIT=(
                             _F(
                CHARGE = CH_FO,
                FONC_MULT = COEF_TR), _F(
                CHARGE = LIAISON)),
                         COMP_INCR=_F(
                RELATION = 'NADAI_B',
                ITER_INTE_MAXI = 30,
                RESI_INTE_RELA = 1.E-6),
                         INCREMENT=_F(
                LIST_INST = L_INST),
                            NEWTON=_F(
                MATRICE = 'TANGENTE',
                REAC_ITER = 10),
                       CONVERGENCE=_F(
                RESI_GLOB_MAXI = 1.E-6,
                ITER_GLOB_MAXI = 30),
                     RECH_LINEAIRE=_F(
                ITER_LINE_MAXI = 10)
              )

U=CALC_ELEM( reuse=U,
                            OPTION=(
                  'SIEF_ELNO_ELGA',  'VARI_ELNO_ELGA',),
                          RESULTAT=U,
              )

U=CALC_ELEM(
              reuse=U,
                  RESULTAT=U,
                   OPTION='EPSI_ELNO_DEPL'
              )

VARI=CREA_CHAMP(  OPERATION='EXTR', TYPE_CHAM='ELNO_VARI_R',
NOM_CHAM='VARI_ELNO_ELGA',
              RESULTAT=U,
              INST=0.525
              )

TEST_RESU(RESU=(

                _F(
                RESULTAT = U,
                NOM_CHAM = 'SIEF_ELNO_ELGA',
                MAILLE = 'MA1',
                NOEUD = 'NO1',
                INST = 0.025,
                NOM_CMP = 'SIXX',
                VALE = 2.18181),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'SIEF_ELNO_ELGA',
                MAILLE = 'MA1',
                NOEUD = 'NO1',
                INST = 0.025,
                NOM_CMP = 'SIYY',
                VALE = -2.28771),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'SIEF_ELNO_ELGA',
                MAILLE = 'MA1',
                NOEUD = 'NO1',
                INST = 0.025,
                NOM_CMP = 'SIXY',
                VALE = 0.,
                CRITERE = 'ABSOLU'),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'EPSI_ELNO_DEPL',
                MAILLE = 'MA1',
                NOEUD = 'NO1',
                INST = 0.025,
                NOM_CMP = 'EPXX',
                VALE = 1.E-4),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'EPSI_ELNO_DEPL',
                MAILLE = 'MA1',
                NOEUD = 'NO1',
                INST = 0.025,
                NOM_CMP = 'EPYY',
                VALE = -1.E-4),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'SIEF_ELNO_ELGA',
                MAILLE = 'MA2',
                NOEUD = 'NO1',
                INST = 0.05,
                NOM_CMP = 'SIXX',
                VALE = 2.38572),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'SIEF_ELNO_ELGA',
                MAILLE = 'MA2',
                NOEUD = 'NO2',
                INST = 0.05,
                NOM_CMP = 'SIYY',
                VALE = -5.09485),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'SIEF_ELNO_ELGA',
                MAILLE = 'MA2',
                NOEUD = 'NO3',
                INST = 0.05,
                NOM_CMP = 'SIXY',
                VALE = 0.,
                CRITERE = 'ABSOLU'),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'SIEF_ELNO_ELGA',
                MAILLE = 'MA2',
                NOEUD = 'NO1',
                INST = 0.525,
                NOM_CMP = 'SIXX',
                VALE = 0.,
                CRITERE = 'ABSOLU'),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'SIEF_ELNO_ELGA',
                MAILLE = 'MA2',
                NOEUD = 'NO2',
                INST = 0.525,
                NOM_CMP = 'SIYY',
                VALE = -28.5),
                _F(
                RESULTAT = U,
                NOM_CHAM = 'SIEF_ELNO_ELGA',
                MAILLE = 'MA2',
                NOEUD = 'NO3',
                INST = 0.525,
                NOM_CMP = 'SIXY',
                VALE = 0.,
                CRITERE = 'ABSOLU')),CHAM_ELEM=(

               _F(  CHAM_GD = VARI,
                MAILLE = 'MA1',
                NOEUD = 'NO1',
                NOM_CMP = 'V1',
                VALE = 1.07667E-05),
               _F(  CHAM_GD = VARI,
                MAILLE = 'MA2',
                NOEUD = 'NO1',
                NOM_CMP = 'V3',
                VALE = 2.06143E-03),
               _F(  CHAM_GD = VARI,
                MAILLE = 'MA2',
                NOEUD = 'NO1',
                NOM_CMP = 'V4',
                VALE = -2.10000E-03),
               _F(  CHAM_GD = VARI,
                MAILLE = 'MA2',
                NOEUD = 'NO1',
                NOM_CMP = 'V5',
                VALE = 0.,
                CRITERE = 'ABSOLU'),
               _F(  CHAM_GD = VARI,
                MAILLE = 'MA2',
                NOEUD = 'NO1',
                NOM_CMP = 'V6',
                VALE = 0.,
                CRITERE = 'ABSOLU'))
              )

FIN()
#
