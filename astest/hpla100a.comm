# MODIF  DATE 07/11/2006   AUTEUR CIBHHLV L.VIVAN 
# TITRE CYLINDRE CREUX THERMOELASTIQUE PESANT EN ROTATION UNIFORME
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F( NOM = 'HPLA100A',NIV_PUB_WEB='INTERNET')
        )

#......................................................................
#
# MODELISATION 2D_AXIS:   121 NOEUDS -- 32 MAILLES QUA8
#......................................................................
#
#        INTERNE                   EXTERNE
#               D -----+----- C
# !               !    J    !
#                 !         !
# !               !         !
#                 !         !        10 MM
# !               !         !
#                 !         !
# !               !    F    !
#     19.5 MM   A -----+-----  B
# !-------------->   1.0 MM
#                 <--------->
#======================================================================


#PRE_GIBI()

MA=LIRE_MAILLAGE( )

DEFI_GROUP(reuse=MA,MAILLAGE=MA,
                   CREA_GROUP_NO=_F( TOUT_GROUP_MA = 'OUI'))

MO=AFFE_MODELE(  MAILLAGE=MA,
         AFFE=_F(  TOUT = 'OUI',PHENOMENE = 'MECANIQUE',
                           MODELISATION = 'AXIS'))

MOTHER=AFFE_MODELE(  MAILLAGE=MA,
         AFFE=_F(  TOUT = 'OUI',PHENOMENE = 'THERMIQUE',
                           MODELISATION = 'PLAN'))

MAT=DEFI_MATERIAU(ELAS=_F( E = 2.0E+5, NU = 0.3, RHO = 8.E-6, ALPHA = 1.E-5))

MATHER=DEFI_MATERIAU(THER=_F( LAMBDA = 1.0, RHO_CP = 0.0) )

CHMAT=AFFE_MATERIAU(  MAILLAGE=MA,
                        AFFE=_F(  TOUT = 'OUI', MATER = MAT, TEMP_REF = 0.))

CHMATHE=AFFE_MATERIAU(  MAILLAGE=MA,
                        AFFE=_F(  TOUT = 'OUI', MATER = MATHER))

# ------------------------------------------------------------------
CHTHE=AFFE_CHAR_THER(
            MODELE=MOTHER,TEMP_IMPO=(
        _F( GROUP_NO = ('BC',),TEMP = 0.5),
        _F( GROUP_NO = ('DA',),TEMP = -0.5))
                       )

CHTH2=AFFE_CHAR_THER(
            MODELE=MOTHER,TEMP_IMPO=(
        _F( GROUP_NO = ('BC',),TEMP = 0.1),
        _F( GROUP_NO = ('DA',),TEMP = 0.1))
                       )

TEMPLIN=THER_LINEAIRE(
                  MODELE=MOTHER,
              CHAM_MATER=CHMATHE,
                  EXCIT=_F( CHARGE = CHTHE)
                         )

TEMPLI2=THER_LINEAIRE(
                  MODELE=MOTHER,
              CHAM_MATER=CHMATHE,
                  EXCIT=_F( CHARGE = CHTH2)
                         )

# ------------------------------------------------------------------

CHPES=AFFE_CHAR_MECA(  MODELE=MO,
          PESANTEUR=( 10.00,  0., -1.,   0., ),
         PRES_REP=_F(  GROUP_MA = 'HAUT',        PRES = -8.E-4),
           DDL_IMPO=_F(  GROUP_NO = 'F',    DY = 0.) )

CHROT=AFFE_CHAR_MECA(  MODELE=MO,
           ROTATION=(  1.00,  0.,  1.,   0., ),DDL_IMPO=(
           _F(  GROUP_NO = 'BAS',    DY = 0.),
                    _F(  GROUP_NO = 'HAUT',   DY = 0.)) )

CHDIL=AFFE_CHAR_MECA(  MODELE=MO,
           TEMP_CALCULEE=TEMPLIN,
           DDL_IMPO=_F(  GROUP_NO = 'TOUT',   DY = 0.) )

CHDI2=AFFE_CHAR_MECA(  MODELE=MO,
           TEMP_CALCULEE=TEMPLI2,DDL_IMPO=(
           _F(  GROUP_NO = 'BAS',    DY = 0.),
                    _F(  GROUP_NO = 'HAUT',   DY = 0.)) )

# ------------------------------------------------------------------

DEPLPES=MECA_STATIQUE(
                  MODELE=MO,
              CHAM_MATER=CHMAT,
                   EXCIT=_F( CHARGE = CHPES),
                         )

CALC_ELEM( reuse= DEPLPES ,RESULTAT= DEPLPES ,
                   
                  OPTION=('SIGM_ELNO_DEPL', 'EPME_ELNO_DEPL',
                                            'EPSI_ELNO_DEPL',),
             REPE_COQUE=_F(NIVE_COUCHE='INF',),
                         )


DEPLROT=MECA_STATIQUE(
                  MODELE=MO,
              CHAM_MATER=CHMAT,
                   EXCIT=_F( CHARGE = CHROT),
                         )

CALC_ELEM( reuse= DEPLROT ,RESULTAT= DEPLROT ,
                   
                  OPTION=('SIGM_ELNO_DEPL', 'EPME_ELNO_DEPL',
                                            'EPSI_ELNO_DEPL',),
             REPE_COQUE=_F(NIVE_COUCHE='INF',),
                         )


DEPLDIL=MECA_STATIQUE(
                  MODELE=MO,
              CHAM_MATER=CHMAT,
                   EXCIT=_F( CHARGE = CHDIL),
                         )

CALC_ELEM( reuse= DEPLDIL ,RESULTAT= DEPLDIL ,
                   
                  OPTION=('SIGM_ELNO_DEPL', 'EPME_ELNO_DEPL',
                                            'EPSI_ELNO_DEPL',),
                   REPE_COQUE=_F(NIVE_COUCHE='INF',),
                         )


DEPLDI2=MECA_STATIQUE(
                  MODELE=MO,
              CHAM_MATER=CHMAT,
                   EXCIT=_F( CHARGE = CHDI2),
                         )

CALC_ELEM( reuse= DEPLDI2 ,RESULTAT= DEPLDI2 ,
                   
                  OPTION=('SIGM_ELNO_DEPL', 'EPME_ELNO_DEPL',
                                            'EPSI_ELNO_DEPL',),
                   REPE_COQUE=_F(NIVE_COUCHE='INF',),
                         )

#---------------------------------------------------------------------

T_POT=POST_ELEM(      
                    RESULTAT=DEPLDIL,
                      CHARGE=CHDIL,
                    ENER_POT=_F( TOUT = 'OUI',)  )

IMPR_TABLE ( TABLE=T_POT )

# VERSION=6.02.21 sans charge thermique :  7.73874E-04  (1/2U)
# VERSION=6.02.21 avec charge thermique :  5.43077E-19  (1/2U - 1/2Th)
# VERSION=6.02.22 avec charge thermique : -7.73874E-04  (1/2U - Th)

TEST_TABLE ( TABLE=T_POT,
             NOM_PARA='TOTALE',
             REFERENCE='NON_REGRESSION', VERSION='6.03.20',
             VALE= 4.7612599996081E-04  )

#---------------------------------------------------------------------

TEST_RESU(RESU=(

      # DEPLACEMENTS
             _F(  RESULTAT = DEPLPES,  CRITERE = 'RELATIF',   PRECISION = 1.E-5,
              NUME_ORDRE = 1,     NOM_CHAM = 'DEPL',
               GROUP_NO = 'D',   NOM_CMP = 'DX',     VALE = -2.34E-8),
             _F(  RESULTAT = DEPLPES,  CRITERE = 'RELATIF',   PRECISION = 1.E-5,
              NUME_ORDRE = 1,     NOM_CHAM = 'DEPL',
               GROUP_NO = 'A',   NOM_CMP = 'DY',     VALE = -1.185E-9),
             _F(  RESULTAT = DEPLPES,  CRITERE = 'RELATIF',   PRECISION = 1.E-5,
              NUME_ORDRE = 1,     NOM_CHAM = 'DEPL',
               GROUP_NO = 'D',   NOM_CMP = 'DX',     VALE = -2.34E-8),
             _F(  RESULTAT = DEPLPES,  CRITERE = 'RELATIF',   PRECISION = 1.E-5,
              NUME_ORDRE = 1,     NOM_CHAM = 'DEPL',
               GROUP_NO = 'B',   NOM_CMP = 'DY',     VALE = 1.215E-9),

             _F(  RESULTAT = DEPLROT,  CRITERE = 'RELATIF',   PRECISION = 2.E-5,
               NUME_ORDRE = 1,     NOM_CHAM = 'DEPL',
               GROUP_NO = 'A',    NOM_CMP = 'DX',     VALE = 2.94240E-7),
             _F(  RESULTAT = DEPLROT,  CRITERE = 'RELATIF',   PRECISION = 2.E-5,
               NUME_ORDRE = 1,     NOM_CHAM = 'DEPL',
               GROUP_NO = 'B',    NOM_CMP = 'DX',     VALE = 2.88010E-7),

             _F(  RESULTAT = DEPLDIL,  CRITERE = 'RELATIF',   PRECISION = 2.E-4,
               NUME_ORDRE = 1,     NOM_CHAM = 'DEPL',
               GROUP_NO = 'A',    NOM_CMP = 'DX',     VALE = 1.056145E-6),
             _F(  RESULTAT = DEPLDIL,  CRITERE = 'RELATIF',   PRECISION = 1.E-4,
               NUME_ORDRE = 1,     NOM_CHAM = 'DEPL',
               GROUP_NO = 'B',    NOM_CMP = 'DX',     VALE = 1.110317E-6),

             _F(  RESULTAT = DEPLDI2,  CRITERE = 'RELATIF',   PRECISION = 1.E-5,
               NUME_ORDRE = 1,     NOM_CHAM = 'DEPL',
               GROUP_NO = 'A',    NOM_CMP = 'DX',     VALE = 25.3500E-6),

      # CONTRAINTES EN PEAU
            _F(  RESULTAT = DEPLPES,  CRITERE = 'RELATIF',   PRECISION = 2.E-5,
            NUME_ORDRE = 1,     MAILLE = 'M13', NOM_CHAM = 'SIGM_ELNO_DEPL',
              GROUP_NO = 'D',   NOM_CMP = 'SIYY',  VALE = 8.00000E-4),

            _F(  RESULTAT = DEPLROT,  CRITERE = 'RELATIF',   PRECISION = 2.E-5,
            NUME_ORDRE = 1,     MAILLE = 'M1',  NOM_CHAM = 'SIGM_ELNO_DEPL',
              GROUP_NO = 'A',    NOM_CMP = 'SIYY',  VALE = 0.99488E-3),
            _F(  RESULTAT = DEPLROT,  CRITERE = 'RELATIF',   PRECISION = 2.E-5,
            NUME_ORDRE = 1,     MAILLE = 'M32',  NOM_CHAM = 'SIGM_ELNO_DEPL',
              GROUP_NO = 'B',    NOM_CMP = 'SIYY',  VALE = 0.92631E-3),

            _F(  RESULTAT = DEPLDIL,  CRITERE = 'RELATIF',   PRECISION = 1.E-5,
             NUME_ORDRE = 1,     MAILLE = 'M1',  NOM_CHAM = 'SIGM_ELNO_DEPL',
              GROUP_NO = 'A',    NOM_CMP = 'SIYY',  VALE = 1.4321427E+0),
            _F(  RESULTAT = DEPLDI2,  CRITERE = 'RELATIF',   PRECISION = 1.E-5,
             NUME_ORDRE = 1,     MAILLE = 'M1',  NOM_CHAM = 'SIGM_ELNO_DEPL',
              GROUP_NO = 'A',    NOM_CMP = 'SIYY',  VALE = -0.20000E+0),

      # DEFORMATIONS 'VRAIES' EN PEAU
            _F(  RESULTAT = DEPLDIL,  CRITERE = 'RELATIF',   PRECISION = 1.E-5,
             NUME_ORDRE = 1,     MAILLE = 'M1',  NOM_CHAM = 'EPME_ELNO_DEPL',
              GROUP_NO = 'A',    NOM_CMP = 'EPYY',  VALE = 5.E-6),
            _F(  RESULTAT = DEPLDI2,  CRITERE = 'RELATIF',   PRECISION = 1.E-5,
             NUME_ORDRE = 1,     MAILLE = 'M1',  NOM_CHAM = 'EPME_ELNO_DEPL',
              GROUP_NO = 'A',    NOM_CMP = 'EPYY',  VALE = -1.E-6))
            )

FIN()
#
