# MODIF  DATE 28/06/2011   AUTEUR FLEJOU J-L.FLEJOU 
# TITRE CALCUL DU TRONCON BE  DU CIG DES RENARDIERES
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#
# ssnl116b.para = tps_job 60 mem_job 200Mo ncpus 1 liste_test S
# REF : ALTHEE STROOBANT,STAGIAIRE MTC AOUT 1999

DEBUT(CODE=_F(NOM='SSNL116B',NIV_PUB_WEB='INTRANET'),DEBUG=_F(SDVERI='OUI'))

MA=LIRE_MAILLAGE(  )

MA=DEFI_GROUP( reuse=MA,  MAILLAGE=MA,CREA_GROUP_NO=(
                   _F( NOM = 'GONAA',
                                  GROUP_MA = 'GOA'),
                   _F( NOM = 'GONZZ',
                                  GROUP_MA = 'GRBAR_V'),
                   _F( NOM = 'GONXX',
                                  GROUP_MA = 'GRBAR_T'),
                   _F( NOM = 'GON',
                                  GROUP_MA = 'GRBAR_H'))
                 )

MASEC=LIRE_MAILLAGE(UNITE=21,
                    FORMAT='MED',);

GF=DEFI_GEOM_FIBRE(SECTION=_F(GROUP_FIBRE='TRAN',
                              TOUT_SECT='OUI',
                              MAILLAGE_SECT=MASEC,
                              COOR_AXE_POUTRE=(0.,0.,),),);

MO=AFFE_MODELE(    MAILLAGE=MA,
     VERIF=('MAILLE',  'NOEUD',),AFFE=(
     _F(  GROUP_MA = 'GOA',
     PHENOMENE = 'MECANIQUE',
     MODELISATION = 'POU_D_EM'),
     _F(  GROUP_MA = ('GRBAR_T','GRBAR_H','GRBAR_V',),
     PHENOMENE = 'MECANIQUE',
     MODELISATION = 'BARRE'))
     )

MATA=DEFI_MATERIAU(  ELAS=_F(  E = 7.2E10,
                     NU = 0.3,
                     ALPHA = 22.4E-6),
                     ECRO_LINE=_F(SY=75.E6,D_SIGM_EPSI = 0,),
                   )

CARAP=AFFE_CARA_ELEM(      MODELE=MO,
      POUTRE=_F( GROUP_MA = 'GOA',
     SECTION = 'CERCLE',
     CARA = ('R',  'EP',),
     VALE = (0.25765,  0.01,)),BARRE=(
      _F( GROUP_MA = 'GRBAR_T',
     SECTION = 'RECTANGLE',
     CARA = 'H',
     VALE = 1.),
             _F( GROUP_MA = 'GRBAR_H',
     SECTION = 'RECTANGLE',
     CARA = 'H',
     VALE = 1.),
               _F( GROUP_MA = 'GRBAR_V',
     SECTION = 'RECTANGLE',
     CARA = 'H',
     VALE = 1.)),
     GEOM_FIBRE=GF,
     MULTIFIBRE=_F(GROUP_MA='GOA',
                   GROUP_FIBRE='TRAN',),
          )

COMPPMF=DEFI_COMPOR(GEOM_FIBRE= GF,MATER_SECT= MATA,
                  MULTIFIBRE=(_F(GROUP_FIBRE='TRAN',MATER= MATA, RELATION = 'VMIS_ISOT_LINE'),))

INCLUDE(UNITE=91)

LITPS=DEFI_LIST_REEL( DEBUT=0.0,INTERVALLE=(
    _F( JUSQU_A = 1., NOMBRE = 10),
      _F( JUSQU_A = 2., NOMBRE = 2),
      _F( JUSQU_A = 3., NOMBRE = 30),
      _F( JUSQU_A = 4., NOMBRE = 2))
      )

# FONCTION TEMPERATURE POUR LES BARRES : DT = 50
#_______________________________________________________#

DXA=DEFI_FONCTION(   NOM_PARA='INST',
     VALE=(  0.,    0.,
     1.,   -0.004,
     2.,   -0.004,
     3.,   0.002,
     4.,   0.002,
     ),
   PROL_DROITE='LINEAIRE',
   PROL_GAUCHE='LINEAIRE'
   )

# FONCTION TEMPERATURE POUR LES POUTRES : DT = 50
#_______________________________________________________#

NUL=DEFI_FONCTION(   NOM_PARA='INST',
     VALE=(  0.,    0.,
     1.,   0.,
     2.,   0.,
     3.,    0.,
     4.,    0.,
     ),
   PROL_DROITE='LINEAIRE',
   PROL_GAUCHE='LINEAIRE'
   )

CHAMA=AFFE_CHAR_MECA_F(    MODELE=MO,DDL_IMPO=(

   _F( GROUP_NO = 'PC01', DX = NUL,  DY = NUL,  DZ = NUL,
      DRX = NUL, DRY = NUL, DRZ = NUL),
   _F( GROUP_NO = 'PC02', DX = NUL,  DY = NUL,  DZ = DXA,
      DRX = NUL, DRY = NUL, DRZ = NUL),

   _F( GROUP_NO = 'GNO_EXBA', DX = NUL, DY = NUL, DZ = NUL))

        )

RES1=STAT_NON_LINE(
                            MODELE=MO,
                        CHAM_MATER=CHMATF,
                         CARA_ELEM=CARAP,
                             EXCIT=_F(
                CHARGE = CHAMA),COMP_INCR=(
                         _F(
                RELATION = 'MULTIFIBRE',
                GROUP_MA = 'GOA'),
                         _F(
                RELATION = 'VMIS_ISOT_LINE',
                GROUP_MA = (
                  'GRBAR_T',  'GRBAR_H',)),
                         _F(
                RELATION = 'VMIS_ASYM_LINE',
                GROUP_MA = (
                  'GRBAR_V',  ))),
                         INCREMENT=_F(
                LIST_INST = LITPS,
                NUME_INST_FIN = 44),
                            NEWTON=_F(
                MATRICE = 'ELASTIQUE'),
                       CONVERGENCE=_F(
                RESI_GLOB_MAXI = 5.E-3,
                ITER_GLOB_MAXI = 20)
              )

RES1=CALC_ELEM( reuse=RES1,
                            OPTION='SIEF_ELNO',
                          RESULTAT=RES1,
              )


TEST_RESU(RESU=(

    _F( RESULTAT = RES1, NOEUD = 'NPC02', NOM_CHAM = 'DEPL', NOM_CMP = 'DZ',
     NUME_ORDRE = 1,  VALE = -4.00000E-04,  REFERENCE = 'NON_REGRESSION'),

    _F( RESULTAT = RES1, NOEUD = 'NPC02', NOM_CHAM = 'DEPL', NOM_CMP = 'DZ',
     NUME_ORDRE = 10, VALE = -4.00000E-03, REFERENCE = 'NON_REGRESSION'),

    _F( RESULTAT = RES1, NOEUD = 'NPC02', NOM_CHAM = 'DEPL', NOM_CMP = 'DZ',
     NUME_ORDRE = 30, VALE = -4.00000E-04,  REFERENCE = 'NON_REGRESSION'),

    _F( RESULTAT = RES1, NOEUD = 'NPC02', NOM_CHAM = 'DEPL', NOM_CMP = 'DZ',
     NUME_ORDRE = 44, VALE = 2.00000E-03,  REFERENCE = 'NON_REGRESSION'),

_F( RESULTAT = RES1, MAILLE = 'MV01F010', NOEUD = 'NPC02', NOM_CHAM = 'SIEF_ELNO',
NUME_ORDRE = 1,  VALE = -2.00000E+03, REFERENCE = 'NON_REGRESSION', NOM_CMP = 'N'),

_F( RESULTAT = RES1, MAILLE = 'MV01F010', NOEUD = 'NPC02', NOM_CHAM = 'SIEF_ELNO',
NUME_ORDRE = 10, VALE = -1.20000E+04, REFERENCE = 'NON_REGRESSION', NOM_CMP = 'N'),

_F( RESULTAT = RES1, MAILLE = 'MV01F010', NOEUD = 'NPC02', NOM_CHAM = 'SIEF_ELNO',
NUME_ORDRE = 30, VALE = 5.20000E+03, REFERENCE = 'NON_REGRESSION', NOM_CMP = 'N'),

_F( RESULTAT = RES1, MAILLE = 'MV01F010', NOEUD = 'NPC02', NOM_CHAM = 'SIEF_ELNO',
NUME_ORDRE = 44, VALE = 7.60000E+03, REFERENCE = 'NON_REGRESSION', NOM_CMP = 'N'))


          )
# TEST SUR LES ELEMENTS DE POUTRE

TEST_RESU(RESU=(

    _F( RESULTAT = RES1, NOEUD = 'NP01_006', NOM_CHAM = 'SIEF_ELNO', NOM_CMP = 'N',
        MAILLE ='MP01_005',CRITERE='ABSOLU',
        NUME_ORDRE = 1,  VALE = 0.,  REFERENCE = 'NON_REGRESSION'),

    _F( RESULTAT = RES1, NOEUD = 'NP01_006', NOM_CHAM = 'SIEF_ELNO', NOM_CMP = 'MT',
        MAILLE ='MP01_005',CRITERE='ABSOLU',
        NUME_ORDRE = 10, VALE = 0., REFERENCE = 'NON_REGRESSION'),

    _F( RESULTAT = RES1, NOEUD = 'NP01_006', NOM_CHAM = 'SIEF_ELNO', NOM_CMP = 'MFY',
        MAILLE ='MP01_005',
        NUME_ORDRE = 30, VALE = 1087.2296,  REFERENCE = 'NON_REGRESSION'),

    _F( RESULTAT = RES1, NOEUD = 'NP01_006', NOM_CHAM = 'SIEF_ELNO', NOM_CMP = 'MFZ',
        MAILLE ='MP01_005',CRITERE='ABSOLU',
        NUME_ORDRE = 44, VALE = 0.,  REFERENCE = 'NON_REGRESSION'),

    _F( RESULTAT = RES1, SOUS_POINT = 1, NOM_CHAM = 'VARI_ELGA', NOM_CMP = 'V1',
        POINT=1,MAILLE ='MP01_005',CRITERE='ABSOLU',
        NUME_ORDRE = 44, VALE = 0.,  REFERENCE = 'NON_REGRESSION'),)

)


FIN()
