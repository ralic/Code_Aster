# MODIF  DATE 28/11/2000   AUTEUR JMBHH01 J.M.PROIX 
# TITRE SYSTEME MASSE RESSORT A 8 DEGRES DE LIBERTE TR_N
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
# ----------------------------------------------------------------------
# SDLD02/D               COMMANDES                              10/06/91
# ----------------------------------------------------------------------
# SYSTEME MASSE-RESSORT A 8 DEGRES DE LIBERTE
# SANS NOEUD EXTREMITES: 7+2 RESSORTS  8 MASSES ( KX=1.E+5  M =10 )
# SYSTEME // AXE(3,4)     ORIENTATION( ALPHA:53.130102 )
#                                                  REF: SFM.VPCS SDLD02
# MODELISATION DIS_TR:(8 NOEUDS - 7 MAILLES SEG2) + RAIDEUR EXTREMITES
# NOEUDS P1 ...P8
#=======================================================================
#     'K_TR_L' REPERE LOCAL  +  'K_TR_N' LOCAL  +  'M_TR_N' LOCAL
#=======================================================================

DEBUT(  CODE=_F( NOM = 'SDLD02D',NIV_PUB_WEB='INTERNET') )

MA=LIRE_MAILLAGE(  )

MO=AFFE_MODELE(  MAILLAGE=MA,AFFE=( 
       _F(  TOUT = 'OUI',   PHENOMENE = 'MECANIQUE',  MODELISATION = 'DIS_TR'),
   _F(  GROUP_NO = 'P', PHENOMENE = 'MECANIQUE',  MODELISATION = 'DIS_TR'))  )

CH=AFFE_CHAR_MECA(  MODELE=MO,
      DDL_IMPO=_F(  TOUT = 'OUI',   DX = 0., DY = 0., DZ = 0., DRZ = 0.),LIAISON_DDL=(

      
     _F( NOEUD = ('P1', 'P1',), DDL = ('DRX','DRY',), COEF_MULT = (-4.,3.,), COEF_IMPO = 0.),
     _F( NOEUD = ('P2', 'P2',), DDL = ('DRX','DRY',), COEF_MULT = (-4.,3.,), COEF_IMPO = 0.),
     _F( NOEUD = ('P3', 'P3',), DDL = ('DRX','DRY',), COEF_MULT = (-4.,3.,), COEF_IMPO = 0.),
     _F( NOEUD = ('P4', 'P4',), DDL = ('DRX','DRY',), COEF_MULT = (-4.,3.,), COEF_IMPO = 0.),
     _F( NOEUD = ('P5', 'P5',), DDL = ('DRX','DRY',), COEF_MULT = (-4.,3.,), COEF_IMPO = 0.),
     _F( NOEUD = ('P6', 'P6',), DDL = ('DRX','DRY',), COEF_MULT = (-4.,3.,), COEF_IMPO = 0.),
     _F( NOEUD = ('P7', 'P7',), DDL = ('DRX','DRY',), COEF_MULT = (-4.,3.,), COEF_IMPO = 0.),
     _F( NOEUD = ('P8', 'P8',), DDL = ('DRX','DRY',), COEF_MULT = (-4.,3.,), COEF_IMPO = 0.))
                   )

CARELEM=AFFE_CARA_ELEM(  MODELE=MO,
    ORIENTATION=_F(  GROUP_NO = 'P',    CARA = 'ANGL_NAUT',
                                 VALE = ( 53.130102,  0.,  0.,  )),DISCRET=(
    _F(  CARA = 'K_TR_L',
              GROUP_MA = 'GRMA',        REPERE = 'LOCAL',
     VALE = ( 0.,  0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   1.E5,
           0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,  
           0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,  
           0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,  
           0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,  -1.E5, 0.,  
           0.,   0.,   0.,   0.,   1.E5, 0.,   0.,   0.,   0.,   0.,  
           0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,  
           0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,  )),
            _F(  CARA = 'K_TR_N',         REPERE = 'LOCAL',
              NOEUD = ( 'P1', 'P8', ),
     VALE = ( 0.,  0.,    0.,    0.,   0.,   0.,  
           0.,   0.,    0.,    1.E5, 0.,  
           0.,   0.,    0.,    0.,   0.,  
           0.,   0.,    0.,    0.,   0.,     )),
            _F(  CARA = 'M_TR_N',
              GROUP_NO = 'P',           REPERE = 'LOCAL',
     VALE = ( 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  10., 
           0.,  0.,  0.,  0.,  0.,   0.,  0.,  0.,  0.,  0.,
           0.,        )))
              )

# --------------------------------------------------------------------
MELR=CALC_MATR_ELEM(  MODELE=MO,
                        CHARGE=CH,
                       OPTION='RIGI_MECA',
                        CARA_ELEM=CARELEM  )

MELM=CALC_MATR_ELEM(  MODELE=MO,
                        CHARGE=CH,
                       OPTION='MASS_MECA',
                        CARA_ELEM=CARELEM  )

NUM=NUME_DDL(  MATR_RIGI=MELR )

MATASSR=ASSE_MATRICE(MATR_ELEM=MELR,NUME_DDL=NUM)

MATASSM=ASSE_MATRICE(MATR_ELEM=MELM,NUME_DDL=NUM)

# --------------------------------------------------------------------
FREQ=MODE_ITER_INV(   MATR_A=MATASSR,      MATR_B=MATASSM,
          CALC_FREQ=_F(  OPTION = 'AJUSTE',
                      FREQ = (5., 10., 15., 20., 24., 27., 30., 32.,)),
           CALC_MODE=_F(  OPTION = 'DIRECT') )

FREQ=NORM_MODE( reuse=FREQ,    MODE=FREQ,
                      NORME='TRAN_ROTA',
                    MODE_SIGNE=_F(  NOEUD = 'P2',
                                 NOM_CMP = 'DRY')   )

# --------------------------------------------------------------------
MODE1=CREA_CHAMP(  OPERATION='EXTR', TYPE_CHAM='NOEU_DEPL_R',
NOM_CHAM='DEPL', RESULTAT=FREQ,
                      NUME_ORDRE=1
                         )

MODE8=CREA_CHAMP(  OPERATION='EXTR', TYPE_CHAM='NOEU_DEPL_R',
NOM_CHAM='DEPL', RESULTAT=FREQ,
                    # FREQ: 31.3474
                    # NUMERO_MODE: 8
                      NUME_ORDRE=8
                         )

# --------------------------------------------------------------------

CMP='DRY'

# ----------------------------------------------------------------------


TEST_RESU(RESU=(
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 1,         VALE = 5.5274),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 2,         VALE = 10.8868),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 3,         VALE = 15.9155),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 4,         VALE = 20.4606),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 5,         VALE = 24.3840),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 6,         VALE = 27.5664),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 7,         VALE = 29.9113),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 8,         VALE = 31.3474)),CHAM_NO=(

 _F(   CHAM_GD = MODE1,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P1',             VALE = 0.3473),
 _F(   CHAM_GD = MODE1,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P2',             VALE = 0.6527),
 _F(   CHAM_GD = MODE1,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P3',             VALE = 0.8794),
 _F(   CHAM_GD = MODE1,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P4',             VALE = 1.),
 _F(   CHAM_GD = MODE1,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P5',             VALE = 1.),
 _F(   CHAM_GD = MODE1,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P6',             VALE = 0.8794),
 _F(   CHAM_GD = MODE1,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P7',             VALE = 0.6527),
 _F(   CHAM_GD = MODE1,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P8',             VALE = 0.3473),

 _F(   CHAM_GD = MODE8,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P1',             VALE = -0.3473),
 _F(   CHAM_GD = MODE8,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P2',             VALE = 0.6527),
 _F(   CHAM_GD = MODE8,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P3',             VALE = -0.8794),
 _F(   CHAM_GD = MODE8,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P4',             VALE = 1.),
 _F(   CHAM_GD = MODE8,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P5',             VALE = -1.),
 _F(   CHAM_GD = MODE8,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P6',             VALE = 0.8794),
 _F(   CHAM_GD = MODE8,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P7',             VALE = -0.6527),
 _F(   CHAM_GD = MODE8,        NOM_CMP = CMP,
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NOEUD = 'P8',             VALE = 0.3473)) )

# ----------------------------------------------------------------------

FREQ=NORM_MODE(reuse=FREQ,   MODE=FREQ,   NORME='MASS_GENE' )

TEST_RESU(RESU=(
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 1,         VALE = 5.5274),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 2,         VALE = 10.8868),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 3,         VALE = 15.9155),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 4,         VALE = 20.4606),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 5,         VALE = 24.3840),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 6,         VALE = 27.5664),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 7,         VALE = 29.9113),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 8,         VALE = 31.3474),

     _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P1',NOM_CMP = CMP,VALE = 4.0781E-2),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P2',NOM_CMP = CMP,VALE = 7.6654E-2),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P3',NOM_CMP = CMP,VALE = 0.10327),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                  NOEUD = 'P4',NOM_CMP = CMP,VALE = 0.11743),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P5',NOM_CMP = CMP,VALE = 0.11743),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P6',NOM_CMP = CMP,VALE = 0.10327),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P7',NOM_CMP = CMP,VALE = 7.6654E-2),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P8',NOM_CMP = CMP,VALE = 4.0781E-2),

     _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P1',NOM_CMP = CMP,VALE = -4.0781E-2),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P2',NOM_CMP = CMP,VALE = 7.6654E-2),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P3',NOM_CMP = CMP,VALE = -0.10327),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P4',NOM_CMP = CMP,VALE = 0.11743),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P5',NOM_CMP = CMP,VALE = -0.11743),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P6',NOM_CMP = CMP,VALE = 0.10327),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P7',NOM_CMP = CMP,VALE = -7.6654E-2),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P8',NOM_CMP = CMP,VALE = 4.0781E-2))
                       )

# ---------------------------------------------------------------------

FREQ=NORM_MODE(reuse=FREQ,   MODE=FREQ,   NORME='RIGI_GENE' )

TEST_RESU(RESU=(
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 1,         VALE = 5.5274),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 2,         VALE = 10.8868),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 3,         VALE = 15.9155),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 4,         VALE = 20.4606),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 5,         VALE = 24.3840),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 6,         VALE = 27.5664),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 7,         VALE = 29.9113),
    _F(   RESULTAT = FREQ,        PARA = 'FREQ',
            CRITERE = 'RELATIF',     PRECISION = 1.E-4,
            NUME_ORDRE = 8,         VALE = 31.3474),

     _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P1',NOM_CMP = CMP,VALE = 1.1742E-3),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P2',NOM_CMP = CMP,VALE = 2.2072E-3),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P3',NOM_CMP = CMP,VALE = 2.9735E-3),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P4',NOM_CMP = CMP,VALE = 3.3813E-3),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P5',NOM_CMP = CMP,VALE = 3.3813E-3),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P6',NOM_CMP = CMP,VALE = 2.9735E-3),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P7',NOM_CMP = CMP,VALE = 2.2072E-3),
          _F( RESULTAT = FREQ,NUME_ORDRE = 1,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P8',NOM_CMP = CMP,VALE = 1.1742E-3),

     _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P1',NOM_CMP = CMP,VALE = -2.0705E-4),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P2',NOM_CMP = CMP,VALE = 3.8918E-4),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P3',NOM_CMP = CMP,VALE = -5.2432E-4),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P4',NOM_CMP = CMP,VALE = 5.9621E-4),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P5',NOM_CMP = CMP,VALE = -5.9621E-4),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P6',NOM_CMP = CMP,VALE = 5.2432E-4),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P7',NOM_CMP = CMP,VALE = -3.8918E-4),
          _F( RESULTAT = FREQ,NUME_ORDRE = 8,NOM_CHAM = 'DEPL',
                                 NOEUD = 'P8',NOM_CMP = CMP,VALE = 2.0705E-4))
                       )

FIN()
#
