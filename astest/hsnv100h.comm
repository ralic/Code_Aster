# MODIF  DATE 23/10/2006   AUTEUR VABHHTS J.PELLET 
# TITRE THERMO-PLASTICITE EN TRACTION SIMPLE (MODELISATION:C_PLAN)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2006  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#

DEBUT(CODE=_F( NOM = 'HSNV100H',NIV_PUB_WEB='INTRANET'),IMPR_MACRO='OUI',DEBUG=_F(SDVERI='OUI'))

#......................................................................
# CAS TEST THERMOPLASTICITE ELEMENTAIRE
#......................................................................
# DEFINITION DES CARACTERISTIQUES DU MATERIAU
#

MAIL=LIRE_MAILLAGE( )

#
# DONNEES DE MODELISATION
#

FCT1=DEFI_FONCTION(   NOM_PARA='EPSI',  PROL_DROITE='LINEAIRE',
                                          PROL_GAUCHE='LINEAIRE',
                       VALE=(
                             0.200E-2,      400.,
                             0.400E-2,      500.,)
                                                    )

#

FCT2=DEFI_FONCTION(   NOM_PARA='EPSI',  PROL_DROITE='LINEAIRE',
                                          PROL_GAUCHE='LINEAIRE',
                       VALE=(
                             0.100E-2,      200.,
                             0.300E-2,      300.,)
                                                    )

#

CTRACB=DEFI_NAPPE(   NOM_PARA='TEMP',  PROL_DROITE='LINEAIRE',
                                         PROL_GAUCHE='LINEAIRE',
                           PARA=(0.,50.,),
                           FONCTION=(FCT1,FCT2,)            )

#

#------------------------------------------------------------------------
#
# On effectue un deuxieme calcul avec le materiau Z2CND1712
# extrait de la base materiau
#
#------------------------------------------------------------------------

INCLUDE_MATERIAU(TYPE_MODELE='REF',
                 TYPE_VALE='NOMI',
                 NOM_AFNOR='Z2CND1712',
                 VARIANTE='A',
                 NOM_MATER='MA',
                 UNITE_LONGUEUR='MM'
                 )

L_INST=DEFI_LIST_REEL(
               DEBUT=0.,INTERVALLE=(
           _F( JUSQU_A = 66.666E0,   NOMBRE = 1),
                      _F( JUSQU_A = 80.000E0,   NOMBRE = 2),
                      _F( JUSQU_A = 90.000E0,   NOMBRE = 2))
         )
CHMAT=AFFE_MATERIAU(  MAILLAGE=MAIL,AFFE=(
                       _F(  TOUT='OUI',TEMP_REF=25, MATER = MA),
               ),)

#

TIMPVAR=DEFI_FONCTION(
                             NOM_PARA='INST',  NOM_RESU='TEMP',
                             VALE=(  0.E0,   25.E0,
                                  100.E0,   100.E0,)
                                             )
#

MOTHER=AFFE_MODELE(  MAILLAGE=MAIL,
         AFFE=_F( TOUT = 'OUI', MODELISATION = 'PLAN', PHENOMENE = 'THERMIQUE'))

CHTHE=AFFE_CHAR_THER_F(    MODELE=MOTHER,TEMP_IMPO=(
                            _F( GROUP_NO = 'GRNO1',  TEMP = TIMPVAR),
                            _F( GROUP_NO = 'GRNO2',  TEMP = TIMPVAR),
                            _F( GROUP_NO = 'GRNO3',  TEMP = TIMPVAR),
                            _F( GROUP_NO = 'GRNO4',  TEMP = TIMPVAR))
                          )

T25=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R', MAILLAGE=MAIL,
                        AFFE=_F( TOUT = 'OUI', NOM_CMP = 'TEMP',
                              VALE = 25.0)                 )


#

MOMECA=AFFE_MODELE(  MAILLAGE=MAIL,
         AFFE=_F( TOUT = 'OUI', MODELISATION = 'C_PLAN', PHENOMENE = 'MECANIQUE'))

#

TEMP=THER_NON_LINE(  MODELE=MOTHER,   CHAM_MATER=CHMAT,
                   EXCIT=_F( CHARGE = CHTHE),
                   TEMP_INIT=_F( CHAM_NO = T25),
                   INCREMENT=_F( LIST_INST = L_INST)
                        )

CHMECA=AFFE_CHAR_MECA(
            MODELE=MOMECA,DDL_IMPO=(
           _F( NOEUD = 'N1',     DX = 0.),
           _F( GROUP_NO = 'GRNO1',  DY = 0.),
           _F( GROUP_NO = 'GRNO3',  DY = 0.)),
          TEMP_CALCULEE=TEMP
                                                                )

U=STAT_NON_LINE(
                            MODELE=MOMECA,
                        CHAM_MATER=CHMAT,
                             EXCIT=_F(
                CHARGE = CHMECA),
                         COMP_INCR=_F(
                RELATION = 'VMIS_ISOT_TRAC'),
                            NEWTON=_F(
                MATRICE = 'TANGENTE',
                REAC_ITER = 1),
                         INCREMENT=_F(
                LIST_INST = L_INST),
                       CONVERGENCE=_F(
                RESI_GLOB_RELA = 1.E-5,
                ITER_GLOB_MAXI = 10)
              )
#
#  ATTENTION, SIGMA_33 EST INCALCULABLE A POSTERIORI EN C_PLAN :
U=CALC_ELEM( reuse=U,
                            OPTION=(  'EPSI_ELNO_DEPL',
                  'SIEF_ELNO_ELGA',  'VARI_ELNO_ELGA',),
                          RESULTAT=U,
              )

TEST_RESU(RESU=(
          _F(  RESULTAT = TEMP ,  NOM_CHAM = 'TEMP',  NUME_ORDRE = 5,
            NOEUD = 'N1', NOM_CMP = 'TEMP', VALE = 92.5,REFERENCE='ANALYTIQUE', ),
          _F(  RESULTAT = U,   NOM_CHAM = 'EPSI_ELNO_DEPL',  NUME_ORDRE = 1,
            MAILLE = 'M1',NOEUD = 'N1',NOM_CMP = 'EPXX', VALE =  1.034716E-3,REFERENCE='NON_REGRESSION', VERSION = '8.3.7'),
          _F(  RESULTAT = U,   NOM_CHAM = 'SIEF_ELNO_ELGA',  NUME_ORDRE = 1,
            MAILLE = 'M1',NOEUD = 'N1',NOM_CMP = 'SIYY', VALE = -1.516494E+2,REFERENCE='NON_REGRESSION', VERSION = '8.3.7'),
          _F(  RESULTAT = U,   NOM_CHAM = 'VARI_ELNO_ELGA',  NUME_ORDRE = 1,
            MAILLE = 'M1',NOEUD = 'N3',NOM_CMP = 'V1',   VALE =  9.600249E-6,REFERENCE='NON_REGRESSION', VERSION = '8.3.7'),
          _F(  RESULTAT = U,   NOM_CHAM = 'EPSI_ELNO_DEPL',  NUME_ORDRE = 3,
            MAILLE = 'M1',NOEUD = 'N2',NOM_CMP = 'EPXX', VALE =  1.257988E-3,REFERENCE='NON_REGRESSION', VERSION = '8.3.7'),
          _F(  RESULTAT = U,   NOM_CHAM = 'VARI_ELNO_ELGA',  NUME_ORDRE = 3,
            MAILLE = 'M1',NOEUD = 'N2',NOM_CMP = 'V1',   VALE =  7.138680E-5,REFERENCE='NON_REGRESSION', VERSION = '8.3.7'),
          _F(  RESULTAT = U,   NOM_CHAM = 'SIEF_ELNO_ELGA',  NUME_ORDRE = 3,
            MAILLE = 'M1',NOEUD = 'N2',NOM_CMP = 'SIYY', VALE = -1.704515E+2,REFERENCE='NON_REGRESSION', VERSION = '8.3.7'),
          _F(  RESULTAT = U,   NOM_CHAM = 'EPSI_ELNO_DEPL',  NUME_ORDRE = 5,
            MAILLE = 'M1',NOEUD = 'N3',NOM_CMP = 'EPXX', VALE =  1.432908E-3,REFERENCE='NON_REGRESSION', VERSION = '8.3.7'),
          _F(  RESULTAT = U,   NOM_CHAM = 'VARI_ELNO_ELGA',  NUME_ORDRE = 5,
            MAILLE = 'M1',NOEUD = 'N3',NOM_CMP = 'V1',   VALE =  1.503041E-4,REFERENCE='NON_REGRESSION', VERSION = '8.3.7'),
          _F(  RESULTAT = U,   NOM_CHAM = 'SIEF_ELNO_ELGA',  NUME_ORDRE = 5,
            MAILLE = 'M1',NOEUD = 'N3',NOM_CMP = 'SIYY', VALE = -1.783459E+2,REFERENCE='NON_REGRESSION', VERSION = '8.3.7'))
                                                                     )
FIN()
