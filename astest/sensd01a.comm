# MODIF  DATE 03/09/2002   AUTEUR GNICOLAS G.NICOLAS 
# RESPONSABLE S.CAMBIER
# TITRE Sensibilite au chargement/condition limite dans DYNA_LYNE_HARM
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
#                                                                       
#                                                                       
# ======================================================================
# ----------------------------------------------------------------------
# SYSTEME MASSE-RESSORT A 8 DEGRES DE LIBERTE AVEC AMORTISSEMENT
# VISQUEUX PROPORTIONNEL (REPONSE HARMONIQUE)
# 9 RESSORTS  8 MASSES  -- K =1.E+5    M =10 --
# ----------------------------------------------------------------------

DEBUT( CODE=_F(  NOM = 'sensd01a',NIV_PUB_WEB='INTERNET') )

# 1. Definition des parametres sensibles
#
F1 = DEFI_PARA_SENSI(    VALE = 2.)

F2 = DEFI_PARA_SENSI(    VALE = 0.)

D1 = DEFI_PARA_SENSI(    VALE = 2.)

#
# 2. Maillage, Modele ...
#

MA=LIRE_MAILLAGE( )

MO=AFFE_MODELE(  MAILLAGE=MA,AFFE=( 
            _F( TOUT = 'OUI',PHENOMENE = 'MECANIQUE',MODELISATION = 'DIS_T'),
      _F( GROUP_NO = 'MASSE',PHENOMENE = 'MECANIQUE', MODELISATION = 'DIS_T'))  )

CARELEM=AFFE_CARA_ELEM(   MODELE=MO,DISCRET=( 
       _F( GROUP_MA = 'RESSORT',CARA = 'K_T_D_L',VALE = (1.E+5,1., 1.,)),
               _F( GROUP_NO = 'MASSE',  CARA = 'M_T_D_N',VALE = 10.),
               _F( GROUP_MA = 'AMORTIS',CARA = 'A_T_D_L',VALE = (50.,1.,1.,))))

MATER=DEFI_MATERIAU( ELAS=_F(  E = 2.E+11,  NU = 0.3) )

CHMAT=AFFE_MATERIAU(  MAILLAGE=MA,
                           AFFE=_F(  TOUT = 'OUI', MATER = MATER)  )

#
# 3. Chargement ...
#

CH=AFFE_CHAR_MECA_F( MODELE=MO,FORCE_NODALE=(_F(  NOEUD = 'NO5',   FX = F1),
                           _F(  NOEUD = 'NO6',   FX = F2)))

FC=DEFI_FONCTION(    NOM_PARA='FREQ',
                         PROL_DROITE='CONSTANT',
                         PROL_GAUCHE='CONSTANT',
                         VALE_C=(10., 1., 0., 20., 1., 0., 40., 1., 0.,) )                  

#
# 4. Conditions aux limites ...
#

CLIM1 = AFFE_CHAR_MECA( MODELE=MO,DDL_IMPO=(
                   _F( GROUP_NO = 'A_ET_B', DX = 0.,DY = 0.,DZ = 0.),
                            _F( GROUP_NO = 'MASSE',     DY = 0.,   DZ = 0.),
                            ))                                    

CLIM2 = AFFE_CHAR_MECA_F( MODELE=MO,DDL_IMPO=(
                           _F( NOEUD = 'NO2',         DX = D1)                            
                            ))  
                             
#
# 5. Premier membre
#

MATELER=CALC_MATR_ELEM(  MODELE=MO,           OPTION='RIGI_MECA',
                             CARA_ELEM=CARELEM,      
                             CHARGE=( CLIM1, CLIM2,)    )

MATELEM=CALC_MATR_ELEM(  MODELE=MO,           OPTION='MASS_MECA',
                             CARA_ELEM=CARELEM,
                             CHARGE=( CLIM1, CLIM2,)    )                                   

MATELEC=CALC_MATR_ELEM(  MODELE=MO,           OPTION='AMOR_MECA',
                             RIGI_MECA=MATELER,    MASS_MECA=MATELEM,
                             CARA_ELEM=CARELEM,    CHAM_MATER=CHMAT,
                             CHARGE= (CLIM1,CLIM2,)   )

NUM=NUME_DDL(  MATR_RIGI=MATELER  )

MATASSR=ASSE_MATRICE(  MATR_ELEM=MATELER,    NUME_DDL=NUM  )

MATASSM=ASSE_MATRICE(  MATR_ELEM=MATELEM,    NUME_DDL=NUM  )

MATASSC=ASSE_MATRICE(  MATR_ELEM=MATELEC,    NUME_DDL=NUM  )


LIFREQ=DEFI_LIST_REEL(DEBUT=10., INTERVALLE=_F( JUSQU_A = 40., NOMBRE = 1))


#
# 6. Calcul
#

DYHA=DYNA_LINE_HARM( MODELE=MO, CARA_ELEM=CARELEM, CHAM_MATER=CHMAT,
                           MATR_MASS=MATASSM, MATR_RIGI=MATASSR,
                           MATR_AMOR=MATASSC,   LIST_FREQ=LIFREQ,
                              TOUT_CHAM='OUI',
                              EXCIT=(_F( COEF_MULT_C = ('RI',1.,0.,), CHARGE = CLIM2),                                                           
                                          _F(FONC_MULT_C = FC, CHARGE = CH)),                             
                              SENSIBILITE=(F1,F2,D1),)                              
#
# 7. Test
#----------------------------------------------------------
#
#
TEST_RESU(RESU=(
      _F( RESULTAT = DYHA,    NUME_ORDRE = 2, PARA = 'FREQ',
           CRITERE = 'ABSOLU', VALE = 40., PRECISION = 1.E-8, REFERENCE = 'ANALYTIQUE',),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'RELATIF', PRECISION = 1.E-5,
          NOM_CMP = 'DX',    VALE_C = ('RI',-4.8176281E-01 , -1.0074952E-01,), REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE_C = ('RI', 0.00000E+00, 0.00000E+00,), REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE_C = ('RI', 0.00000E+00, 0.00000E+00,), REFERENCE = 'ANALYTIQUE' ),          
      _F( RESULTAT = DYHA,    NUME_ORDRE = 2, PARA = 'FREQ',
          SENSIBILITE=(F1),
          CRITERE = 'ABSOLU', VALE = 40., PRECISION = 1.E-8, REFERENCE = 'ANALYTIQUE',),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DX',    VALE_C = ('RI', -2.5695869E-06, -2.7550424E-07,), REFERENCE = 'ANALYTIQUE' ),                    
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE_C = ('RI', 0.00000E+00, 0.00000E+00,), REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE_C = ('RI', 0.00000E+00, 0.00000E+00,), REFERENCE = 'ANALYTIQUE' ),
      _F( RESULTAT = DYHA,    NUME_ORDRE = 2, PARA = 'FREQ',
          SENSIBILITE=(F2),
          CRITERE = 'ABSOLU', VALE = 40., PRECISION = 1.E-8, REFERENCE = 'ANALYTIQUE',),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F2),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DX',    VALE_C = ('RI', 6.0508111E-07 , 1.9567292E-07,), REFERENCE = 'ANALYTIQUE' ),                    
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F2),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE_C = ('RI', 0.00000E+00, 0.00000E+00,), REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F2),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE_C = ('RI', 0.00000E+00, 0.00000E+00,), REFERENCE = 'ANALYTIQUE' ),         
      _F( RESULTAT = DYHA,    NUME_ORDRE = 2, PARA = 'FREQ',
          SENSIBILITE=(D1),
          CRITERE = 'ABSOLU', VALE = 40., PRECISION = 1.E-8, REFERENCE = 'ANALYTIQUE',),          
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(D1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'RELATIF', PRECISION = 1.E-5,
          NOM_CMP = 'DX',    VALE_C = ('RI', -2.4088143E-01, -5.0374785E-02,), REFERENCE = 'ANALYTIQUE' ),                    
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(D1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE_C = ('RI', 0.00000E+00, 0.00000E+00,), REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(D1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE_C = ('RI', 0.00000E+00, 0.00000E+00,), REFERENCE = 'ANALYTIQUE' ),
        ),);


FIN( )
#
