# MODIF  DATE 13/01/2011   AUTEUR PELLET J.PELLET 
# RESPONSABLE ADBHHPM P.MASSIN
# DATE   : 10/08/2000
# AUTEUR : F. LEBOUVIER (DELTACAD)
# TITRE  : POUTRE EN FLAMBEMENT 
# ssnl502b.para = tps_job 600 mem_job 128Mo ncpus 1 liste_test V
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#---------------------------------------------------------------------
#- CALCUL DE LA STABILITE D'UNE POUTRE CONSOLE SOUMISE A UN EFFORT DE
#  COMPRESSION A UNE EXTREMITE. 
#- VALIDATION DANS LE DOMAINE QUASI-STATIQUE NON-LINEAIRE GEOMETRIQUE 
#  EN GRANDS DEPLACEMENTS ET GRANDES ROTATIONS EN PRESENCE 
#  D'INSTABILITE (FLAMBEMENT D'EULER)
#- MODELISATION AVEC DES ELEMENTS 'COQUE_3D' (QUAD9)
#---------------------------------------------------------------------
#
DEBUT( CODE=_F( NOM = 'SSNL502B',NIV_PUB_WEB='INTERNET'))

#
PRE_IDEAS ()
#
MA=LIRE_MAILLAGE( )
MA=DEFI_GROUP( reuse=MA,
                       MAILLAGE=MA,CREA_GROUP_NO=(
                       _F(  GROUP_MA = 'TOUT_ELT',  ),)
                    )

#
MAIL=CREA_MAILLAGE(     MAILLAGE=MA,
                       MODI_MAILLE=_F( TOUT = 'OUI',
                                    OPTION = 'QUAD8_9')
                     )

MAIL=DEFI_GROUP(reuse=MAIL,  MAILLAGE=MAIL,CREA_GROUP_NO=(
                   _F( NOM = 'C', NOEUD = 'N81'),
                    ))

#
MO=AFFE_MODELE(   MAILLAGE=MAIL,
                        AFFE=(_F( GROUP_MA='TOUT_ELT',
                              PHENOMENE = 'MECANIQUE',
                              MODELISATION = 'COQUE_3D'),
                             _F(GROUP_MA='COTEBC',
                              PHENOMENE = 'MECANIQUE',
                              MODELISATION = '3D'))
                  )

#
#---------------------------------------------------------------------
#                     CARACTERISTIQUES ELEMENTAIRES
#---------------------------------------------------------------------
#
CAREL=AFFE_CARA_ELEM(   MODELE=MO,
                           COQUE=_F( GROUP_MA = 'TOUT_ELT',
                                  EPAIS = 0.0045,
# ACIS=1.E6*H/L
#                                 A_CIS    : 9000.
                             COEF_RIGI_DRZ = 0.001,
                                  ANGL_REP = (90., 0.,))
                        )

#
#---------------------------------------------------------------------
#                     CARACTERISTIQUES MATERIAUX
#---------------------------------------------------------------------
#
MAT=DEFI_MATERIAU(   ELAS=_F( E = 2.E+11,
                             NU = 0.3)
                     )

#
CHMAT=AFFE_MATERIAU(   MAILLAGE=MAIL,
                             AFFE=_F( TOUT = 'OUI', MATER = MAT)
                       )

#
#---------------------------------------------------------------------
#                     CHARGEMENTS
#---------------------------------------------------------------------
#
CON_LIM=AFFE_CHAR_MECA(     MODELE=MO,
                            DDL_IMPO=(_F( GROUP_NO = 'COTEAD',
                                      DX = 0., DY = 0., DZ = 0.,
                                      DRZ = 0., DRX =0.,DRY = 0.),
#                             _F( TOUT = 'OUI',
#                                DRX = 0.),
                           )
                          )

#
CHARGE=AFFE_CHAR_MECA(         MODELE=MO,
                            FORCE_ARETE=_F( GROUP_MA = 'COTEBC',
                                         FZ = -14989.4667)
                          )

PERTUR=AFFE_CHAR_MECA(         MODELE=MO,
                            FORCE_ARETE=_F( GROUP_MA = 'COTEBC',
                                         FX = 14.9894667)
                          )

F_PERT=DEFI_FONCTION(      NOM_PARA='INST',
                           PROL_DROITE='CONSTANT',
                          PROL_GAUCHE='EXCLU',
                                 VALE=( 0.,     0.,
                                        0.94,   0.,
                                        0.95,   1.,
                                        1.015,  1.,
                                        1.016,  0.,
                                        2.,     0.,
                                       )
                        )

F_CHARGE=DEFI_FONCTION(      NOM_PARA='INST',
                           PROL_DROITE='CONSTANT',
                          PROL_GAUCHE='EXCLU',
                                 VALE=( 0.,   0.,
                                        2.,   2.,
                                       )
                        )

#
#---------------------------------------------------------------------
#                        RESOLUTION
#---------------------------------------------------------------------
#
LIS_INST=DEFI_LIST_REEL(       DEBUT=0.0,INTERVALLE=(
                           _F( JUSQU_A = 0.98, NOMBRE = 1), 
                           _F( JUSQU_A = 1.01, NOMBRE = 10),
#
# DEPLACEMENT IMPOSE U=0.015 : ON COMPLETE LE DEPLACEMENT OBTENU
# PRECEDEMMENT QUI EST DE W=-4.7898E-3
# STAT_NON_LINE : COEF_MULT = DELTA_T/DELTA_U
#
                           _F( JUSQU_A = 1.0202102, NOMBRE = 10),
# DEPLACEMENT IMPOSE U=0.0595
                           _F( JUSQU_A = 1.0647102, NOMBRE = 10),
# DEPLACEMENT IMPOSE U=0.1295
                           _F( JUSQU_A = 1.1347102, NOMBRE = 20),
# DEPLACEMENT IMPOSE U=0.2200
                           _F( JUSQU_A = 1.2252102, NOMBRE = 20),
# DEPLACEMENT IMPOSE U=0.2200
                           _F( JUSQU_A = 1.3252102, NOMBRE = 40),
# DEPLACEMENT IMPOSE U=0.2200
                           _F( JUSQU_A = 1.4252102, NOMBRE = 20),
# DEPLACEMENT IMPOSE U=0.2200
                           _F( JUSQU_A = 1.5052102, NOMBRE = 20),)
                           )

DEFLIST =DEFI_LIST_INST(DEFI_LIST=_F(LIST_INST = LIS_INST),
                        ECHEC=_F(SUBD_METHODE='UNIFORME',
                                 SUBD_PAS=4,
                                 SUBD_PAS_MINI = 0.00000001),)
#
RESULT=STAT_NON_LINE(       MODELE=MO,
                          CHAM_MATER=CHMAT,
                           CARA_ELEM=CAREL,EXCIT=(
                               _F( CHARGE = CON_LIM),
                                     _F( CHARGE = CHARGE,
                                      FONC_MULT = F_CHARGE),
                                     _F( CHARGE = PERTUR,
                                      FONC_MULT = F_PERT)),
                           COMP_ELAS=_F( RELATION = 'ELAS',
                                      DEFORMATION = 'GROT_GDEP',),
                           INCREMENT=_F( LIST_INST = DEFLIST,
                                      NUME_INST_FIN = 11),
                            SOLVEUR=_F( SYME='OUI',),
                              NEWTON=_F( REAC_ITER = 1,
                                      MATRICE = 'TANGENTE',
                                      PREDICTION='ELASTIQUE',),
                         CONVERGENCE=_F( 
                                      ITER_GLOB_MAXI = 20,
                                      RESI_GLOB_RELA = 1.E-6)
                        )

#
RESULT=STAT_NON_LINE(reuse=RESULT,      MODELE=MO,
                          CHAM_MATER=CHMAT,
                           CARA_ELEM=CAREL,EXCIT=(
                               _F( CHARGE = CON_LIM),
                                     _F( CHARGE = PERTUR,
                                      FONC_MULT = F_PERT),
                                     _F( CHARGE = CHARGE,
                                      TYPE_CHARGE = 'FIXE_PILO')),
                           COMP_ELAS=_F( RELATION = 'ELAS',
                                      DEFORMATION = 'GROT_GDEP',),
                           INCREMENT=_F( LIST_INST = DEFLIST,
                                      NUME_INST_INIT = 11, 
                                     NUME_INST_FIN = 151),
                            SOLVEUR=_F(  SYME='OUI',),
                              NEWTON=_F( REAC_ITER = 1,
                                      MATRICE = 'TANGENTE',
                                      PREDICTION='ELASTIQUE',),
                         CONVERGENCE=_F( 
                                      ITER_GLOB_MAXI = 20,
                                      RESI_GLOB_RELA = 1.E-6),
                           ETAT_INIT=_F( EVOL_NOLI = RESULT), 
                            PILOTAGE=_F( TYPE = 'LONG_ARC',
                                      SELECTION='ANGL_INCR_DEPL',
                                      GROUP_NO = 'TOUT_ELT',
                                      NOM_CMP = ('DX','DZ',),
                                      COEF_MULT = -1.,
                                      ETA_PILO_MAX=20.,)
                        )

#
TABLE_DZ=POST_RELEVE_T( 
                                ACTION=_F( GROUP_NO = 'C',
                          INTITULE = 'TAB_DZ',
                          RESULTAT = RESULT,
                          NOM_CHAM = 'DEPL',
                          NOM_CMP = 'DZ',
                          TOUT_ORDRE = 'OUI',
                          OPERATION = 'EXTRACTION')
                          )

IMPR_TABLE(  TABLE=TABLE_DZ)

TABLE_DX=POST_RELEVE_T( 
                                ACTION=_F( GROUP_NO = 'C',
                          INTITULE = 'TAB_DX',
                          RESULTAT = RESULT,
                          NOM_CHAM = 'DEPL',
                          NOM_CMP = 'DX',
                          TOUT_ORDRE = 'OUI',
                          OPERATION = 'EXTRACTION')
                          )

IMPR_TABLE(  TABLE=TABLE_DX)

#
DEPZ=RECU_FONCTION (   RESULTAT = RESULT,
                          NOM_CMP = 'DZ',
                          NOM_CHAM = 'DEPL',
                          GROUP_NO = 'C',
                          TOUT_ORDRE = 'OUI')
                            
DEPX=RECU_FONCTION (   RESULTAT = RESULT,
                          NOM_CMP = 'DX',
                          NOM_CHAM = 'DEPL',
                          GROUP_NO = 'C',
                          TOUT_ORDRE = 'OUI')

ETA=RECU_FONCTION (   RESULTAT = RESULT,
                          NOM_PARA_RESU = 'ETA_PILOTAGE',
                          TOUT_ORDRE = 'OUI') 

IMPR_FONCTION ( FORMAT='TABLEAU',
              COURBE=_F( FONCTION = DEPZ),
              TITRE='Depz en fonction du temps'
              )
              
IMPR_FONCTION ( FORMAT='TABLEAU',
             COURBE=_F( FONCTION = ETA),
             TITRE='Eta en fonction du temps'
              )
              
IMPR_FONCTION ( FORMAT='TABLEAU',
               COURBE=_F( FONCTION = DEPX),
    TITRE='Depx en fonction du temps'
              )
#---------------------------------------------------------------------
#                        VERIFICATION DES RESULTATS
#---------------------------------------------------------------------
TEST_RESU(RESU=(
# DEPLACEMENT W=-0.015
     _F( RESULTAT = RESULT,            INST=1.03356,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DZ',              VALE = -0.015,
           REFERENCE='ANALYTIQUE', PRECISION=(0.03,1.E-5),),
     _F( RESULTAT = RESULT,            INST=1.03356,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DX',              VALE = 0.1100,
           REFERENCE='ANALYTIQUE', PRECISION=(0.02,1.E-5),),
#     RESU:(RESULTAT  : RESULT            NUME_ORDRE : 24          
#           NOM_CHAM  : 'SIEF_ELNO'  MAILLE     : MA4
#           GROUP_NO  : A
#           NOM_CMP   : 'MYY'             VALE       : -127.58
#           PRECISION : 0.01
#           )
     _F( RESULTAT = RESULT,           INST=1.03356,
           PARA = 'ETA_PILOTAGE',
           VALE = 1.015,             
           REFERENCE='ANALYTIQUE', PRECISION=(0.025,1.E-5),),
# DEPLACEMENT W=-0.0595
     _F( RESULTAT = RESULT,            INST=1.089210200E+00,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DZ',              VALE = -0.0595,
           REFERENCE='ANALYTIQUE', PRECISION=(0.04,1.E-5),),
     _F( RESULTAT = RESULT,            INST=1.089210200E+00,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DX',              VALE = 0.211,
           REFERENCE='ANALYTIQUE', PRECISION=(0.06,1.E-5),),
#     RESU:(RESULTAT  : RESULT            NUME_ORDRE : 38         
#           NOM_CHAM  : 'REAC_NODA'       MAILLE     : MA4
#           GROUP_NO  : A
#           NOM_CMP   : 'MYY'             VALE       : -239.2
#           PRECISION : 0.01
#           )
     _F( RESULTAT = RESULT,           INST=1.089210200E+00,
           PARA = 'ETA_PILOTAGE',
           VALE = 1.063,             REFERENCE='ANALYTIQUE', PRECISION=(0.04,1.E-5),),
# DEPLACEMENT W=-0.22
     _F( RESULTAT = RESULT,            INST=1.202585200E+00,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DZ',              VALE = -0.22,
           REFERENCE='ANALYTIQUE', PRECISION=(0.03,1.E-5),),
     _F( RESULTAT = RESULT,            INST=1.202585200E+00,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DX',              VALE = 0.3595,
           REFERENCE='ANALYTIQUE', PRECISION=(0.01,1.E-5),),
     _F( RESULTAT = RESULT,           INST=1.202585200E+00,
           PARA = 'ETA_PILOTAGE',
           VALE = 1.293,             REFERENCE='ANALYTIQUE', PRECISION=(0.06,1.E-5),),
# DEPLACEMENT W=-0.3255
     _F( RESULTAT = RESULT,            INST=1.255210200E+00,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DZ',              VALE = -0.3255,
           REFERENCE='ANALYTIQUE', PRECISION=(0.02,1.E-5),),
     _F( RESULTAT = RESULT,            INST=1.255210200E+00,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DX',              VALE = 0.3960,
           REFERENCE='ANALYTIQUE', PRECISION=(0.01,1.E-5),),
     _F( RESULTAT = RESULT,           INST=1.255210200E+00,
           PARA = 'ETA_PILOTAGE',
           VALE = 1.518,             REFERENCE='ANALYTIQUE', PRECISION=(0.06,1.E-5),),
# DEPLACEMENT W=-0.5535
     _F( RESULTAT = RESULT,            INST=1.375210200E+00,
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DZ',              VALE = -0.5535,
           REFERENCE='ANALYTIQUE', PRECISION=(0.02,1.E-5),),
     _F( RESULTAT = RESULT,            INST=1.375210200E+00,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DX',              VALE = 0.3750,
           REFERENCE='ANALYTIQUE', PRECISION=(0.03,1.E-5),),
     _F( RESULTAT = RESULT,           INST=1.375210200E+00,
           PARA = 'ETA_PILOTAGE',
           VALE = 2.541,             REFERENCE='ANALYTIQUE', PRECISION=(0.06,1.E-5),),
# DEPLACEMENT W=-0.67
     _F( RESULTAT = RESULT,           INST=1.453210200E+00,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DZ',              VALE = -0.67,
           REFERENCE='ANALYTIQUE', PRECISION=(0.02,1.E-5),),
     _F( RESULTAT = RESULT,           INST=1.453210200E+00,          
           NOM_CHAM = 'DEPL',            GROUP_NO = 'C',
           NOM_CMP = 'DX',              VALE = 0.3125,
           REFERENCE='ANALYTIQUE', PRECISION=(0.05,1.E-5),),
     _F( RESULTAT = RESULT,          INST=1.453210200E+00,
           PARA = 'ETA_PILOTAGE',
           VALE = 4.029,             REFERENCE='ANALYTIQUE', PRECISION=(0.1,1.E-5),),
         )
           )

FIN()
# 
