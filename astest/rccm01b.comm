# MODIF  DATE 03/10/2006   AUTEUR CIBHHLV L.VIVAN 
# TITRE VALIDATION DE L'OPERATEUR POST_RCCM / UNITAIRE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2003  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# RESPONSABLE GALENNE E.GALENNE

DEBUT( CODE=_F(  NOM = 'RCCM01B',NIV_PUB_WEB='INTERNET') )

#Definition du materiau
WOHLER=DEFI_FONCTION(
             NOM_PARA='SIGM',
   VALE=(      138.,     1000000.,
               152.,      500000.,
               165.,      200000.,
               180.,      100000.,
               200.,       50000.,
               250.,       20000.,
               295.,       12000.,
               305.,       10000.,
               340.,        5000.,
               430.,        2000.,
               540.,        1000.,
               690.,         500.,
               930.,         200.,
              1210.,         100.,
              1590.,          50.,
              2210.,          20.,
              2900.,          10.,
               ),
               INTERPOL='LOG',
            PROL_DROITE='LINEAIRE',
            PROL_GAUCHE='LINEAIRE' )

MAT=DEFI_MATERIAU(  ELAS=_F( E = 200000.,  NU = 0.3,  ALPHA = 1.0E-5),
                    FATIGUE=_F( WOHLER = WOHLER, 
                                E_REFE = 200000.),
                    RCCM=_F(  M_KE = 1.7,
                              N_KE = 0.3,
                              SM = 200.,
                              SY_02 = 200.)
                               )

#Relecture des tables de contraintes
TBTHME = LIRE_TABLE (UNITE=36, FORMAT='ASTER',SEPARATEUR=' ',
                     NUME_TABLE=1,)

TBTHER = LIRE_TABLE (UNITE=36, FORMAT='ASTER',SEPARATEUR=' ',
                     NUME_TABLE=2,)

TBTHM2 = LIRE_TABLE (UNITE=36, FORMAT='ASTER',SEPARATEUR=' ',
                     NUME_TABLE=3,)

#--------------------------------------------------------------------------------
#   option = PM_PB
#   chargement unitaire - Validation PM_PB
#--------------------------------------------------------------------------------

UNIPM=POST_RCCM( MATER=MAT,
                 TYPE_RESU_MECA='UNITAIRE',
                 OPTION='PM_PB',
                 INFO=2,
                 CHAR_MECA=(
                  _F(NUME_CHAR=1,
                     NOM_CHAR='NUL',
                     FX=0.0,
                     FY=0.0,
                     FZ=0.0,
                     MX=0.0,
                     MY=0.0,
                     MZ=0.0,),
                  _F(NUME_CHAR=2,
                     NOM_CHAR='UNIT',
                     FX=2.0,
                     FY=0.0,
                     FZ=0.0,
                     MX=0.0,
                     MY=0.0,
                     MZ=0.0,),),
                  RESU_MECA_UNIT=(
                   _F(TABL_FX=TBTHME,
                      TABL_FY=TBTHME,
                      TABL_FZ=TBTHME,
                      TABL_MX=TBTHME,
                      TABL_MY=TBTHME,
                      TABL_MZ=TBTHME,
                      TABL_PRES=TBTHME,),),
                  RESU_THER=(
                   _F(NUME_RESU_THER=1,
                      TABL_RESU_THER=TBTHER, ),
                  ),
                  SITUATION=(
                  _F(NB_OCCUR=1,
                     NUME_SITU=1,
                     NOM_SITU='Unitaire FX',
                     NUME_GROUPE=1,
                     NUME_RESU_THER = 1,
                     CHAR_ETAT_A=1,
                     CHAR_ETAT_B=2,
                     PRES_A=0,
                     PRES_B=0,
                     TEMP_REF_A=20.0,
                     TEMP_REF_B=20.0,),),);

#---le PM_PB
TEST_TABLE(    TABLE=UNIPM,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PM_MAX',
                      VALE=200.        )
TEST_TABLE(    TABLE=UNIPM,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PB_MAX',
                  CRITERE='ABSOLU',
                      VALE= 0.         )
TEST_TABLE(    TABLE=UNIPM,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PMPB_MAX',
                      VALE= 200.       )

TEST_TABLE(    TABLE=UNIPM,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PM_MAX',
                      VALE=200.        )
TEST_TABLE(    TABLE=UNIPM,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PB_MAX',
                  CRITERE='ABSOLU',
                      VALE= 0.         )
TEST_TABLE(    TABLE=UNIPM,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PMPB_MAX',
                      VALE= 200.       )

#--------------------------------------------------------------------------------
#   option = SN*
#   chargement unitaire - Validation SN*
#--------------------------------------------------------------------------------

UNISN=POST_RCCM( MATER=MAT,
                 TYPE_RESU_MECA='UNITAIRE',
                 OPTION='SN',
                 INFO=2,
                 CHAR_MECA=(
                  _F(NUME_CHAR=1,
                     NOM_CHAR='NUL',
                     FX=0.0,
                     FY=0.0,
                     FZ=0.0,
                     MX=0.0,
                     MY=0.0,
                     MZ=0.0,),
                  _F(NUME_CHAR=2,
                     NOM_CHAR='UNIT',
                     FX=2.0,
                     FY=0.0,
                     FZ=0.0,
                     MX=0.0,
                     MY=0.0,
                     MZ=0.0,),),
                  RESU_MECA_UNIT=(
                   _F(TABL_FX=TBTHME,
                      TABL_FY=TBTHME,
                      TABL_FZ=TBTHME,
                      TABL_MX=TBTHME,
                      TABL_MY=TBTHME,
                      TABL_MZ=TBTHME,
                      TABL_PRES=TBTHME,),),
                  RESU_THER=(
                   _F(NUME_RESU_THER=1,
                      TABL_RESU_THER=TBTHER, ),
                  ),
                  SITUATION=(
                  _F(NB_OCCUR=1,
                     NUME_SITU=1,
                     NOM_SITU='Unitaire FX',
                     NUME_GROUPE=1,
                     NUME_RESU_THER = 1,
                     CHAR_ETAT_A=1,
                     CHAR_ETAT_B=2,
                     PRES_A=0,
                     PRES_B=0,
                     TEMP_REF_A=20.0,
                     TEMP_REF_B=20.0,),),);

#---le SN
TEST_TABLE(    TABLE=UNISN,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SN_MAX',
                      VALE=300.        )

TEST_TABLE(    TABLE=UNISN,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SN_MAX',
                      VALE=100.        )

#---le SN*
TEST_TABLE(    TABLE=UNISN,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SN*_MAX',
                      VALE=200.          )

TEST_TABLE(    TABLE=UNISN,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SN*_MAX',
                      VALE=200.          )

#--------------------------------------------------------------------------------
#   option = 'FATIGUE'
#   chargement unitaire - Validation FATIGUE
#--------------------------------------------------------------------------------

UNIFA=POST_RCCM( MATER=MAT,
                 TYPE_RESU_MECA='UNITAIRE',
                 OPTION='FATIGUE',
                 INFO=2,
                 CHAR_MECA=(
                  _F(NUME_CHAR=1,
                     NOM_CHAR='NUL',
                     FX=0.0,
                     FY=0.0,
                     FZ=0.0,
                     MX=0.0,
                     MY=0.0,
                     MZ=0.0,),
                  _F(NUME_CHAR=2,
                     NOM_CHAR='UNIT',
                     FX=2.0,
                     FY=0.0,
                     FZ=0.0,
                     MX=0.0,
                     MY=0.0,
                     MZ=0.0,),),
                  RESU_MECA_UNIT=(
                   _F(TABL_FX=TBTHME,
                      TABL_FY=TBTHME,
                      TABL_FZ=TBTHME,
                      TABL_MX=TBTHME,
                      TABL_MY=TBTHME,
                      TABL_MZ=TBTHME,
                      TABL_PRES=TBTHME,),),
                  RESU_THER=(
                   _F(NUME_RESU_THER=1,
                      TABL_RESU_THER=TBTHER, ),
                  ),
                  SITUATION=(
                  _F(NB_OCCUR=1,
                     NUME_SITU=1,
                     NOM_SITU='Unitaire FX',
                     NUME_GROUPE=1,
                     NUME_RESU_THER = 1,
                     CHAR_ETAT_A=1,
                     CHAR_ETAT_B=2,
                     PRES_A=0,
                     PRES_B=0,
                     TEMP_REF_A=20.0,
                     TEMP_REF_B=20.0,),),);

#---le PM
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PM_MAX',
                      VALE=200.        )
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PM_MAX',
                      VALE=200.        )
#---le PB
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PB_MAX',
                  CRITERE='ABSOLU',
                      VALE= 0.         )
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PB_MAX',
                  CRITERE='ABSOLU',
                      VALE= 0.         )
#---le PMPB
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PMPB_MAX',
                      VALE= 200.       )

TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='PMPB_MAX',
                      VALE= 200.       )

#---le SN
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SN_MAX',
                      VALE=300.        )

TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SN_MAX',
                      VALE=100.        )
#---le SN*
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SN*_MAX',
                      VALE=200.          )

TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SN*_MAX',
                      VALE=200.          )

#---le SP
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SP_MAX',
                      VALE=300.          )

TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SP_MAX',
                      VALE=100.          )

#---le SALT
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SALT_MAX',
                      VALE=150.          )

TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SALT_MAX',
                      VALE=50.          )

#---le FACT_USAGE
TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'ORIG'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='FACT_USAGE_CUMU',
                      VALE=1.81872E-06  )

TEST_TABLE(    TABLE=UNIFA,
               FILTRE=( _F(  NOM_PARA = 'LIEU',
                             VALE_K   = 'EXTR'),),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='FACT_USAGE_CUMU',
                      VALE=2.41379E-07  )


#--------------------------------------------------------------------------------
#   option = 'FATIGUE'
#   chargement unitaire - Validation FATIGUE
#--------------------------------------------------------------------------------

UNIF2=POST_RCCM( MATER=MAT,
                 TYPE_RESU_MECA='UNITAIRE',
                 OPTION='FATIGUE',
                 INFO=2,
                 CHAR_MECA=(
                  _F(NUME_CHAR=1,
                     NOM_CHAR='NUL',
                     FX=0.0,
                     FY=0.0,
                     FZ=0.0,
                     MX=0.0,
                     MY=0.0,
                     MZ=0.0,),
                  _F(NUME_CHAR=2,
                     NOM_CHAR='UNIT',
                     FX=2.0,
                     FY=0.0,
                     FZ=0.0,
                     MX=0.0,
                     MY=0.0,
                     MZ=0.0,),),
                  RESU_MECA_UNIT=(
                   _F(TABL_FX=TBTHME,
                      TABL_FY=TBTHME,
                      TABL_FZ=TBTHME,
                      TABL_MX=TBTHME,
                      TABL_MY=TBTHME,
                      TABL_MZ=TBTHME,
                      TABL_PRES=TBTHME,),),
                  RESU_THER=(
                   _F(NUME_RESU_THER=1,
                      TABL_RESU_THER=TBTHME, ),
                  ),
                  SITUATION=(
                  _F(NB_OCCUR=1,
                     NUME_SITU=1,
                     NOM_SITU='Unitaire FX',
                     NUME_GROUPE=1,
                     NUME_RESU_THER = 1,
                     CHAR_ETAT_A=1,
                     CHAR_ETAT_B=2,
                     PRES_A=0.,
                     PRES_B=1.,
                     TEMP_REF_A=0.0,
                     TEMP_REF_B=20.0,),),);

TEST_TABLE(    TABLE=UNIF2,
               FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K   = 'EXTR'),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SY',
                      VALE= 200.       )

TEST_TABLE(    TABLE=UNIF2,
               FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K   = 'EXTR'),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='SIGM_M_PRES',
                      VALE= 100.       )

TEST_TABLE(    TABLE=UNIF2,
               FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K   = 'EXTR'),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='VALE_MAXI_LINE',
                      VALE= 400.       )

TEST_TABLE(    TABLE=UNIF2,
               FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K   = 'EXTR'),
                 REFERENCE='ANALYTIQUE',
                  NOM_PARA='VALE_MAXI_PARAB',
                      VALE= 540.       )

FIN();
