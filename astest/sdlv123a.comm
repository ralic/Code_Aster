# MODIF  DATE 07/05/2004   AUTEUR CIBHHGB G.BERTRAND 

DEBUT(CODE=_F(NOM='SDLV123A',
              NIV_PUB_WEB='INTERNET',),);
# TITRE DYNAMIQUE D'UNE FISSURE FINIE STATIONNAIRE DANS UN MILIEU 
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2004  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# INFINI EN D_PLAN SOUMISE A UNE PRESSION

PRE_GIBI();
MAIL=LIRE_MAILLAGE();
MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F(GROUP_MA=('LP1P111','LP2P4'),),);


MODELE=AFFE_MODELE(MAILLAGE=MAIL,
                   AFFE=(_F(GROUP_MA=('SUT',),
                            PHENOMENE='MECANIQUE',
                            MODELISATION='D_PLAN',),
                         _F(GROUP_MA=('LP4P41','LP111P41',),
                            PHENOMENE='MECANIQUE',
                            MODELISATION='D_PLAN_ABSO',),),);


acier=DEFI_MATERIAU(ELAS=_F(E=200000000000.0,
                            NU=0.3,
                            RHO=7500.0,),);


CHAMPMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                       AFFE=(_F(GROUP_MA=('SUT',),
                                MATER=acier,),),);

CH_P=AFFE_CHAR_MECA(MODELE=MODELE,
                        DDL_IMPO=(_F(GROUP_NO='LP2P4',
                                     DY=0.0,),
                                   _F(GROUP_NO='LP1P111',
                                      DX=0.0,),
                                  _F(GROUP_NO='P4',
                                     DX=0.0,DY=0.0,),),
                        PRES_REP=_F(GROUP_MA='LP1P2',
                                    PRES=100000000.0,),);

FONC=DEFI_FONCTION(NOM_PARA='INST',
                   VALE=(0.0,0.0,1.E-6,1.0,0.1,1.0,),);


TEMPLI=DEFI_LIST_REEL(DEBUT=0.0,
                      INTERVALLE=_F(JUSQU_A=0.1,
                                    NOMBRE=5000,),);

RIGIEL=CALC_MATR_ELEM( MODELE=MODELE,
                       CHAM_MATER=CHAMPMAT,
                       CHARGE=CH_P,
                       OPTION='RIGI_MECA')

MASSEL=CALC_MATR_ELEM( MODELE=MODELE,
                       CHAM_MATER=CHAMPMAT,
                       OPTION='MASS_MECA')

NUMEROTA=NUME_DDL( MATR_RIGI=RIGIEL)

RIGI=ASSE_MATRICE( MATR_ELEM=RIGIEL,
                   NUME_DDL=NUMEROTA
                  )

MASSE=ASSE_MATRICE( MATR_ELEM=MASSEL,
                   NUME_DDL=NUMEROTA
                  )


#
INTLI=DEFI_LIST_ENTI(DEBUT=0,
                     INTERVALLE=_F(JUSQU_A=5000,
                                   PAS=100,),);
#-----------------------------------------------------------------------
# 1 -ER NON AMORTI
evol=DYNA_LINE_TRAN(   MODELE=MODELE,
                       CHAM_MATER=CHAMPMAT,
                       MATR_MASS=MASSE,
                       MATR_RIGI=RIGI,
                       NEWMARK=_F(),
                       EXCIT=_F(CHARGE=CH_P,
                                FONC_MULT=FONC,),
                       INCREMENT=_F(LIST_INST=TEMPLI,),
                       ARCHIVAGE=_F(LIST_ARCH=INTLI,),);
#CALC_ELEM( reuse=evol,RESULTAT=evol,
#                      MODELE=MODELE,
#                      CHAM_MATER=CHAMPMAT,
#                       EXCIT=_F(CHARGE=CH_P,
#                                FONC_MULT=FONC,),
#                       TOUT_ORDRE='OUI',
#                       OPTION=('SIGM_ELNO_DEPL',)
#          )

THETA1=CALC_THETA( MODELE=MODELE,
                   DIRECTION=(1.,0.,0.,),
                   THETA_2D=_F (GROUP_NO = ('P2',),
                                MODULE = 1. ,
                                R_INF = 3.,
                                R_SUP = 10.)
                               )

THETA2=CALC_THETA( MODELE=MODELE,
                   DIRECTION=(1.,0.,0.,),
                   THETA_2D=_F (GROUP_NO = ('P2',),
                                MODULE = 1. ,
                                R_INF = 5.,
                                R_SUP = 15.)
                               )

THETA3=CALC_THETA( MODELE=MODELE,
                   DIRECTION=(1.,0.,0.,),
                   THETA_2D=_F (GROUP_NO = ('P2',),
                                MODULE = 1. ,
                                R_INF = 5.,
                                R_SUP = 18.)
                               )

G1=CALC_G_THETA_T( MODELE=MODELE,
                    RESULTAT=evol,
                    TOUT_ORDRE='OUI',
                    THETA=THETA1,
                    CHAM_MATER=CHAMPMAT,
                    CHARGE=CH_P,
                    SYME_CHAR='SYME'
                  )

G2=CALC_G_THETA_T( MODELE=MODELE,
                    RESULTAT=evol,
                    TOUT_ORDRE='OUI',
                    THETA=THETA2,
                    CHAM_MATER=CHAMPMAT,
                    CHARGE=CH_P,
                    SYME_CHAR='SYME'
                  )

G3=CALC_G_THETA_T( MODELE=MODELE,
                    RESULTAT=evol,
                    TOUT_ORDRE='OUI',
                    THETA=THETA3,
                    CHAM_MATER=CHAMPMAT,
                    CHARGE=CH_P,
                    SYME_CHAR='SYME'
                  )

DEPL5=CREA_CHAMP(OPERATION='EXTR',
                TYPE_CHAM='NOEU_DEPL_R',
                RESULTAT=evol,
                NUME_ORDRE=5,
                NOM_CHAM='DEPL',
                 )
VITE5=CREA_CHAMP(OPERATION='EXTR',
                TYPE_CHAM='NOEU_DEPL_R',
                RESULTAT=evol,
                NUME_ORDRE=5,
                NOM_CHAM='VITE',
                 )
ACCE5=CREA_CHAMP(OPERATION='EXTR',
                TYPE_CHAM='NOEU_DEPL_R',
                RESULTAT=evol,
                NUME_ORDRE=5,
                NOM_CHAM='ACCE',
                 )

G4=CALC_G_THETA_T( MODELE=MODELE,
                    THETA=THETA1,
                    DEPL=DEPL5,
                    VITE=VITE5,
                    ACCE=ACCE5,
                    CHAM_MATER=CHAMPMAT,
                    CHARGE=CH_P,
                    SYME_CHAR='SYME'
                  )

IMPR_TABLE ( FICHIER = 'RESULTAT',
             TABLE   = G1 ,
           );

IMPR_TABLE ( FICHIER = 'RESULTAT',
             TABLE   = G2 ,
           );

IMPR_TABLE ( FICHIER = 'RESULTAT',
             TABLE   = G3 ,
           );



#----------------------------------------------------------
# TEST DE IMPR_RESU
#----------------------------------------------------------
#
DEFI_FICHIER( FICHIER= 'CASTEM', UNITE = 37)

IMPR_RESU(MODELE=MODELE,
          RESU=(_F(FORMAT='CASTEM',
                   FICHIER='CASTEM',
                  MAILLAGE=MAIL,),
                _F(RESULTAT=evol,
                   FICHIER='CASTEM',
                   FORMAT='CASTEM',),
                  ),);

TEST_TABLE(TABLE=G1,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=1,),
           NOM_PARA='G',
           VALE=5.677E5,
           PRECISION=1.4E-2,
           REFERENCE='ANALYTIQUE',
          );

TEST_TABLE(TABLE=G1,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=2,),
           NOM_PARA='G',
           VALE=1.135E6,
           PRECISION=1.4E-2,
           REFERENCE='ANALYTIQUE',
          );

TEST_TABLE(TABLE=G1,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=3,),
           NOM_PARA='G',
           VALE=1.703E6,
           PRECISION=1.4E-2,
           REFERENCE='ANALYTIQUE',
          );
TEST_TABLE(TABLE=G2,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=1,),
           NOM_PARA='G',
           VALE=5.677E5,
           PRECISION=1.4E-2,
           REFERENCE='ANALYTIQUE',
          );

TEST_TABLE(TABLE=G2,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=2,),
           NOM_PARA='G',
           VALE=1.135E6,
           PRECISION=1.4E-2,
           REFERENCE='ANALYTIQUE',
          );

TEST_TABLE(TABLE=G2,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=3,),
           NOM_PARA='G',
           VALE=1.703E6,
           PRECISION=1.4E-2,
           REFERENCE='ANALYTIQUE',
          );
FIN();
