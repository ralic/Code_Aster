# MODIF  DATE 12/04/2010   AUTEUR SELLENET N.SELLENET 
# RESPONSABLE PABHHHH N.TARDIEU

# TITRE CORRIGE TP POUTRE FORMATION POST TRAITEMENT
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F(NOM='FORMA06B', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

# =========================================
#              CALCUL
# =========================================

PRE_GIBI();

MA=LIRE_MAILLAGE();

MO1=AFFE_MODELE(MAILLAGE=MA,
                AFFE=_F(TOUT='OUI',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='POU_D_T',),);

ACIER=DEFI_MATERIAU(ELAS=_F(E=2.E11,
                            NU=0.0,
                            RHO=0.0,
                            ALPHA=0.0,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=_F(TOUT='OUI',
                            MATER=ACIER,),);

CAREL1=AFFE_CARA_ELEM(MODELE=MO1,
                      POUTRE=(_F(GROUP_MA='AB',
                                 SECTION='RECTANGLE',
                                 CARA='H',
                                 VALE=1.E-2,),
                              _F(GROUP_MA=('CA','GA','DG',),
                                 SECTION='RECTANGLE',
                                 CARA='H',
                                 VALE=1.E-2,),
                              _F(GROUP_MA='AE',
                                 SECTION='RECTANGLE', VARI_SECT = 'HOMOTHETIQUE',
                                 CARA=('H1','H2',),
                                 VALE=(0.01,0.01,),),),);

CH111=AFFE_CHAR_MECA(MODELE=MO1,
                     DDL_IMPO=(_F(TOUT='OUI',
                                  DZ=0.0,
                                  DRX=0.0,
                                  DRY=0.0,),
                               _F(GROUP_NO=('DD','BB','EE',),
                                  DX=0.0,
                                  DY=0.0,
                                  DRZ=0.0,),
                               _F(GROUP_NO='CC',
                                  DX=0.0,
                                  DY=0.0,),),);

CH121=AFFE_CHAR_MECA(MODELE=MO1,
                     FORCE_NODALE=_F(GROUP_NO='GG',
                                     FY=-1.0666666666659999E4,),
                     FORCE_POUTRE=_F(GROUP_MA='AB',
                                     FY=-1000.0,),);

MEST11=MECA_STATIQUE(MODELE=MO1,
                     CHAM_MATER=CHMAT,
                     CARA_ELEM=CAREL1,
                     EXCIT=(_F(CHARGE=CH111,),
                            _F(CHARGE=CH121,),),);


IMPR_RESU(MODELE=MO1,
          RESU=_F(RESULTAT =MEST11));


TEST_RESU(RESU=(_F(RESULTAT=MEST11,
                   INST=0.0,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRZ',
                   GROUP_NO='GG',REFERENCE='NON_REGRESSION',
                   VALE=-3.32217E-04)));


# =========================================
#          POST TRAITEMENT
# =========================================

#
# DEFINITION DES GROUPES DE NOEUDS
#


MA=DEFI_GROUP(reuse =MA,
              MAILLAGE=MA,
              CREA_GROUP_MA=_F(NOM='DB',
                               UNION=('DG','GA','AB',),),
              CREA_GROUP_NO=(_F(GROUP_MA='DB',
                                OPTION='NOEUD_ORDO',
                                NOM='DB_ORDO',
                                GROUP_NO_ORIG='DD',
                                GROUP_NO_EXTR='BB',),
                             _F(GROUP_MA='DB',),),);

#
# CALCULS ELEMENTAIRES
#

MEST11=CALC_ELEM(reuse =MEST11,
                 OPTION=('EFGE_ELNO_DEPL','SIPO_ELNO_DEPL','EFGE_ELNO_CART',),
                 RESULTAT=MEST11,
                 );

MEST11=CALC_NO(reuse =MEST11,
               RESULTAT=MEST11,
               OPTION=('EFGE_NOEU_DEPL','SIPO_NOEU_DEPL','EFGE_NOEU_CART',),
               );

#
# IMPRESSIONS FORMAT RESULTAT
#


IMPR_RESU(RESU=_F(RESULTAT=MEST11,
                  NOM_CHAM='EFGE_ELNO_DEPL',
                  FORM_TABL='OUI',
                  NOM_CMP='MFZ',
                  GROUP_NO=('AA','DD','BB',),),);

#
# IMPRESSIONS FORMAT CASTEM
#


IMPR_RESU(MODELE=MO1,FORMAT='CASTEM',
          RESU=_F(MAILLAGE=MA,
                  RESULTAT=MEST11,
                  NOM_CHAM=('DEPL','EFGE_NOEU_DEPL','SIPO_NOEU_DEPL',),),);

#
# DEFINITION ET IMPRESSION DES COURBES
#


TAB1=POST_RELEVE_T(ACTION=_F(INTITULE='MOMENT SUR LE SEGMENT AB',
                             GROUP_MA=('DG','GA','AB',),
                             GROUP_NO='DB',
                             RESULTAT=MEST11,
                             NOM_CHAM='EFGE_ELNO_DEPL',
                             NOM_CMP='MFZ',
                             MOYE_NOEUD='NON',
                             OPERATION='EXTRACTION',),);

TAB2=POST_RELEVE_T(ACTION=_F(INTITULE='MOMENT SUR LE SEGMENT AB',
                             GROUP_MA=('DG','GA','AB',),
                             GROUP_NO='DB_ORDO',
                             RESULTAT=MEST11,
                             NOM_CHAM='EFGE_ELNO_DEPL',
                             NOM_CMP='MFZ',
                             MOYE_NOEUD='NON',
                             OPERATION='EXTRACTION',),);

IMPR_TABLE(UNITE=8,
           FORMAT='AGRAF',
           TITRE='MOMENT MFZ SUIVANT DB',
           TABLE=TAB1,
           NOM_PARA=('ABSC_CURV','MFZ',),)

IMPR_TABLE(UNITE=8,
           FORMAT='AGRAF',
           TITRE='MOMENT MFZ SUIVANT DB ORDONNE',
           TABLE=TAB2,
           NOM_PARA=('ABSC_CURV','MFZ',),)

FIN();
