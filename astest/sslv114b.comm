# TITRE MOUVEMENTS DE CORPS SOLIDE 2D ET 3D
# ======================================================================
# COPYRIGHT (C) 1991 - 2015  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# CERTAINS NOEUDS PORTENT DES DDLS DE ROTATIONS :
#      DRZ            POUR LE MODELE 2D
#      DRX,DRY,DRZ    POUR LE MODELE 3D
# TRAITEMENT DES CAS PARTICULIERS :
#       NOEUDS CONFONDUS (2D ET 3D)
#       NOEUDS ALIGNES (3D)
#----------------------------------------------------------------------


DEBUT( CODE=_F(NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

MATER=DEFI_MATERIAU(  ELAS=_F(  E = 0.,   NU = 0.) )

MA_3D=LIRE_MAILLAGE(   UNITE=20 )

MA_2D=LIRE_MAILLAGE(   UNITE=22 )

CHMAT_3D=AFFE_MATERIAU(  MAILLAGE=MA_3D,
             AFFE=_F(  TOUT = 'OUI',      MATER = MATER) )

CHMAT_2D=AFFE_MATERIAU(  MAILLAGE=MA_2D,
             AFFE=_F(  TOUT = 'OUI',      MATER = MATER) )

#  MODELE  2D :
#  ------------


MOD1=AFFE_MODELE(  MAILLAGE=MA_2D,AFFE=(
            _F( PHENOMENE = 'MECANIQUE', MODELISATION = 'D_PLAN',
            MAILLE = ('ABCD','BE1','BE2','BE3',)),
            _F( PHENOMENE = 'MECANIQUE', MODELISATION = 'COQUE_C_PLAN',
            MAILLE = ('ABE1',))) )

CELEM1=AFFE_CARA_ELEM(   MODELE=MOD1,
            COQUE=_F( MAILLE = ('ABE1',), EPAIS = 1., A_CIS = 1.))

CH1=AFFE_CHAR_MECA(    MODELE=MOD1,LIAISON_SOLIDE=(
#         -- CAS GENERAL :
          _F( NOEUD = ('A','B','C','D',)),
#         -- CAS PARTICULIER : NOEUDS CONFONDUS
          _F( NOEUD = ('E1','E2','E3',))),DDL_IMPO=(

           _F(  NOEUD = ('A','E1',), DX = 2., DY = 3.),
           _F(  NOEUD = ('B',),    DY = 3.001),
           _F(  NOEUD = ('E1',),   DRZ = 0.001)) )

MES1=MECA_STATIQUE(    MODELE=MOD1,  CHAM_MATER=CHMAT_2D,
            EXCIT=_F( CHARGE = CH1),   CARA_ELEM=CELEM1 )

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES1,
                   NOM_CHAM='DEPL',
                   NOEUD='C',
                   NOM_CMP='DX',
                   VALE_REFE=1.999,
                   VALE_CALC=1.999,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES1,
                   NOM_CHAM='DEPL',
                   NOEUD='C',
                   NOM_CMP='DY',
                   VALE_REFE=3.001,
                   VALE_CALC=3.001,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES1,
                   NOM_CHAM='DEPL',
                   NOEUD='E2',
                   NOM_CMP='DX',
                   VALE_REFE=2.0,
                   VALE_CALC=2.0,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES1,
                   NOM_CHAM='DEPL',
                   NOEUD='E2',
                   NOM_CMP='DY',
                   VALE_REFE=3.0,
                   VALE_CALC=3.0,
                   ),
                ),
          )

#---------------------------------------------------------------------

#  MODELE  3D :
#  ------------


MOD2=AFFE_MODELE(  MAILLAGE=MA_3D,AFFE=(
            _F( PHENOMENE = 'MECANIQUE', MODELISATION = '3D',
            MAILLE = ('FGHIJKLM','ON','NP','IQ1','IQ2','IQ3',)),
            _F( PHENOMENE = 'MECANIQUE', MODELISATION = 'POU_D_E',
            MAILLE = ('IN','NQ1',))) )

VAL = DEFI_CONSTANTE (VALE =  1.997)

CH2=AFFE_CHAR_MECA_F(    MODELE=MOD2,
           DDL_IMPO=_F(  NOEUD = ('I',), DX = VAL),
           LIAISON_SOLIDE=(
#         -- CAS GENERAL :
          _F( MAILLE = ('FGHIJKLM',)),
#         -- CAS PARTICULIER : NOEUDS ALIGNES
          _F( GROUP_MA = ('GROUP_MA_ONP',)),
#         -- CAS PARTICULIER : NOEUDS CONFONDUS
          _F( GROUP_NO = ('GROUP_NO_Q1Q2Q3',))),)

CH2B=AFFE_CHAR_MECA(    MODELE=MOD2,
                        DDL_IMPO=(

           _F(  NOEUD = ('F','N','Q1',), DX = 2., DY = 3., DZ = 4.),
           _F(  NOEUD = ('J','O',),    DX = 2.002),
           _F(  NOEUD = ('J','O',),    DY = 2.999),
#           _F(  NOEUD = ('I',),      DX = 1.997),
           _F(  NOEUD = ('N',),      DRZ = 0.003),
           _F(  NOEUD = ('Q1',),     DRX = 0.001),
           _F(  NOEUD = ('Q1',),     DRY = 0.002),
           _F(  NOEUD = ('Q1',),     DRZ = 0.003)) )

CELEM2=AFFE_CARA_ELEM(   MODELE=MOD2,
            POUTRE=_F( MAILLE = ('IN','NQ1',), SECTION = 'CERCLE',
           CARA = ('R',),   VALE = (2.,)) )

MES2=MECA_STATIQUE(    MODELE=MOD2,  CHAM_MATER=CHMAT_3D,
                       EXCIT=(_F( CHARGE = CH2),_F( CHARGE = CH2B),),
                       CARA_ELEM=CELEM2 )

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES2,
                   NOM_CHAM='DEPL',
                   NOEUD='L',
                   NOM_CMP='DX',
                   VALE_REFE=1.999,
                   VALE_CALC=1.999,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES2,
                   NOM_CHAM='DEPL',
                   NOEUD='L',
                   NOM_CMP='DY',
                   VALE_REFE=3.002,
                   VALE_CALC=3.002,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES2,
                   NOM_CHAM='DEPL',
                   NOEUD='L',
                   NOM_CMP='DZ',
                   VALE_REFE=3.999,
                   VALE_CALC=3.999,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES2,
                   NOM_CHAM='DEPL',
                   NOEUD='P',
                   NOM_CMP='DX',
                   VALE_REFE=1.998,
                   VALE_CALC=1.998,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES2,
                   NOM_CHAM='DEPL',
                   NOEUD='P',
                   NOM_CMP='DY',
                   VALE_REFE=3.001,
                   VALE_CALC=3.001,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES2,
                   NOM_CHAM='DEPL',
                   NOEUD='P',
                   NOM_CMP='DZ',
                   VALE_REFE=4.0,
                   VALE_CALC=4.0,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES2,
                   NOM_CHAM='DEPL',
                   NOEUD='Q3',
                   NOM_CMP='DX',
                   VALE_REFE=2.0,
                   VALE_CALC=2.0,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES2,
                   NOM_CHAM='DEPL',
                   NOEUD='Q3',
                   NOM_CMP='DY',
                   VALE_REFE=3.0,
                   VALE_CALC=3.0,
                   ),
                _F(NUME_ORDRE=1,
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=MES2,
                   NOM_CHAM='DEPL',
                   NOEUD='Q3',
                   NOM_CMP='DZ',
                   VALE_REFE=4.0,
                   VALE_CALC=4.0,
                   ),
                ),
          )

#
#---------------------------------------------------------------------

FIN()
#
