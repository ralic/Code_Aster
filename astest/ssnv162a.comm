# MODIF  DATE 04/07/2005   AUTEUR LEBOUVIE F.LEBOUVIER 
# RESPONSABLE JOUMANA J.EL-GHARIB
# TITRE CALCUL DE FLUAGE DE DESSICATION INTRINSEQUE (MODELE BAZANT)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# -----------------------------------------------------
# FLUAGE DE DESSICATION INTRINSEQUE - CONTRAINTES PLANES
# -----------------------------------------------------

DEBUT( CODE=_F( NOM = 'SSNV162A',NIV_PUB_WEB='INTERNET'))

PRE_GIBI()

M=LIRE_MAILLAGE( )

M=DEFI_GROUP( reuse=M,  MAILLAGE=M,
                     CREA_GROUP_NO=(_F( GROUP_MA = 'AB'),
                                    _F( GROUP_MA = 'BC'),
                                    _F( GROUP_MA = 'CD'),
                                    _F( GROUP_MA = 'DA'),)
                  )
MO=AFFE_MODELE( 
            MAILLAGE=M,
           AFFE=_F( TOUT = 'OUI',PHENOMENE = 'MECANIQUE',MODELISATION = 'C_PLAN')
           )


SECH0=CREA_CHAMP(  OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
                         MAILLAGE=M,
                         AFFE=(_F( TOUT='OUI',
                               NOM_CMP = 'TEMP_INF',
                               VALE = 0.),
                               _F( TOUT='OUI',
                               NOM_CMP = 'TEMP',
                               VALE = 0.),
                               _F( TOUT='OUI',
                               NOM_CMP = 'TEMP_SUP',
                               VALE = 0.),)
                        )

SECHI=CREA_CHAMP(  OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
                         MAILLAGE=M,
                         AFFE=(_F( TOUT='OUI',
                               NOM_CMP = 'TEMP_INF',
                               VALE = 1.),
                               _F( TOUT='OUI',
                               NOM_CMP = 'TEMP',
                               VALE = 1.),
                               _F( TOUT='OUI',
                               NOM_CMP = 'TEMP_SUP',
                               VALE = 1.),)
                        )

SECHF=CREA_CHAMP(  OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
                         MAILLAGE=M,
                         AFFE=(_F( TOUT='OUI',
                               NOM_CMP = 'TEMP_INF',
                               VALE = 0.75),
                               _F( TOUT='OUI',
                               NOM_CMP = 'TEMP',
                               VALE = 0.75),
                               _F( TOUT='OUI',
                               NOM_CMP = 'TEMP_SUP',
                               VALE = 0.75),)
                        )
SECH=CREA_RESU(    OPERATION='AFFE', TYPE_RESU='EVOL_THER',
                        NOM_CHAM='TEMP',
                        AFFE=(
                              _F(  CHAM_GD = SECH0,
                                  INST = -1.),
                              _F(  CHAM_GD = SECHI,
                                  INST = 0.),
                              _F(  CHAM_GD = SECHF,
                                  INST = 864000.)),     
                    )
                    
E=DEFI_CONSTANTE (VALE=  36400.E6 )

NU=DEFI_CONSTANTE (VALE=  0.248 )

                               
FONC1=DEFI_FONCTION( 
           NOM_PARA='SECH',PROL_DROITE='LINEAIRE',PROL_GAUCHE='LINEAIRE',
           VALE=(0.0, 0.0, 0.75,  0.75, 1.,1.)
           )

MAT=DEFI_MATERIAU( 
                ELAS_FO=_F( E = E, NU = NU, FONC_DESORP = FONC1 ),
            BAZANT_FD=_F( LAM_VISC=1.875E-11,)
                         )

CM=AFFE_MATERIAU( MAILLAGE=M,   
                  AFFE=_F( TOUT = 'OUI',
                           MATER = MAT, 
                           TEMP_REF = 20.,
                           SECH_REF = 1.) )


CH1=AFFE_CHAR_MECA( 
            MODELE=MO,
           FACE_IMPO=(_F( GROUP_MA = 'AB',
                         DY = 0.),
                      _F( GROUP_MA = 'DA',
                         DX = 0.)  )       
           )

CH2=AFFE_CHAR_MECA(
            MODELE=MO,
             SECH_CALCULEE=SECH
                          )

CH3=AFFE_CHAR_MECA(
            MODELE=MO,
                     PRES_REP=_F(GROUP_MA='BC',
                                PRES=10.E6,),
                                VERI_NORM='OUI',);

EVOL_CH3=DEFI_FONCTION(      NOM_PARA='INST',
                           PROL_DROITE='LINEAIRE',
                         VALE=(-1.,     0.0,
                                 0.,    0.0,
                                 1.,    1.0,
                            864000.,    1.0,)
                       )


L_INST=DEFI_LIST_REEL(  DEBUT=-1.0,INTERVALLE=(
             _F( JUSQU_A = 0.,    NOMBRE = 1),
             _F( JUSQU_A = 1.,    NOMBRE = 1),
             _F( JUSQU_A = 864000.,    NOMBRE = 8))
           )

#864000s=10J


U=STAT_NON_LINE( 
                            MODELE=MO,
                        CHAM_MATER=CM,EXCIT=(
                             _F( 
                CHARGE = CH1),
                _F( 
                CHARGE = CH2),
                _F( 
                CHARGE = CH3,
                FONC_MULT=EVOL_CH3)),
                         COMP_INCR=_F( 
                RELATION = 'BAZANT_FD',
                ALGO_C_PLAN = 'DEBORST',
                ),
                         INCREMENT=_F( 
                LIST_INST = L_INST),
                            NEWTON=_F( 
                MATRICE = 'TANGENTE',
                REAC_ITER= 3),
                       CONVERGENCE=_F( 
                RESI_GLOB_MAXI = 1.E-6,)
              )

U=CALC_ELEM( reuse=U,
              OPTION=('SIEF_ELNO_ELGA'),
              RESULTAT=U,)

U=CALC_ELEM(reuse=U,   RESULTAT=U,
              OPTION='EPSI_ELNO_DEPL')

U=CALC_ELEM(reuse=U,   RESULTAT=U, 
             OPTION=('EPGR_ELNO'))


TEST_RESU(RESU=(
  _F( RESULTAT = U,NOM_CHAM = 'EPSI_ELNO_DEPL',MAILLE = 'M1',NOEUD = 'N4',
INST = 0.,NOM_CMP = 'EPXX',VALE = 0.000000,PRECISION = 0.0, CRITERE = 'ABSOLU',
REFERENCE = 'ANALYTIQUE'),
  _F( RESULTAT = U,NOM_CHAM = 'EPSI_ELNO_DEPL',MAILLE = 'M1',NOEUD = 'N4',
INST = 1.,NOM_CMP = 'EPXX',VALE = -2.74725E-04,PRECISION = 0.005,
REFERENCE = 'ANALYTIQUE'),
  _F( RESULTAT = U,NOM_CHAM = 'EPSI_ELNO_DEPL',MAILLE = 'M1',NOEUD = 'N4',
INST = 10.7999875E4,NOM_CMP = 'EPXX',VALE =-2.80584E-04,PRECISION = 0.005,
REFERENCE = 'ANALYTIQUE'),
  _F( RESULTAT = U,NOM_CHAM = 'EPSI_ELNO_DEPL',MAILLE = 'M1',NOEUD = 'N4',
INST = 53.9999375E4,NOM_CMP = 'EPXX',VALE = -3.04022E-04,PRECISION = 0.005,
REFERENCE = 'ANALYTIQUE'),
  _F( RESULTAT = U,NOM_CHAM = 'EPSI_ELNO_DEPL',MAILLE = 'M1',NOEUD = 'N4',
INST = 864000,NOM_CMP = 'EPXX',VALE = -3.21600E-04,PRECISION = 0.005,
REFERENCE = 'ANALYTIQUE'),
           ))

FIN()
