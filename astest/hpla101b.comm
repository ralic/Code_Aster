# MODIF  DATE 23/05/2011   AUTEUR SELLENET N.SELLENET 
# RESPONSABLE GNICOLAS G.NICOLAS
# TITRE DERIVEES PAR RAPPORT A UNE VARIATION DE DOMAINE.
# hpla101b.para = tps_job 60 mem_job 64Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# 1. PREALABLES

DEBUT(CODE=_F(NOM='HPLA101B',
              NIV_PUB_WEB='INTERNET',),
      DEBUG=_F(SDVERI='NON',),);

#

MAILLAGE=LIRE_MAILLAGE();

#
# LA LISTE DES INSTANTS

LIST_INS=DEFI_LIST_REEL(DEBUT=0.,
                        INTERVALLE=_F(JUSQU_A=5.,
                                      PAS=5.,),);

#
# 2. MODELES : MECANIQUE ET THERMIQUE

MOD_MECA=AFFE_MODELE(MAILLAGE=MAILLAGE,
                     AFFE=_F(TOUT='OUI',
                             PHENOMENE='MECANIQUE',
                             MODELISATION='AXIS',),);

MOD_THER=AFFE_MODELE(MAILLAGE=MAILLAGE,
                     AFFE=_F(TOUT='OUI',
                             PHENOMENE='THERMIQUE',
                             MODELISATION='AXIS',),);

MAILLAGE=MODI_MAILLAGE(reuse =MAILLAGE,
                       MAILLAGE=MAILLAGE,
                       ORIE_PEAU_2D=_F(GROUP_MA=('BORD_GAU','BORD_SUP',),),);

#
# 3. DEFINITION DU CHAMP THETA ET DE SON GRADIENT AUX NOEUDS

THETA=CALC_THETA(OPTION='BANDE',
                 MODELE=MOD_MECA,
                 THETA_BANDE=_F(MODULE=1.0,
                                R_INF=2.0,
                                R_SUP=6.0,),
                 GRAD_NOEU_THETA='OUI',);

#
# 4. DEFINITION ET MISE EN PLACE DES MATERIAUX

ACIER=DEFI_MATERIAU(ELAS=_F(E=200000.,
                            NU=0.30,
                            ALPHA=15.E-6,),
                    THER=_F(LAMBDA=500.,
                            RHO_CP=1.,),);

#

CH_MATE=AFFE_MATERIAU(MAILLAGE=MAILLAGE,
                      AFFE=_F(TOUT='OUI',
                              MATER=ACIER,),);

#
# 5. LA THERMIQUE
#
# 5.1. LES CHARGEMENTS
# 5.1.1. FLUX PARALLELE A THETA

CH_THE_1=AFFE_CHAR_THER(MODELE=MOD_THER,
                        TEMP_IMPO=_F(GROUP_MA='BORD_SUP',
                                     TEMP=200.0,),
                        FLUX_REP=_F(GROUP_MA='BORD_GAU',
                                    FLUN=100000.0000,),
                        SOURCE=_F(GROUP_MA='SOURCE',
                                  SOUR=20000.,),);

#
# 5.1.2. FLUX PERPENDICULAIRE A THETA

CH_THE_2=AFFE_CHAR_THER(MODELE=MOD_THER,
                        TEMP_IMPO=_F(GROUP_MA='BORD_SUP',
                                     TEMP=200.0,),
                        FLUX_REP=_F(GROUP_MA='BORD_INF',
                                    FLUN=100000.0000,),);

#
# 5.2. LES RESOLUTIONS
# 5.2.1. EN TRANSITOIRE

RE_THE_1=THER_LINEAIRE(MODELE=MOD_THER,
                       CHAM_MATER=CH_MATE,
                       EXCIT=_F(CHARGE=CH_THE_1,),
                       INCREMENT=_F(LIST_INST=LIST_INS,),
                       ETAT_INIT=_F(STATIONNAIRE='OUI',),
                       SENSIBILITE=THETA,);


CALC_SENSI(reuse =RE_THE_1, RESULTAT=RE_THE_1, SENSIBILITE=THETA,
                 OPTION=('DETE_ELNO','DETE_NOEU'),);

#
# 5.2.2. EN STATIONNAIRE

RE_THE_2=THER_LINEAIRE(MODELE=MOD_THER,
                       CHAM_MATER=CH_MATE,
                       EXCIT=_F(CHARGE=CH_THE_2,),
                       SENSIBILITE=THETA,);


CALC_SENSI(reuse =RE_THE_2, RESULTAT=RE_THE_2, SENSIBILITE=THETA,
                 OPTION=('DETE_ELNO','DETE_NOEU'),);

#
# 5.3. TESTS DES RESULTATS SUR LES DERIVEES EULERIENNES

TEST_RESU(RESU=(_F(RESULTAT=RE_THE_1,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='TEMP',
                   NOM_CMP='TEMP',
                   GROUP_NO='TEST',
                   VALE = 2.03484E+01,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_THE_1,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='DETE_NOEU',
                   NOM_CMP='TEMP',
                   GROUP_NO='TEST',
                   VALE = 3.13361E+01,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_THE_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=0,
                   NOM_CHAM='TEMP',
                   NOM_CMP='TEMP',
                   GROUP_NO='TEST',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_THE_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=0,
                   NOM_CHAM='DETE_NOEU',
                   NOM_CMP='TEMP',
                   GROUP_NO='TEST',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),),);

#
# 6. LA MECANIQUE
# 6.1. LES CHARGEMENTS
# 6.1.1. PRESSION PARALLELE A THETA

CH_MEC_1=AFFE_CHAR_MECA(MODELE=MOD_MECA,
                        DDL_IMPO=_F(GROUP_NO='ORIGINE',
                                    DY=0.,),
                        FACE_IMPO=_F(GROUP_MA='BORD_DRO',
                                     DNOR=0.,),
                        PRES_REP=_F(GROUP_MA='BORD_GAU',
                                    PRES=10000.,),);

#
# 6.1.2. PRESSION PERPENDICULAIRE A THETA

CH_MEC_2=AFFE_CHAR_MECA(MODELE=MOD_MECA,
                        DDL_IMPO=_F(GROUP_NO='ORIGINE',
                                    DX=0.,),
                        FACE_IMPO=_F(GROUP_MA='BORD_INF',
                                     DNOR=0.,),
                        PRES_REP=_F(GROUP_MA='BORD_SUP',
                                    PRES=10000.,),);

#
# 6.2. LES RESOLUTIONS
# 6.2.1. EN TRANSITOIRE

CH_MATM1=AFFE_MATERIAU(MAILLAGE=MAILLAGE,
                       AFFE=_F(TOUT='OUI',
                               MATER=ACIER,),
                       AFFE_VARC=_F(TOUT='OUI',
                                    NOM_VARC='TEMP',
                                    EVOL=RE_THE_1,
                                    VALE_REF=20.,),);

RE_MEC_1=MECA_STATIQUE(MODELE=MOD_MECA,
                       CHAM_MATER=CH_MATM1,
                       EXCIT=_F(CHARGE=CH_MEC_1,),
                       LIST_INST=LIST_INS,
                       SENSIBILITE=THETA,);

#CALC_CHAMP(reuse =RE_MEC_1, RESULTAT=RE_MEC_1, OPTION=('SIEF_ELGA',),)

CALC_SENSI(reuse =RE_MEC_1, RESULTAT=RE_MEC_1, SENSIBILITE=THETA,
                 OPTION=('DEDE_ELNO','SIEF_ELGA','DESI_ELNO','DEDE_NOEU','DESI_NOEU',),);

#
# 6.2.2. EN STATIONNAIRE

CH_MATM2=AFFE_MATERIAU(MAILLAGE=MAILLAGE,
                       AFFE=_F(TOUT='OUI',
                               MATER=ACIER,),
                       AFFE_VARC=_F(TOUT='OUI',
                                    NOM_VARC='TEMP',
                                    EVOL=RE_THE_2,
                                    VALE_REF=20.,),);

RE_MEC_2=MECA_STATIQUE(MODELE=MOD_MECA,
                       CHAM_MATER=CH_MATM2,
                       EXCIT=_F(CHARGE=CH_MEC_2,),
                       SENSIBILITE=THETA,);


#CALC_CHAMP(reuse =RE_MEC_2,RESULTAT=RE_MEC_2, OPTION=('SIEF_ELGA',))

CALC_SENSI(reuse =RE_MEC_2, RESULTAT=RE_MEC_2, SENSIBILITE=THETA,
                 OPTION=('DEDE_ELNO','SIEF_ELGA','DESI_ELNO','DEDE_NOEU','DESI_NOEU',),);

#
# 6.3. TESTS DES RESULTATS SUR LES DERIVEES EULERIENNES

TEST_RESU(RESU=(
                _F(RESULTAT=RE_MEC_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEDE_ELNO',
                   NOM_CMP='DX',
                   MAILLE='MA29',
                   NOEUD='NO1',
                   VALE=-6.85809e-02,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='DESI_ELNO',
                   NOM_CMP='SIYY',
                   MAILLE='MA29',
                   NOEUD='NO1',
                   VALE=2768.79,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_THE_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=0,
                   NOM_CHAM='DETE_ELNO',
                   NOM_CMP='TEMP',
                   MAILLE='MA29',
                   NOEUD='NO1',
                   VALE=(0.,0.),
                   CRITERE='ABSOLU',
                   PRECISION=1e-12,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_1,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=2,
                   NOM_CHAM='DEDE_NOEU',
                   NOM_CMP='DX',
                   GROUP_NO='TEST',
                   VALE=0.04639904,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_1,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=2,
                   NOM_CHAM='DEDE_NOEU',
                   NOM_CMP='DY',
                   GROUP_NO='TEST',
                   VALE=0.002842913,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_1,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=2,
                   NOM_CHAM='DESI_NOEU',
                   NOM_CMP='SIXX',
                   GROUP_NO='TEST',
                   VALE=-2562.515,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_1,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=2,
                   NOM_CHAM='DESI_NOEU',
                   NOM_CMP='SIYY',
                   GROUP_NO='TEST',
                   VALE = -7.896569E+00,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_1,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=2,
                   NOM_CHAM='DESI_NOEU',
                   NOM_CMP='SIXY',
                   GROUP_NO='TEST',
                   VALE = 2.999038E+00,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_1,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=2,
                   NOM_CHAM='DESI_NOEU',
                   NOM_CMP='SIZZ',
                   GROUP_NO='TEST',
                   VALE=1568.869,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEDE_NOEU',
                   NOM_CMP='DX',
                   GROUP_NO='TEST',
                   VALE=-0.00339062,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEDE_NOEU',
                   NOM_CMP='DY',
                   GROUP_NO='TEST',
                   VALE=0.0001881595,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='DESI_NOEU',
                   NOM_CMP='SIXX',
                   GROUP_NO='TEST',
                   VALE=-240.7831,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='DESI_NOEU',
                   NOM_CMP='SIYY',
                   GROUP_NO='TEST',
                   VALE=60.70897,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='DESI_NOEU',
                   NOM_CMP='SIXY',
                   GROUP_NO='TEST',
                   VALE=102.9897,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RE_MEC_2,
                   SENSIBILITE=THETA,
                   NUME_ORDRE=1,
                   NOM_CHAM='DESI_NOEU',
                   NOM_CMP='SIZZ',
                   GROUP_NO='TEST',
                   VALE=-222.3308,
                   CRITERE='RELATIF',
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',),),);

#
# 7. FIN

FIN();

#

