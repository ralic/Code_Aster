# ======================================================================
# COPYRIGHT (C) 1991 - 2016  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# MODELISATION B : DKT

DEBUT(CODE=_F(NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

MeshLin0=LIRE_MAILLAGE(FORMAT='MED',UNITE=20,)

# definition d'un group_ma sur lequel on fera le calcul de ferraillage :
MeshLin0=DEFI_GROUP( reuse=MeshLin0, MAILLAGE=MeshLin0,
     CREA_GROUP_MA=_F(  NOM = 'CALCFER',
                   MAILLE = ( 'M1113', 'M1115', 'M1173', 'M1373', 'M1391',
                              'M462', 'M516', 'M562',),
                 ))
# Type de calcul

MeshLin=CREA_MAILLAGE(MAILLAGE=MeshLin0,
    CREA_POI1=(
        _F(NOM_GROUP_MA='BASEN',   GROUP_NO='BASEN', ),
    ),
)


FEMLin=AFFE_MODELE(MAILLAGE=MeshLin,
                   AFFE=(_F(GROUP_MA=('COTEX','COTEX1','COTEY1','COTEY','BASE',),
                            PHENOMENE='MECANIQUE',
                            MODELISATION='DKT',),
                         _F(GROUP_MA='BASEN',
                            PHENOMENE='MECANIQUE',
                            MODELISATION='DIS_T',),),);

# Caracteristiques de Materiaux
beton=DEFI_MATERIAU(ELAS=_F(E=3.0E10,
                            NU=0.15,
                            RHO=2500.0,),);

# Association des materiaux au modele
Mat=AFFE_MATERIAU(MAILLAGE=MeshLin,
                  MODELE=FEMLin,
                  AFFE=_F(TOUT='OUI',
                          MATER=beton,),);

# Proprietes autres (notamment raideur de sol)
AFFECARA=AFFE_CARA_ELEM(MODELE=FEMLin,
                        COQUE=(_F(GROUP_MA='BASE',
                                  EPAIS=0.4,
                                  ANGL_REP=(0.0,0.0,),),
                               _F(GROUP_MA='COTEX',
                                  EPAIS=0.4,
                                  ANGL_REP=(90.0,0.0,),),
                               _F(GROUP_MA='COTEY',
                                  EPAIS=0.4,
                                  ANGL_REP=(0.0,0.0,),),
                               _F(GROUP_MA='COTEY1',
                                  EPAIS=0.4,
                                  ANGL_REP=(0.0,0.0,),),
                               _F(GROUP_MA='COTEX1',
                                  EPAIS=0.4,
                                  ANGL_REP=(90.0,0.0,),),),
                        DISCRET=_F(CARA='M_T_D_N',
                                   GROUP_MA='BASEN',
                                   VALE=0.0,),
                        RIGI_PARASOL=_F(GROUP_MA='BASE',GROUP_MA_POI1='BASEN',
                                        COEF_GROUP=1.0,
                                        CARA='K_T_D_N',
                                        VALE=(5000E6,5000E6,5000E6,),
                                        COOR_CENTRE=(5.0,5.0,0.0,),),);
# Calcul de la raideur
#   raideur unitaire = 50E6 N/m3
#   surface = 10*10
#   raideur globale KZ = 50E6 * (10*10)
#   KX = KY = KZ

# gradient de Pression
eauPlus=DEFI_FONCTION(NOM_PARA='Z',VALE=(0.0,49050.0,
                            5.0,0.0,
                            ),);

# gradient de Pression
eauMoins=DEFI_FONCTION(NOM_PARA='Z',VALE=(0.0,-49050.0,
                             5.0,0.0,
                             ),);

# definition de la gravite
Grav=AFFE_CHAR_MECA(MODELE=FEMLin,
                    PESANTEUR=_F(GRAVITE=9.81, DIRECTION=(0., 0., -1.,)))

# definition de pression laterale
pressX1=AFFE_CHAR_MECA_F(MODELE=FEMLin,
                         FORCE_COQUE=_F(GROUP_MA='COTEX1',
                                        FZ=eauPlus,),);

# definition de pression laterale
pressX=AFFE_CHAR_MECA_F(MODELE=FEMLin,
                        FORCE_COQUE=_F(GROUP_MA='COTEX',
                                       FZ=eauMoins,),);

# definition de pression laterale
pressY1=AFFE_CHAR_MECA_F(MODELE=FEMLin,
                         FORCE_COQUE=_F(GROUP_MA='COTEY1',
                                        FZ=eauPlus,),);

# definition de pression laterale
pressY=AFFE_CHAR_MECA_F(MODELE=FEMLin,
                        FORCE_COQUE=_F(GROUP_MA='COTEY',
                                       FZ=eauMoins,),);

# definition de pression verticale
pressRep=AFFE_CHAR_MECA(MODELE=FEMLin,
                        PRES_REP=_F(GROUP_MA='BASE',
                                    PRES=49050.0,),);

# definition de forces nodales sur contour haut
surchrep=AFFE_CHAR_MECA(MODELE=FEMLin,
                        FORCE_NODALE=_F(GROUP_NO='DESSUSN',
                                        FZ=-9523.8,),);



# Calcul des efforts :

Solution=MECA_STATIQUE(MODELE=FEMLin,
                       CHAM_MATER=Mat,
                       CARA_ELEM=AFFECARA,
                       EXCIT=(_F(CHARGE=pressY,),
                              _F(CHARGE=pressY1,),
                              _F(CHARGE=pressX,),
                              _F(CHARGE=pressX1,),
                              _F(CHARGE=pressRep,),
                              _F(CHARGE=Grav,),
                              _F(CHARGE=surchrep,),),);

# calculs elementaires, en complement de resultats
Solution=CALC_CHAMP(reuse=Solution,RESULTAT=Solution,CONTRAINTE=('EFGE_ELNO','SIGM_ELNO'))


# calculs supplementaires pour le ferraillage
Solution=CALC_FERRAILLAGE(reuse =Solution,
                   RESULTAT=Solution,
                   TYPE_COMB='ELS',
                   INST=(0.),
                   AFFE  = (
                      _F( GROUP_MA='CALCFER',      ENROBG=0.04, CEQUI=15.E0, SIGM_ACIER=2.3E8, SIGM_BETON=3.5E7),
                      # l'affectation ci-dessous permet de verifier l'usage du mot cle AFFE/MAILLE
                      _F( MAILLE=('M596','M686'),  ENROBG=0.04, CEQUI=15.E0, SIGM_ACIER=2.3E8, SIGM_BETON=3.5E7),
                   ));

#IMPR_RESU(RESU=_F(RESULTAT=Solution, NOM_CHAM='FERRAILLAGE'));


#--------------------------------------------------------------------------------------------
# Tests de validation (source externe) :
#----------------------------------------

# nom du point de mesure, nom de la maille, coordonnees du centre de gravite :
#  BC : 'M1115'     7.75, 7.25, 0.0
#  BSO: 'M686'      5.25, 5.25, 0.0
#  BSE: 'M1391'     9.75, 5.25, 0.0
#  BNO: 'M462'      5.25, 9.75, 0.0
#  BNE: 'M596'      9.75, 9.75, 0.0
#
#  VC : 'M562'      10.0, 6.75, 2.25
#  VBN: 'M1113'     10.0, 9.75, 0.25
#  VBS: 'M1373'     10.0, 5.25, 0.25
#  VHN: 'M516'      10.0, 9.75, 4.75
#  VHS: 'M1173'     10.0, 5.25, 4.75

TEST_RESU(RESU=(_F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 5.15023674E-04,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=5.9999999999999995E-4,
                   MAILLE='M1115',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 0.00000000E+00,
                   VALE_REFE=5.9999999999999995E-4,
                   CRITERE='ABSOLU',
                   PRECISION=6.9999999999999999E-4,
                   MAILLE='M1115',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC= 4.61826282E-04,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=5.0000000000000001E-4,
                   MAILLE='M1115',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC= 0.00000000E+00,
                   VALE_REFE=5.0000000000000001E-4,
                   CRITERE='ABSOLU',
                   PRECISION=5.9999999999999995E-4,
                   MAILLE='M1115',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 0.00000000E+00,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.0000000000000001E-05,
                   MAILLE='M686',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 1.03041409E-04,
                   VALE_REFE=2.9999999999999997E-4,
                   CRITERE='ABSOLU',
                   PRECISION=2.5000000000000001E-4,
                   MAILLE='M686',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC= 0.00000000E+00,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.0000000000000001E-05,
                   MAILLE='M686',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC= 1.06275540E-04,
                   VALE_REFE=2.9999999999999997E-4,
                   CRITERE='ABSOLU',
                   PRECISION=2.3000000000000001E-4,
                   MAILLE='M686',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 2.13519145E-04,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=2.9999999999999997E-4,
                   MAILLE='M1391',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 1.10849074E-04,
                   VALE_REFE=5.9999999999999995E-4,
                   CRITERE='ABSOLU',
                   PRECISION=5.0000000000000001E-4,
                   MAILLE='M1391',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC= 1.27869075E-04,
                   VALE_REFE=1.E-4,
                   CRITERE='ABSOLU',
                   PRECISION=6.0000000000000002E-05,
                   MAILLE='M1391',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC= 2.09621607E-04,
                   VALE_REFE=2.0000000000000001E-4,
                   CRITERE='ABSOLU',
                   PRECISION=3.0000000000000001E-05,
                   MAILLE='M1391',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 1.04156842E-04,
                   VALE_REFE=1.E-4,
                   CRITERE='ABSOLU',
                   PRECISION=6.0000000000000002E-05,
                   MAILLE='M462',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 1.68997293E-04,
                   VALE_REFE=2.0000000000000001E-4,
                   CRITERE='ABSOLU',
                   PRECISION=3.4999999999999997E-05,
                   MAILLE='M462',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC= 2.37231379E-04,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=2.9999999999999997E-4,
                   MAILLE='M462',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC= 1.51473388E-04,
                   VALE_REFE=4.0000000000000002E-4,
                   CRITERE='ABSOLU',
                   PRECISION=2.9999999999999997E-4,
                   MAILLE='M462',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 2.29485395E-04,
                   VALE_REFE=2.9999999999999997E-4,
                   CRITERE='ABSOLU',
                   PRECISION=7.1000000000000005E-05,
                   MAILLE='M596',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 2.23431296E-04,
                   VALE_REFE=1.E-4,
                   CRITERE='ABSOLU',
                   PRECISION=2.0000000000000001E-4,
                   MAILLE='M596',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC= 2.65482391E-04,
                   VALE_REFE=2.0000000000000001E-4,
                   CRITERE='ABSOLU',
                   PRECISION=6.9999999999999994E-05,
                   MAILLE='M596',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC= 2.45618729E-04,
                   VALE_REFE=2.0000000000000001E-4,
                   CRITERE='ABSOLU',
                   PRECISION=6.9999999999999994E-05,
                   MAILLE='M596',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 8.46062562E-05,
                   VALE_REFE=1.E-4,
                   CRITERE='ABSOLU',
                   PRECISION=2.0000000000000002E-05,
                   MAILLE='M562',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 2.03911299E-05,
                   VALE_REFE=5.9999999999999995E-4,
                   CRITERE='ABSOLU',
                   PRECISION=5.9999999999999995E-4,
                   MAILLE='M562',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC= 1.06701666E-04,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.4999999999999999E-4,
                   MAILLE='M562',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC= 1.23786400E-04,
                   VALE_REFE=4.0000000000000002E-4,
                   CRITERE='ABSOLU',
                   PRECISION=2.9999999999999997E-4,
                   MAILLE='M562',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 1.25941974E-05,
                   VALE_REFE=2.0000000000000001E-4,
                   CRITERE='ABSOLU',
                   PRECISION=1.9000000000000001E-4,
                   MAILLE='M1113',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 7.14523933E-05,
                   VALE_REFE=1.E-4,
                   CRITERE='ABSOLU',
                   PRECISION=4.0E-05,
                   MAILLE='M1113',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC= 1.29012055E-04,
                   VALE_REFE=2.0E-4,
                   CRITERE='ABSOLU',
                   PRECISION=8.0E-05,
                   MAILLE='M1113',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC= 0.0E+00,
                   VALE_REFE=2.9999999999999997E-4,
                   CRITERE='ABSOLU',
                   PRECISION=4.0E-4,
                   MAILLE='M1113',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 1.53423139E-04,
                   VALE_REFE=1.E-4,
                   CRITERE='ABSOLU',
                   PRECISION=6.0E-05,
                   MAILLE='M1373',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 7.00705552E-06,
                   VALE_REFE=1.E-4,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,
                   MAILLE='M1373',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC= 2.88673836E-04,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=2.9999999999999997E-4,
                   MAILLE='M1373',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC= 1.08478712E-04,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=2.0E-4,
                   MAILLE='M1373',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 0.00000000E+00,
                   VALE_REFE=1.5E-3,
                   CRITERE='ABSOLU',
                   PRECISION=2.E-3,
                   MAILLE='M516',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 5.67845795E-05,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=6.0E-05,
                   MAILLE='M516',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC= 0.0E+00,
                   VALE_REFE=1.E-4,
                   CRITERE='ABSOLU',
                   PRECISION=1.5E-4,
                   MAILLE='M516',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC= 0.00000000E+00,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.0000000000000001E-05,
                   MAILLE='M516',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXI',
                   VALE_CALC= 1.15061950E-04,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.5E-4,
                   MAILLE='M1173',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSXS',
                   VALE_CALC= 1.29845533E-04,
                   VALE_REFE=8.9999999999999998E-4,
                   CRITERE='ABSOLU',
                   PRECISION=8.0E-4,
                   MAILLE='M1173',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYI',
                   VALE_CALC=0.0E+00,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.0E-05,
                   MAILLE='M1173',),
                _F(INST=0.0,
                   REFERENCE='SOURCE_EXTERNE',
                   POINT=1,
                   RESULTAT=Solution,
                   NOM_CHAM='FERRAILLAGE',
                   NOM_CMP='DNSYS',
                   VALE_CALC=0.0E+00,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.0E-05,
                   MAILLE='M1173',),
                ),
          )

# Pour tester que l'on sait recuperer le champ des "max" temporels:
FERMAX=CREA_CHAMP(  OPERATION='EXTR', TYPE_CHAM='ELEM_FER2_R', INFO=1,
                     NOM_CHAM='FERRAILLAGE', RESULTAT=Solution,
                     TYPE_MAXI='MAXI_ABS', TYPE_RESU='VALE',
                        )
TEST_RESU(CHAM_ELEM=(_F(CRITERE='RELATIF',
                        POINT=1,
                        NOM_CMP='DNSXI',
                        MAILLE='M1115',
                        CHAM_GD=FERMAX,
                        VALE_CALC=5.1502367387158004E-4,),
                     _F(CRITERE='ABSOLU',
                        POINT=1,
                        NOM_CMP='DNSXS',
                        MAILLE='M1115',
                        CHAM_GD=FERMAX,
                        VALE_CALC=0.0,),
                     _F(CRITERE='RELATIF',
                        POINT=1,
                        NOM_CMP='DNSYI',
                        MAILLE='M1115',
                        CHAM_GD=FERMAX,
                        VALE_CALC=4.6182628235905002E-4,),
                     _F(CRITERE='ABSOLU',
                        POINT=1,
                        NOM_CMP='DNSYS',
                        MAILLE='M1115',
                        CHAM_GD=FERMAX,
                        VALE_CALC=0.0,),
                     ),
          )

FIN();
