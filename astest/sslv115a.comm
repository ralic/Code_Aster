# MODIF  DATE 12/07/2010   AUTEUR BERARD A.BERARD 
# TITRE ELEMENT DE BETON PRECONTRAINT EN COMPRESSION ET PESANTEUR
# sslv115a.para = tps_job 60 mem_job 400Mo mem_aster 20 ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F(NOM='SSLV115A', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

MAILLAGE=LIRE_MAILLAGE(UNITE=20,);

MAILLAGE=DEFI_GROUP(reuse =MAILLAGE,
                    MAILLAGE=MAILLAGE,
                    CREA_GROUP_NO=_F(TOUT_GROUP_MA='OUI',),);

MAILLAGE = DEFI_GROUP( reuse=MAILLAGE, MAILLAGE=MAILLAGE, INFO=2,
                CREA_GROUP_MA= _F( NOM = 'TOUT',
                                   TOUT = 'OUI', ),
                CREA_GROUP_NO=(_F( NOM = 'GRNO1',
                                   OPTION = 'TUNNEL',
                                   GROUP_MA = 'VOILE',
                                   GROUP_MA_AXE = 'CABLE001',
#                                   NOEUD_ORIG = 'NC001001',
                                   RAYON = 3. ,
                                 ),
                               _F( NOM = 'GRNO2',
                                   OPTION = 'TUNNEL',
                                   MAILLE = 'TOTO1',
                                   MAILLE_AXE = ('SG001001','SG001002'),
                                   GROUP_NO_ORIG = 'NC1',
                                   LONGUEUR = 0.75 ,
                                   RAYON = 3. ,
                                 ),
                               _F( NOM = 'TOUT',
                                   GROUP_MA = 'TOUT',
                                 ),
                               ),
               ) ;

MODELE=AFFE_MODELE(AFFE=(_F(GROUP_MA='VOILE',
                            PHENOMENE='MECANIQUE',
                            MODELISATION='3D',),
                         _F(GROUP_MA='CABLE001',
                            PHENOMENE='MECANIQUE',
                            MODELISATION='BARRE',),),
                   MAILLAGE=MAILLAGE,);

CARAELEM=AFFE_CARA_ELEM(MODELE=MODELE,
                        BARRE=_F(SECTION='GENERALE',
                                 GROUP_MA='CABLE001',
                                 CARA=('A'),
                                 VALE=(0.00015),),);

BETON=DEFI_MATERIAU(BPEL_BETON=_F(),
                    THER=_F(LAMBDA=1.00,RHO_CP=1),
                    ELAS=_F(NU=0.0,
                            ALPHA=1.E-05,
                            RHO=3.0,
                            E=3.E10,),);

ACIER=DEFI_MATERIAU(BPEL_ACIER=_F(FROT_LINE=0.0,
                                  F_PRG=1.770000000E9,
                                  FROT_COURB=0.0,),
                    ELAS=_F(NU=0.0,
                            RHO=2.E4,
                            ALPHA=1.E-05,
                            E=2.10000000000E11,),);

CHMATER=AFFE_MATERIAU(AFFE=(_F(MATER=BETON,
                               GROUP_MA='VOILE',),
                            _F(MATER=ACIER,
                               GROUP_MA='CABLE001',),),
                      MAILLAGE=MAILLAGE,);

CABLEPR=DEFI_CABLE_BP(CHAM_MATER=CHMATER,
                      MODELE=MODELE,
                      DEFI_CABLE=_F(NOEUD_ANCRAGE=('NC001001','NC001005'),
                                    GROUP_MA='CABLE001',),
                      TYPE_ANCRAGE=('ACTIF','ACTIF'),
                      GROUP_MA_BETON='VOILE',
                      TENSION_INIT=2.E5,
                      RECUL_ANCRAGE=0.0,
                      CARA_ELEM=CARAELEM,
                      INFO=1,);

CHARMECA=AFFE_CHAR_MECA(MODELE=MODELE,
                        DDL_IMPO=(_F(NOEUD='NB001001',
                                     DY=0.0,),
                                  _F(DX=0.0,
                                     GROUP_NO='VGAUCH',),
                                  _F(DZ=0.0,
                                     GROUP_NO='VINF',),),)

CHARMEZ=AFFE_CHAR_MECA(MODELE=MODELE,
                       PESANTEUR=_F(GRAVITE=10.0,
                                    DIRECTION=(0.0,0.0,-1.0),),);

CHARMEX=AFFE_CHAR_MECA(MODELE=MODELE,
                       PESANTEUR=_F(GRAVITE=10.0,
                                    DIRECTION=(-1.0,0.0,0.0),),);

LINST=DEFI_LIST_REEL(VALE=(0.0,1.0),);

EVOLNOLI=CALC_PRECONT( CHAM_MATER=CHMATER,
                       MODELE=MODELE,
                       CONVERGENCE=_F(ITER_GLOB_MAXI=10,
                                      RESI_GLOB_RELA=1.E-05,),
                       COMP_INCR=_F(TOUT='OUI',
                                    RELATION='ELAS',
                                    DEFORMATION='PETIT',),
                       INCREMENT=_F(LIST_INST=LINST,),
                       CARA_ELEM=CARAELEM,
                       SOLVEUR=_F(METHODE='MULT_FRONT',),
                       EXCIT=(
                              _F(CHARGE=CHARMECA,),
                              _F(CHARGE=CHARMEZ,
                                 ),),
                       CABLE_BP=( CABLEPR ,),
                       INFO=2,);

EVOLNOLI=CALC_NO(reuse =EVOLNOLI,
                 OPTION='REAC_NODA',
                 RESULTAT=EVOLNOLI,);


EVOLNO2=CALC_PRECONT(CHAM_MATER=CHMATER,
                      MODELE=MODELE,
                      CONVERGENCE=_F(ITER_GLOB_MAXI=10,
                                     RESI_GLOB_RELA=1.E-05,),
                      COMP_INCR=_F(TOUT='OUI',
                                   RELATION='ELAS',
                                   DEFORMATION='PETIT',),
                      INCREMENT=_F(LIST_INST=LINST,),
                      CARA_ELEM=CARAELEM,
                      SOLVEUR=_F(METHODE='MULT_FRONT',),
                      EXCIT=(
                           _F(CHARGE=CHARMECA,),
                             _F(CHARGE=CHARMEX,
                                ),),
                       CABLE_BP=( CABLEPR ,),
                      INFO=2,);

EVOLNO2=CALC_NO(reuse =EVOLNO2,
                OPTION='REAC_NODA',
                RESULTAT=EVOLNO2,);

FORC_DZ=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                                INTITULE='FORCDZ',
                                GROUP_NO=('VOILE','CABLE001'),
                                NOM_CMP='DZ',
                                RESULTAT=EVOLNOLI,
                                NOM_CHAM='REAC_NODA',),);

FORC2_DZ=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                                 INTITULE='FORCDZ',
                                 GROUP_NO=('VOILE','CABLE001'),
                                 RESULTANTE='DZ',
                                 RESULTAT=EVOLNOLI,
                                 NOM_CHAM='REAC_NODA',),);

FORC2_DX=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                                 INTITULE='FORCDX',
                                 GROUP_NO=('VOILE','CABLE001'),
                                 RESULTANTE='DX',
                                 RESULTAT=EVOLNO2,
                                 NOM_CHAM='REAC_NODA',),);

DEPL_DZ=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                                INTITULE='DEPLDZ',
                                GROUP_NO=('VOILE','CABLE001'),
                                NOM_CMP='DZ',
                                RESULTAT=EVOLNOLI,
                                NOM_CHAM='DEPL',),);

IMPR_TABLE(TABLE=FORC2_DZ,);

IMPR_TABLE(TABLE=FORC2_DX,);

TEST_TABLE(TABLE=FORC2_DZ,
           NOM_PARA='DZ',
           VALE=132.0,);

TEST_TABLE(TABLE=FORC2_DX,
           NOM_PARA='DX',
           VALE=132.0,);



# CALCUL THERMOMECANIQUE

MODTHER1=AFFE_MODELE(MAILLAGE=MAILLAGE,
                    AFFE=(_F(TOUT='OUI',
                             PHENOMENE='THERMIQUE',
                             MODELISATION='3D',),
                          ),);

CHTHER=AFFE_CHAR_THER(MODELE=MODTHER1,
                      TEMP_IMPO=_F(GROUP_MA='VOILE',
                                   TEMP=100,),);

TEMPE1=THER_LINEAIRE(MODELE=MODTHER1,
                    CHAM_MATER=CHMATER,
                    INCREMENT=_F(LIST_INST=LINST,),
                    CARA_ELEM=CARAELEM,
                     ETAT_INIT=_F(VALE=0.0,),
                    EXCIT=_F(CHARGE=CHTHER,),);


TEMPE2=PROJ_CHAMP(METHODE='COLOCATION',
                   RESULTAT=TEMPE1,
                   MODELE_1=MODTHER1,
                   MODELE_2=MODELE,
                   TOUT_ORDRE='OUI',);


CHMTM=AFFE_MATERIAU(AFFE=(_F(MATER=BETON,
                               GROUP_MA='VOILE',),
                            _F(MATER=ACIER,
                               GROUP_MA='CABLE001',),),
                      AFFE_VARC=_F( TOUT='OUI',
                            EVOL=TEMPE2,
                            NOM_VARC='TEMP',VALE_REF=0.,
                            NOM_CHAM='TEMP',),
                      MAILLAGE=MAILLAGE,);

NLTT100=CALC_PRECONT( MODELE=MODELE,
                      CHAM_MATER=CHMTM,
                      CARA_ELEM=CARAELEM,
                      EXCIT=(
                             _F(CHARGE=CHARMECA,),),
                      COMP_INCR=_F(RELATION='ELAS',
                                   DEFORMATION='PETIT',
                                   TOUT='OUI',),
                      INCREMENT=_F(LIST_INST=LINST,),
                      CONVERGENCE=_F(RESI_GLOB_RELA=1.0000000000000001E-05,
                                     ITER_GLOB_MAXI=10,),
                      SOLVEUR=_F(METHODE='MULT_FRONT',),
                      CABLE_BP=( CABLEPR ,),
                      INFO=2,);

NLTT100=CALC_ELEM(reuse =NLTT100,
                   OPTION=('EPSI_ELNO_DEPL',),
                   RESULTAT=NLTT100,);

NLTT101 = MODI_REPERE (
                        RESULTAT = NLTT100,
                        NUME_ORDRE = 1,
                        MODI_CHAM = (_F(NOM_CHAM = 'SIEF_ELGA',
                                    GROUP_MA='VOILE',
                     NOM_CMP = ('SIXX','SIYY','SIZZ','SIXY','SIXZ','SIYZ'),
                      TYPE_CHAM = 'TENS_3D',),),
                                      DEFI_REPERE = _F(
                                          REPERE = 'UTILISATEUR',
                                          ANGL_NAUT = (90.,0.,0.),
                                          ),
                        INFO=2,
                        )

# POUR COMPARER AVEC lA SOLUTION SANS THERMIQUE

EVOLNOT=CALC_PRECONT( CHAM_MATER=CHMATER,
                      MODELE=MODELE,
                      CONVERGENCE=_F(ITER_GLOB_MAXI=10,
                                     RESI_GLOB_RELA=1.E-05,),
                      COMP_INCR=_F(TOUT='OUI',
                                   RELATION='ELAS',
                                   DEFORMATION='PETIT',),
                      INCREMENT=_F(LIST_INST=LINST,),
                      CARA_ELEM=CARAELEM,
                      SOLVEUR=_F(METHODE='MULT_FRONT',),
                      EXCIT=_F(CHARGE=CHARMECA,),
                      CABLE_BP=( CABLEPR ,),   )

EVOLNOT=CALC_ELEM(reuse =EVOLNOT,
                   OPTION=('SIEF_ELNO_ELGA', 'EPSI_ELNO_DEPL',),
                   RESULTAT=EVOLNOT,);


# CONTRAINTES IDENTIQUES PUISQUE DILATATION THERMIQUE LIBRE
TEST_RESU(RESU=(
         _F(    CRITERE = 'RELATIF',   PRECISION = 1.E-3, REFERENCE='NON_REGRESSION',
         RESULTAT = EVOLNOT,   NOM_CHAM = 'SIEF_ELGA',     NUME_ORDRE = 1,
         MAILLE='TOTO1',POINT=1,   NOM_CMP = 'SIXX',      VALE = -1.66521E+05     ),
         _F(    CRITERE = 'RELATIF',   PRECISION = 1.E-3, REFERENCE='NON_REGRESSION',
         RESULTAT = EVOLNOT,   NOM_CHAM = 'SIEF_ELGA',     NUME_ORDRE = 1,
         MAILLE='SG001001',POINT=1,   NOM_CMP = 'N',      VALE = 1.99825E+05     ),
         ),)

TEST_RESU(RESU=(
         _F(    CRITERE = 'RELATIF',   PRECISION = 1.E-3, REFERENCE='AUTRE_ASTER',
         RESULTAT = NLTT100,   NOM_CHAM = 'SIEF_ELGA',     NUME_ORDRE = 1,
         MAILLE='TOTO1',POINT=1,   NOM_CMP = 'SIXX',      VALE = -1.66521E+05     ),
         _F(    CRITERE = 'RELATIF',   PRECISION = 1.E-3, REFERENCE='AUTRE_ASTER',
         RESULTAT = NLTT100,   NOM_CHAM = 'SIEF_ELGA',     NUME_ORDRE = 1,
         MAILLE='SG001001',POINT=1,   NOM_CMP = 'N',      VALE = 1.99825E+05     ),
         ),)


# DEFORMATION DIFFERENTES

TEST_RESU(RESU=(
         _F(    CRITERE = 'RELATIF',   PRECISION = 1.E-3, REFERENCE='NON_REGRESSION',
         RESULTAT = EVOLNOT,   NOM_CHAM = 'EPSI_ELNO_DEPL',     NUME_ORDRE = 1,
         MAILLE='TOTO1',NOEUD='NB001001',   NOM_CMP = 'EPXX',      VALE = -5.55070E-06    ),
         ),)

TEST_RESU(RESU=(
         _F(    CRITERE = 'RELATIF',   PRECISION = 1.E-3, REFERENCE='NON_REGRESSION',
         RESULTAT = NLTT100,   NOM_CHAM = 'EPSI_ELNO_DEPL',     NUME_ORDRE = 1,
         MAILLE='TOTO1',NOEUD='NB001001',   NOM_CMP = 'EPXX',      VALE = 9.94449E-04    ),
         ),)

# -----------------------------------------------------------------------------------------------

TT = POST_RELEVE_T( ACTION=_F(  GROUP_NO = 'TOUT',
                                INTITULE = 'SIEF',
                                RESULTAT = EVOLNOT,
                                NUME_ORDRE=1,
                                NOM_CHAM='SIEF_ELNO_ELGA',
                                TOUT_CMP = 'OUI',
                                OPERATION = 'EXTRACTION')
                   )
#
TEST_TABLE( TABLE= TT ,
            FILTRE=_F(NOM_PARA='ABSC_CURV', VALE=0. ),
            REFERENCE='NON_REGRESSION',
            NOM_PARA='SIXX',
            VALE= -1.66521E+05   )
TEST_TABLE( TABLE= TT ,
            FILTRE=_F(NOM_PARA='ABSC_CURV', VALE=2. ),
            REFERENCE='NON_REGRESSION',
            NOM_PARA='SIXX',
            VALE= -1.66521E+05   )
TEST_TABLE( TABLE= TT ,
            FILTRE=_F(NOM_PARA='ABSC_CURV', VALE=2.08043E+01 ),
            REFERENCE='NON_REGRESSION',
            NOM_PARA='N',
            VALE= 2.00000E+05   )
#
IM = INTE_MAIL_3D ( MAILLAGE = MAILLAGE ,
                    INFO = 2 ,
                    DEFI_SEGMENT = _F( ORIGINE   =  ( 0. , 1. , 0.3 ),
                                       EXTREMITE =  ( 2. , 1. , 0.3 ), ) , )

TC = POST_RELEVE_T( ACTION=_F(  CHEMIN = IM ,
                                INTITULE = 'SIEF',
                                RESULTAT = EVOLNOT,
                                NUME_ORDRE=1,
                                NOM_CHAM='SIEF_ELNO_ELGA',
                                TOUT_CMP = 'OUI',
                                OPERATION = 'EXTRACTION')
                   )
#
TEST_TABLE( TABLE= TC ,
            FILTRE=_F(NOM_PARA='ABSC_CURV', VALE=0. ),
            REFERENCE='NON_REGRESSION',
            NOM_PARA='SIXX',
            VALE= -1.66521E+05   )
TEST_TABLE( TABLE= TC ,
            FILTRE=_F(NOM_PARA='ABSC_CURV', VALE=2. ),
            REFERENCE='NON_REGRESSION',
            NOM_PARA='SIXX',
            VALE= -1.66521E+05   )
TEST_TABLE( TABLE= TC ,
            FILTRE=_F(NOM_PARA='ABSC_CURV', VALE=0. ),
            REFERENCE='NON_REGRESSION',
            CRITERE='ABSOLU',
            NOM_PARA='N',
            VALE= 0.   )
TEST_TABLE( TABLE= TC ,
            FILTRE=_F(NOM_PARA='ABSC_CURV', VALE=2. ),
            REFERENCE='NON_REGRESSION',
            CRITERE='ABSOLU',
            NOM_PARA='N',
            VALE= 0.   )

FIN();
