# MODIF  DATE 29/04/2004   AUTEUR JMBHH01 J.M.PROIX 
# TITRE COMPARAISON POLY_CFC ET MONOCRISTAL. MOD A : POLY_CFC
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2004  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================


DEBUT(CODE=_F(NOM='SSNV171A',NIV_PUB_WEB='INTERNET',),);

CUBE=LIRE_MAILLAGE();

TROISD=AFFE_MODELE(MAILLAGE=CUBE,
                   AFFE=_F(TOUT='OUI',
                           PHENOMENE='MECANIQUE',
                           MODELISATION='3D',),);

TFIN=1.5;
NUMFIN=101


LINST=DEFI_LIST_REEL(DEBUT=0.0,
                     INTERVALLE=(_F(JUSQU_A=0.87,
                                    NOMBRE=1,),
                                 _F(JUSQU_A=TFIN,
                                    NOMBRE=100,),),);

TEXTURE=DEFI_TEXTURE(SYST_GLISSEMENT=(_F(N=(1.0,1.0,1.0,1.0,1.0,1.0,-1.0,-1.0,-1.0,-1.0,-1.0,-1.0,),
                                         L=(-1.0,0.0,-1.0,-1.0,0.0,1.0,0.0,1.0,1.0,-1.0,1.0,0.0,),),
                                      _F(N=(1.0,1.0,1.0,-1.0,-1.0,-1.0,1.0,1.0,1.0,-1.0,-1.0,-1.0,),
                                         L=(0.0,-1.0,1.0,0.0,1.0,1.0,-1.0,1.0,0.0,1.0,0.0,1.0,),),
                                      _F(N=(1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,),
                                         L=(1.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,1.0,),),),
                     PLAN=(_F(ANGL_NAUT=(30.0,0.0,0.0,),
                              PROPORTION=1.0,),),
                     TITRE=' DEFINITION DE LA TEXTURE ',);

IMPR_TABLE(TABLE=TEXTURE)

ACIER=DEFI_MATERIAU(ELAS=_F(E=145200.0,
                            NU=0.3,
                            ALPHA=0.0,),
                    POLY_CFC=_F(TEXTURE=TEXTURE,
                                DL=0.,
                                DA=0.,
                                N=10.0,
                                K=40.0,
                                TAU_0=75.5,
                                B1=19.34,
                                HL=0.,
                                Q1=9.77,
                                Q2=-33.27,
                                B2=5.345,
                             ##   C1=6333.0,
                                C1=0.00001,
                                D1=36.68,
                                C2=0,),);

COEF=DEFI_FONCTION(NOM_PARA='INST',
                   VALE=(0.0,0.0,1.0,1.0,),
                   PROL_DROITE='LINEAIRE',
                   PROL_GAUCHE='LINEAIRE',);

MAT=AFFE_MATERIAU(MAILLAGE=CUBE,
                  AFFE=_F(TOUT='OUI',
                          MATER=ACIER,),);

TRAC=AFFE_CHAR_MECA(MODELE=TROISD,
                    DDL_IMPO=(_F(NOEUD='NO4',
                                 DX=0.0,
                                 DY=0.0,),
                              _F(NOEUD='NO8',
                                 DX=0.0,
                                 DY=0.0,
                                 DZ=0.0,),
                              _F(NOEUD='NO2',
                                 DX=0.0,),
                              _F(NOEUD='NO6',
                                 DX=0.0,),),
                    FORCE_NODALE=(_F(NOEUD=('NO3','NO7',),
                                     FX=35.0,),
                                  _F(NOEUD=('NO1','NO5',),
                                     FX=35.0,),),);

SOLNL=STAT_NON_LINE(MODELE=TROISD,
                    CHAM_MATER=MAT,
                    EXCIT=_F(CHARGE=TRAC,
                             FONC_MULT=COEF,
                             TYPE_CHARGE='FIXE_CSTE',),
                    COMP_INCR=_F(RELATION='POLY_CFC',
                                 DEFORMATION='PETIT',
                                 TOUT='OUI',),
                    INCREMENT=_F(LIST_INST=LINST,NUME_INST_FIN=NUMFIN,
                                 SUBD_PAS=4,
                                 SUBD_PAS_MINI=1e-06,),
                    NEWTON=_F(PREDICTION='EXTRAPOL',
                              MATRICE='ELASTIQUE',
                              REAC_ITER=0,),
                    CONVERGENCE=_F(RESI_GLOB_RELA=1e-06,
                                   ITER_GLOB_MAXI=100,
                                   RESI_INTE_RELA=1e-06,
                                   ITER_INTE_MAXI=100,
                                   ITER_INTE_PAS=-4,
                                   RESO_INTE='RUNGE_KUTTA_2',),);

SOLNL=CALC_ELEM(reuse =SOLNL,
                MODELE=TROISD,
                CHAM_MATER=MAT,
                RESULTAT=SOLNL,
                OPTION=('EPSI_ELGA_DEPL','EPSP_ELGA'));

TEST_RESU(RESU=(_F(RESULTAT=SOLNL,
                   INST=TFIN,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='SIXX',
                   MAILLE='MA1',
                   POINT=1,
                   VALE=-2.1E+02 ,
                   REFERENCE='ANALYTIQUE',
                   ),
                _F(RESULTAT=SOLNL,
                   INST=TFIN,
                   NOM_CHAM='EPSI_ELGA_DEPL',
                   NOM_CMP='EPXX',
                   MAILLE='MA1',
                   POINT=1,
                   REFERENCE='NON_REGRESSION',
                   VALE=-1.8955E-03,),
                _F(RESULTAT=SOLNL,
                   INST=TFIN,
                   NOM_CHAM='EPSI_ELGA_DEPL',
                   NOM_CMP='EPYY',
                   MAILLE='MA1',
                   POINT=1,
                   REFERENCE='NON_REGRESSION',
                   VALE=5.03377E-04 ,),
                _F(RESULTAT=SOLNL,
                   INST=TFIN,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPXX',
                   MAILLE='MA1',
                   POINT=1,
                   REFERENCE='NON_REGRESSION',
                   VALE=-4.49212E-04 ,),
                _F(RESULTAT=SOLNL,
                   INST=TFIN,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPYY',
                   MAILLE='MA1',
                   POINT=1,
                   REFERENCE='NON_REGRESSION',
                   VALE=6.94934E-05,),
                   ),);

IMPR_RESU(RESU=_F(RESULTAT=SOLNL,
                  INST=TFIN,PRECISION=1e-06,
                   NOM_CHAM=('EPSI_ELGA_DEPL','SIEF_ELGA','EPSP_ELGA'),
                #  NUME_ORDRE=(1,56,57,NUMFIN),
                  ),);
FIN();
