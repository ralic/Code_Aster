
# MODIF  DATE 11/06/2012   AUTEUR PELLET J.PELLET 
# TITRE PLAQUE CARREE MINCE , LIBRE OU ENCASTREE SUR UN BORD
# sdls01a.para = tps_job 60 mem_job 64Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#CAS_TEST__: SDLS01Al
# SDLS01/A                 COMMANDES                            22/04/91
# PLAQUE CARREE MINCE  LIBRE OU ENCASTREE SUR UN BORD
# DIMENSION: 1M*1M*0.01M
# CAS 1: ENCASTREE    CAS 2: LIBRE                 REF: SFM.VPCS SDLS01
# MODELISATION DKT:  COTE AB SUR OX
#
#======================================================================

DEBUT(CODE=_F(NOM='SDLS01A', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

MA=LIRE_MAILLAGE(FORMAT='MED',);

MA=DEFI_GROUP(reuse =MA,
              MAILLAGE=MA,
              CREA_GROUP_MA=_F(NOM='TOUT',
                               TOUT='OUI',),);

MO=AFFE_MODELE(MAILLAGE=MA,
               AFFE=_F(TOUT='OUI',
                       PHENOMENE='MECANIQUE',
                       MODELISATION='DKT',),);

CARELEM=AFFE_CARA_ELEM(MODELE=MO,
                       COQUE=_F(GROUP_MA='TOUT',
                                EPAIS=0.01,),);

MAT=DEFI_MATERIAU(ELAS=_F(E=210000000000.0,
                          NU=0.3,
                          RHO=7800.0,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=_F(TOUT='OUI',
                            MATER=MAT,),);
#--------------------------------------------------------------------
# ---- CAS1: PLAQUE ENCASTREE SUR UN COTE

CHCAS1=AFFE_CHAR_MECA(MODELE=MO,
                      DDL_IMPO=_F(GROUP_NO='GRNM11',
                                  DX=0.0,
                                  DY=0.0,
                                  DZ=0.0,
                                  DRX=0.0,
                                  DRY=0.0,
                                  DRZ=0.0,),);
# ---- CAS2: PLAQUE LIBRE-LIBRE   ==>   PAS DE CHCAS2
#-------------------------------------------------------------------
# -CALCUL MODAL POUR CAS1 AVEC LE MACRO CALC_MODAL

MODE1=CALC_MODAL(MODELE=MO,
                       CHAM_MATER=CHMAT,
                       CARA_ELEM=CARELEM,
                       CHARGE=CHCAS1,
                       METHODE='TRI_DIAG',
                       CALC_FREQ=_F(OPTION='CENTRE',
                                    FREQ=100.0,
                                    NMAX_FREQ = 20,
                                    ),);

TEST_RESU(RESU=(_F(RESULTAT=MODE1,
                   NUME_ORDRE=1,
                   PARA='FREQ',
                   VALE=8.7266,
                   CRITERE='RELATIF',
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE1,
                   NUME_ORDRE=2,
                   PARA='FREQ',
                   VALE=21.3042,
                   CRITERE='RELATIF',
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE1,
                   NUME_ORDRE=3,
                   PARA='FREQ',
                   VALE=53.5542,
                   CRITERE='RELATIF',
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE1,
                   NUME_ORDRE=4,
                   PARA='FREQ',
                   VALE=68.2984,
                   CRITERE='RELATIF',
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE1,
                   NUME_ORDRE=5,
                   PARA='FREQ',
                   VALE=77.7448,
                   CRITERE='RELATIF',
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE1,
                   NUME_ORDRE=6,
                   PARA='FREQ',
                   VALE=136.0471,
                   CRITERE='RELATIF',
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),),);

# _CAS2: CALCUL MODAL EN 2 PAS, MACRO_MATR_ASSE + MODE_ITER_SIMULT

MACRO_MATR_ASSE(MODELE=MO,
                CHAM_MATER=CHMAT,
                CARA_ELEM=CARELEM,
                NUME_DDL=CO('NUM2'),
                MATR_ASSE=(_F(MATRICE=CO('MATASSR2'),
                              OPTION='RIGI_MECA',),
                           _F(MATRICE=CO('MATASSM2'),
                              OPTION='MASS_MECA',),),);


MODE2=MODE_ITER_SIMULT(MATR_A=MATASSR2,
                       MATR_B=MATASSM2,
                       CALC_FREQ=_F(OPTION='BANDE',
                                    FREQ=(0.0,90.0,),),);

TEST_RESU(RESU=(_F(RESULTAT=MODE2,
                   NUME_MODE=7,
                   PARA='FREQ',
                   VALE=33.7119,
                   CRITERE='RELATIF',
                   PRECISION=0.011,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE2,
                   NUME_MODE=8,
                   PARA='FREQ',
                   VALE=49.4558,
                   CRITERE='RELATIF',
                   PRECISION=0.011,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE2,
                   NUME_MODE=9,
                   PARA='FREQ',
                   VALE=61.0513,
                   CRITERE='RELATIF',
                   PRECISION=0.011,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE2,
                   NUME_MODE=10,
                   PARA='FREQ',
                   VALE=87.516,
                   CRITERE='RELATIF',
                   PRECISION=0.011,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE2,
                   NUME_MODE=11,
                   PARA='FREQ',
                   VALE=87.516,
                   CRITERE='RELATIF',
                   PRECISION=0.011,
                   REFERENCE='ANALYTIQUE',),),);
#====================================================================
#                ENERGIE CINETIQUE ET POTENTIELLE
#--------- CAS1

MODE1=CALC_CHAMP(reuse=MODE1,RESULTAT=MODE1,ENERGIE=('EPOT_ELEM','ECIN_ELEM'))


TEST_RESU(RESU=(
   _F( RESULTAT = MODE1, NOM_CHAM = 'ECIN_ELEM', NOM_CMP='TOTALE',
       MAILLE = 'M2',CRITERE = 'RELATIF',  PRECISION = 0.5E-2,
       NUME_ORDRE = 1,POINT=1,VALE = 1.14448E-02, REFERENCE='NON_REGRESSION'),
   _F( RESULTAT = MODE1, NOM_CHAM = 'ECIN_ELEM', NOM_CMP='FLEXION',
       MAILLE = 'M2',CRITERE = 'RELATIF',  PRECISION = 0.5E-2,
       NUME_ORDRE = 1,POINT=1,VALE = 2.96879E+03,REFERENCE='NON_REGRESSION'),),)

EPOT1=POST_ELEM(ENER_POT=_F(TOUT='OUI',),
                MODELE=MO,
                CHAM_MATER=CHMAT,
                CARA_ELEM=CARELEM,
                RESULTAT=MODE1,);

ECIN1=POST_ELEM(ENER_CIN=_F(TOUT='OUI',),
                MODELE=MO,
                CHAM_MATER=CHMAT,
                CARA_ELEM=CARELEM,
                RESULTAT=MODE1,);
# LES VALEURS DE REFERENCE SONT CELLES D'ASTER VERSION 3.02.21

TEST_TABLE(TABLE=EPOT1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=1,),),
           NOM_PARA='TOTALE',
           VALE=14796.4,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=EPOT1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=2,),),
           NOM_PARA='TOTALE',
           VALE=17331.2,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=EPOT1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=3,),),
           NOM_PARA='TOTALE',
           VALE=43802.3,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=EPOT1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=4,),),
           NOM_PARA='TOTALE',
           VALE=37367.0,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=EPOT1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=5,),),
           NOM_PARA='TOTALE',
           VALE=54956.4,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=EPOT1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=6,),),
           NOM_PARA='TOTALE',
           VALE=134826.0,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=1,),),
           NOM_PARA='TOTALE',
           VALE=14796.4,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=2,),),
           NOM_PARA='TOTALE',
           VALE=17331.2,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=3,),),
           NOM_PARA='TOTALE',
           VALE=43802.3,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=4,),),
           NOM_PARA='TOTALE',
           VALE=37367.0,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=5,),),
           NOM_PARA='TOTALE',
           VALE=54956.4,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN1,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=6,),),
           NOM_PARA='TOTALE',
           VALE=134826.0,
           REFERENCE='ANALYTIQUE',);
#--------- CAS2

MODE2=NORM_MODE(reuse =MODE2,
                MODE=MODE2,
                NORME='MASS_GENE',);

MODE2=CALC_CHAMP(reuse=MODE2,RESULTAT=MODE2,ENERGIE=('EPOT_ELEM','ECIN_ELEM'))


EPOT2=POST_ELEM(ENER_POT=_F(TOUT='OUI',),
                MODELE=MO,
                CHAM_MATER=CHMAT,
                CARA_ELEM=CARELEM,
                RESULTAT=MODE2,);

ECIN2=POST_ELEM(ENER_CIN=_F(TOUT='OUI',),
                MODELE=MO,
                CHAM_MATER=CHMAT,
                CARA_ELEM=CARELEM,
                RESULTAT=MODE2,);

TEST_TABLE(TABLE=EPOT2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=7,),),
           NOM_PARA='TOTALE',
           VALE=22433.457,
           PRECISION=0.002,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=EPOT2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=8,),),
           NOM_PARA='TOTALE',
           VALE=48279.66,
           PRECISION=0.0214,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=EPOT2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=9,),),
           NOM_PARA='TOTALE',
           VALE=73573.188,
           PRECISION=0.016,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=EPOT2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=10,),),
           NOM_PARA='TOTALE',
           VALE=149746.29,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=EPOT2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=11,),),
           NOM_PARA='TOTALE',
           VALE=149746.29,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=7,),),
           NOM_PARA='TOTALE',
           VALE=22433.457,
           PRECISION=0.002,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=8,),),
           NOM_PARA='TOTALE',
           VALE=48279.66,
           PRECISION=0.0214,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=9,),),
           NOM_PARA='TOTALE',
           VALE=73573.188,
           PRECISION=0.016,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=10,),),
           NOM_PARA='TOTALE',
           VALE=149746.29,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=ECIN2,
           FILTRE=(_F(NOM_PARA='LIEU',
                      VALE_K='MA',),
                   _F(NOM_PARA='NUME_ORDRE',
                      VALE_I=11,),),
           NOM_PARA='TOTALE',
           VALE=149746.29,
           REFERENCE='ANALYTIQUE',);
# --------------------------------------------------------------------

FIN();
#
