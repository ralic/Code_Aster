# MODIF  DATE 17/02/2009   AUTEUR SELLENET N.SELLENET 
# TITRE PORTEE DE CABLES TRI-RENUM MD/AFFE_CHAR_MECA/DYNOLI(MULTFRONT)
# yyyy103d.para = tps_job 130 mem_job 128Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2008  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# yyyy103d.para = tps_job 130 mem_job 128Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# TEST DE PERFORMANCE ANCIENNEMENT NOMME SDNL102C
#
#
#  PORTEE DE CABLES TRIPHASEE (AVEC CHARPENTES ET DESCENTES SHUNT-ALIM)
#
DEBUT(   CODE=_F(  NOM = 'YYYY103D',NIV_PUB_WEB='INTRANET'),
          BASE=_F( FICHIER = 'GLOBALE', LONG_REPE = 12000))

#

MA=LIRE_MAILLAGE( VERI_MAIL=_F(APLAT=0.0, VERIF='OUI'),)

MO=AFFE_MODELE(   MAILLAGE=MA,AFFE=(
                        _F( GROUP_MA = 'CABLE', PHENOMENE = 'MECANIQUE',
                              MODELISATION = 'CABLE'),
                        _F( GROUP_MA = 'CHARP',
                              PHENOMENE = 'MECANIQUE',
                              MODELISATION = 'POU_D_TG'),
                        _F( GROUP_MA = 'EM',
                              PHENOMENE = 'MECANIQUE',
                              MODELISATION = 'DIS_TR'))
                                                     )

# CONDUCTEUR

MAT1=DEFI_MATERIAU(  ELAS=_F( E = 5.40E10,  ALPHA = 23.E-6,NU=0.,  RHO = 2760.),
                     CABLE=_F()
                  )

# ISOLATEUR

MAT2=DEFI_MATERIAU(  ELAS=_F(  E = 6.36E10,  ALPHA = 0.,NU=0.,  RHO = 130463.),
                     CABLE=_F()
                   )

# CABLE AVANT ISOLATEUR

MAT3=DEFI_MATERIAU(  ELAS=_F(  E = 6.36E10,  ALPHA = 0.,NU=0.,  RHO = 39819.),
                     CABLE=_F()
                   )

# CABLE APRES ISOLATEUR

MAT4=DEFI_MATERIAU(  ELAS=_F(  E = 6.36E10,  ALPHA = 0.,NU=0.,  RHO = 57720.),
                     CABLE=_F()
                  )

# CHARPENTE VERTICALE

MAT5=DEFI_MATERIAU(   ELAS=_F(  E = 21.0E10, ALPHA = 0., RHO = 8900.,
                              NU = 0.3) )

# CHARPENTE HORIZONTALE

MAT6=DEFI_MATERIAU(   ELAS=_F(  E = 21.0E10, ALPHA = 0., RHO = 7600.,
                              NU = 0.3) )

#

CHMAT=AFFE_MATERIAU(   MAILLAGE=MA,AFFE=(
                          _F(  GROUP_MA = ('CC',),   MATER = MAT1),
                          _F(  GROUP_MA = ('CHAIN',), MATER = MAT2),
                          _F(  GROUP_MA = ('CABAV',), MATER = MAT3),
                          _F(  GROUP_MA = ('CABAP',), MATER = MAT4),
                          _F(  GROUP_MA = ('CHARPV',), MATER = MAT5),
                          _F(  GROUP_MA = ('CHARPH',), MATER = MAT6),
                          _F(  GROUP_MA = ('EM',),     MATER = MAT6))
                                 )

CARA=AFFE_CARA_ELEM(   MODELE=MO,
   CABLE=(
              _F(  GROUP_MA = ('CC',),              SECTION = 570.22E-6),
              _F(  GROUP_MA = ('CHAIN','CABAV','CABAP',),SECTION = 3.15E-4)),
   POUTRE=(
             _F(  GROUP_MA = 'CHARPH', SECTION = 'GENERALE',
                    CARA = ('A','IY','IZ','JX','AY','AZ'),
                    VALE = (3.1E-2,1.9E-4,4.2E-3,1.9E-3,.01,.01)),
             _F(  GROUP_MA = 'CHARPV', SECTION = 'GENERALE',
                    CARA = ('A','IY','IZ','JX','AY','AZ'),
                    VALE = (7.6E-2,1.8E-4,11.4E-3,1.8E-3,.01,.01))),DISCRET=(
             _F( GROUP_MA = 'EM',
                    CARA = 'K_TR_D_L', REPERE = 'GLOBAL',
                    VALE = (1.E12, 1.E12, 1.E12, 1.E12, 1.E12, 1.E12,)),
             _F( GROUP_MA = 'EM',
                    CARA = 'M_TR_L', REPERE = 'GLOBAL',
                    VALE = (
 1400.,  0., 1400.,  0.,   0., 1400.,  0.,   0.,   0.,  .001,  0.,   0.,   0.,
   0.,  .001,  0.,   0.,   0.,   0.,   0.,  .001, 700.,  0.,   0.,   0.,   0.,
   0., 1400.,  0.,  700.,  0.,   0.,   0.,   0.,   0., 1400.,  0.,   0.,  700.,
   0.,   0.,   0.,   0.,   0., 1400.,  0.,   0.,   0.,   0.,   0.,   0.,   0.,
   0.,   0.,  .001,  0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,
  .001,  0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,   0.,  .001,
                                                                 ))),
   ORIENTATION=(
            _F( GROUP_MA = 'CHARP',
                    CARA = 'VECT_Y', VALE = (1.,0.,0.,)),
            _F( GROUP_MA = 'EM',
                    CARA = 'ANGL_NAUT', VALE = (0.,0.,0.,)))
)

L_INSTA=DEFI_LIST_REEL(   DEBUT=-0.1,INTERVALLE=(
                             _F( JUSQU_A = 0.0,   NOMBRE = 1),
                             _F( JUSQU_A = 0.250, NOMBRE = 50),
                             _F( JUSQU_A = 2.000, NOMBRE = 175))
#                          INTERVALLE : (JUSQU_A: 4.500 NOMBRE: 425 )
                         )

L_INSTA2=DEFI_LIST_REEL(   DEBUT=-0.1,INTERVALLE=(
                             _F( JUSQU_A = 0.0,   NOMBRE = 1),
                             _F( JUSQU_A = 0.010, NOMBRE = 4))
                         )

L_ARCHI=DEFI_LIST_ENTI(   DEBUT=1,
                             INTERVALLE=_F( JUSQU_A = 227, PAS = 1)
                         )

L_ARCHI2=DEFI_LIST_ENTI(   DEBUT=1,
                             INTERVALLE=_F( JUSQU_A = 6,  PAS = 1)
                         )

#

F1=DEFI_FONC_ELEC( #SIGNAL : 'CONTINU'
         COUR=_F(  INTE_CC_1 = 34600., TAU_CC_1 = 0.070, PHI_CC_1 = 20.,
                INTE_CC_2 = 34600., TAU_CC_2 = 0.070, PHI_CC_2 = 140.,
                             INST_CC_INIT = 0., INST_CC_FIN = 0.25)
                                                           )

F2=DEFI_FONC_ELEC( #SIGNAL : 'CONTINU'
         COUR=_F(  INTE_CC_1 = 34600., TAU_CC_1 = 0.070, PHI_CC_1 = 20.,
                INTE_CC_2 = 34600., TAU_CC_2 = 0.070, PHI_CC_2 = 260.,
                             INST_CC_INIT = 0., INST_CC_FIN = 0.25)
                                                           )

F3=DEFI_FONC_ELEC( #SIGNAL : 'CONTINU'
         COUR=_F(  INTE_CC_1 = 34600., TAU_CC_1 = 0.070, PHI_CC_1 = 140.,
                INTE_CC_2 = 34600., TAU_CC_2 = 0.070, PHI_CC_2 = 260.,
                             INST_CC_INIT = 0., INST_CC_FIN = 0.25)
                                                           )

#

CHA1=AFFE_CHAR_MECA(   MODELE=MO,DDL_IMPO=(
            _F( GROUP_NO = ('PC1','PC7','PC8','PC14',),
                      DX = 0., DY = 0., DZ = 0., DRX = 0., DRY = 0., DRZ = 0.),

            _F( GROUP_NO = ('PC2','PC3','PC4','PC5','PC6',
                                 'PC9','PC10','PC11','PC12','PC13',),
                             DY = 0., DZ = 0.),
            _F( GROUP_NO = ('A11F1','A11F2','A11F3','S11F1','S11F2','S11F3',),
                      DX = 0., DY = 0., DZ = 0.))
                                                                    )

CHA2=AFFE_CHAR_MECA(   MODELE=MO,
                          PESANTEUR=(9.81,   0.,0.,-1.,) )

#CHA3  = AFFE_CHAR_MECA ( MODELE: MO ,
#                        TEMP_CALCULEE: EVOTH        );

CHA4=AFFE_CHAR_MECA(   MODELE=MO,INTE_ELEC=(
            _F( GROUP_MA = 'CC1', GROUP_MA_2 = 'CC2'),
            _F( GROUP_MA = 'CC2', GROUP_MA_2 = 'CC1')) )

CHA5=AFFE_CHAR_MECA(   MODELE=MO,INTE_ELEC=(
            _F( GROUP_MA = 'CC1', GROUP_MA_2 = 'CC3'),
            _F( GROUP_MA = 'CC3', GROUP_MA_2 = 'CC1')) )

CHA6=AFFE_CHAR_MECA(   MODELE=MO,INTE_ELEC=(
            _F( GROUP_MA = 'CC2', GROUP_MA_2 = 'CC3'),
            _F( GROUP_MA = 'CC3', GROUP_MA_2 = 'CC2')) )

RESU=STAT_NON_LINE(
                            MODELE=MO,
                        CHAM_MATER=CHMAT,
                         CARA_ELEM=CARA,EXCIT=(
                             _F(
                CHARGE = CHA1), _F(
                CHARGE = CHA2)),
                         INCREMENT=_F(
                LIST_INST = L_INSTA,
                NUME_INST_FIN = 1),
                         COMP_ELAS=_F(
                GROUP_MA = (
                  'CABLE',  ),
                RELATION = 'CABLE',
                DEFORMATION = 'GREEN'),COMP_INCR=(
                         _F(
                GROUP_MA = (
                  'CHARP',  ),
                RELATION = 'ELAS'),
                         _F(
                GROUP_MA = (
                  'EM',  ),
                RELATION = 'ELAS')),
                       CONVERGENCE=_F(
                RESI_GLOB_RELA = 1.E-4,
                ITER_GLOB_MAXI = 500),
                            NEWTON=_F(
                REAC_ITER = 1)
              )

RESU=CALC_ELEM( reuse=RESU,
                            OPTION=(
                  'SIEF_ELNO_ELGA',  'VARI_ELNO_ELGA',),
                          RESULTAT=RESU,
              )

RESU=DYNA_NON_LINE( reuse=RESU, MODELE=MO, CHAM_MATER=CHMAT,  CARA_ELEM=CARA,EXCIT=(
                     _F(  CHARGE = CHA1),
                           _F(  CHARGE = CHA2),
                     #     ( CHARGE : CHA3 )
                           _F(  CHARGE = CHA4, FONC_MULT = F1),
                           _F(  CHARGE = CHA5, FONC_MULT = F2),
                           _F(  CHARGE = CHA6, FONC_MULT = F3)),
                     INCREMENT=_F( LIST_INST = L_INSTA),
                     SCHEMA_TEMPS=_F(SCHEMA='HHT',FORMULATION='DEPLACEMENT'),
                   ETAT_INIT=_F( INST = 0.,   EVOL_NOLI = RESU),
                    COMP_ELAS=_F( GROUP_MA = ('CABLE',), RELATION = 'CABLE',
                               DEFORMATION = 'GREEN'),COMP_INCR=(
                    _F( GROUP_MA = ('CHARP',), RELATION = 'ELAS'),
                    _F( GROUP_MA = ('EM',),    RELATION = 'ELAS')),
                   CONVERGENCE=_F( RESI_GLOB_RELA = 1.E-4, ITER_GLOB_MAXI = 200),
                   NEWTON=_F( REAC_ITER = 1),
                          SOLVEUR=_F(  METHODE = 'MULT_FRONT')
                          )

G1=RECU_FONCTION(
       MAILLE='M1',   POINT=1, #NOEUD : N164
       NOM_CMP='N',
        RESULTAT=RESU,    NOM_CHAM='SIEF_ELGA',
        TOUT_ORDRE='OUI')

G2=RECU_FONCTION(
        NOEUD='N93',   NOM_CMP='DY',
        RESULTAT=RESU,   NOM_CHAM='DEPL'
                                      )

G3=RECU_FONCTION(
        NOEUD='N93',   NOM_CMP='DZ',
        RESULTAT=RESU,   NOM_CHAM='DEPL'
                                      )

# VERIFICATION FONCTIONS

TEST_FONCTION(
     VALEUR=_F(  FONCTION = F1, REFERENCE = 'NON_REGRESSION',
              VALE_PARA = 0.1,  VALE_REFE = -199.2865)
              )

TEST_FONCTION(
     VALEUR=_F(  FONCTION = G1, REFERENCE = 'NON_REGRESSION',
                 PRECISION=  2.0E-02,
                 VALE_PARA = 1.81, VALE_REFE = 3.482E4)
              )

TEST_FONCTION(
     VALEUR=_F(  FONCTION = G2, REFERENCE = 'NON_REGRESSION',
              VALE_PARA = 0.53, VALE_REFE = -2.732)
              )

TEST_FONCTION(
     VALEUR=_F(  FONCTION = G3, REFERENCE = 'NON_REGRESSION',
                 PRECISION=  1.0E-02,
                 VALE_PARA = 1.04, VALE_REFE = 2.616)
              )

FIN()
#
