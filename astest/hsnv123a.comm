# MODIF  DATE 28/08/2006   AUTEUR CIBHHPD L.SALMONA 
# RESPONSABLE        D6BHHAR A.RAZAKANAIVO
# TITRE THERMO_METALLO_MECANIQUE EDGAR
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#
# CAS_TEST__
# HSNV123A                COMMANDES            11/12/92
# BARREAU CYLINDRIQUE EN FLUAGE
# MODELISATION AXIS_META  (ELEMENTS AXISYMETRIQUES METALLURGIQUES)
#             13 NOEUDS  2 MAILLES QUAD8
#======================================================================

DEBUT(        CODE=_F(  NOM = 'HSNV123A',NIV_PUB_WEB='INTERNET'),
                BASE=_F(  FICHIER = 'GLOBALE', LONG_REPE = 7000) )

PRE_GIBI()

MAIL=LIRE_MAILLAGE( )

ZIRCALOY=DEFI_MATERIAU(    THER=_F(  RHO_CP = 2000000.0, LAMBDA = 9999.9),
                        META_ZIRC=_F( 
                                  TDEQ = 809.,   K = 1.135E-2,   N = 2.187,
                                  TDC = 831.,      QSR_K = 14614.,
                                  AC = 1.58E-4,     M = 4.7,
                                  TDR = 949.1,    AR = -5.725,  BR = 0.05)
                       )

CHMAT=AFFE_MATERIAU(    MAILLAGE=MAIL,
                               AFFE=_F(  TOUT = 'OUI', MATER = ZIRCALOY)
                       )

MOTH=AFFE_MODELE(    MAILLAGE=MAIL,
                             AFFE=_F(  TOUT = 'OUI',
                                    MODELISATION = 'AXIS',
                                    PHENOMENE = 'THERMIQUE')
                     )

TFONC=DEFI_FONCTION(       NOM_PARA='INST',
                              NOM_RESU='TEMP',
                                  VALE=(0.0, 800.0, 120.0,  800.,),
                           PROL_GAUCHE='LINEAIRE',
                            PROL_DROITE='LINEAIRE',
                              INTERPOL='LIN'
                       )

TIMPO=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_F',
                  MAILLAGE=MAIL,
                   AFFE=_F( TOUT = 'OUI',
                            NOM_CMP = 'TEMP',
                            VALE_F = TFONC)
                      )

LR8=DEFI_LIST_REEL(   DEBUT=0.,
                          INTERVALLE=_F(  JUSQU_A = 120.0,  NOMBRE = 60)
                       )

PHASINIT=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='CART_VAR2_R',
                     MAILLAGE=MAIL,
                     AFFE=_F( TOUT = 'OUI',
                              NOM_CMP = ('V1', 'V2', 'V3', ),
                              VALE = ( 1.0, 0.0, 20., ))
                        )

TEMPE=CREA_RESU(    OPERATION='AFFE', TYPE_RESU='EVOL_THER',
                       NOM_CHAM='TEMP',
                       AFFE=_F( CHAM_GD = TIMPO,
                                LIST_INST = LR8)
                    )

TEMPE=CALC_META( reuse=TEMPE,  MODELE=MOTH,
                     CHAM_MATER=CHMAT,
                     RESULTAT=TEMPE,
                     ETAT_INIT=_F( META_INIT_ELNO = PHASINIT),
                     COMP_INCR=_F(  RELATION = 'ZIRC',
                                 TOUT = 'OUI'),

                   )

YOUNG=DEFI_CONSTANTE( VALE=200000.)

NU=DEFI_CONSTANTE( VALE=0.3)

HALPHA=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',

                                 VALE=(

350.,      25576.33988,
400.,     13804.15047,
450.,     8104.504112,
500.,     5091.749784,
550.,     3380.938514,
600.,     2350.039063,
650.,     1697.134724,
700.,     1265.79478,
750.,     970.3336936,
800.,     761.516793,
850.,     609.8541127,
900.,     497.0280641,
950.,     411.289958,
1000.,    344.8865559,
1050.,    292.5691715,
1100.,    250.7018904,

  ))

ALPHA1=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=( 0., 0.,  900., 0., ))

ALPHA2=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=( 0., 0.,  900., 0., ))

SYA=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=( 0., 0.,  900., 0., ))

SYB=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=( 0., 200.,  900., 200., ))

N1=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=( 0., 5.76,  900., 5.76, ))

N2=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=( 0., 2.94,  900., 2.94, ))

ETA1=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=(

350.,         2034.235317,
400.,         1097.92451,
450.,         644.5984285,
500.,         404.9765246,
550.,         268.9057372,
600.,         186.9122979,
650.,         134.9830121,
700.,         100.6760333,
750.,         77.12029177,
800.,         60.56786711,
850.,         48.50525056,
900.,         39.5315376,
950.,         32.71228652,
1000.,        27.43083708,
1050.,        23.2697307,
1100.,        19.93978192,

   )
  )

ETA2=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=(

350.,    264384.62,
400.,    77982.792,
450.,    27233.275,
500.,    10897.031,
550.,    4873.6111,
600.,    2390.1382,
650.,    1266.2495,
700.,    716.09656,
750.,    428.17575,
800.,    268.58885,
850.,    175.62607,
900.,    119.07451,
950.,    83.339007,
1000.,   59.986217,
1050.,   44.263733,
1100.,   33.393261,
1150., 25.696290,
1200., 20.128293,
1250., 16.021663,
1300., 12.939225,
1350., 10.588311,
1400., 8.7690035,

)
)

M1=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=( 0., 5.76,  900., 5.76, ))

C1=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                                 VALE=(

   0.,     13.70539827,
   900.,   13.70539827,
   )
   )

ZERO=DEFI_CONSTANTE(   VALE=0.E0)

UN=DEFI_CONSTANTE(   VALE=1.E0)

FMEL=DEFI_FONCTION(      NOM_PARA='META',
                          PROL_DROITE='CONSTANT',
                         PROL_GAUCHE='CONSTANT',
                               VALE=( 0.,  0.,   0.05,  0.5,  0.1,  1.,
               1., 1.,  ))

ZIRC=DEFI_MATERIAU( 
            ELAS_META_FO=_F( E = YOUNG,
                             NU = NU,
                             F_ALPHA = ALPHA1,
                             C_ALPHA = ALPHA2, 
                             TEMP_DEF_ALPHA=800.0, 
               PHASE_REFE = 'CHAUD',
               EPSF_EPSC_TREF = 0.,
               F1_S_VP = SYA,
               F2_S_VP = SYA,
               C_S_VP = SYB,
               S_VP_MELANGE = FMEL),
             META_ECRO_LINE=_F( 
                        F1_D_SIGM_EPSI = HALPHA,
                        F2_D_SIGM_EPSI = ZERO,
                        C_D_SIGM_EPSI = ZERO),

     META_VISC_FO=_F( F1_ETA = ETA1,
                   F2_ETA = ETA2,
                  C_ETA = ZERO,

                   F1_N = N1,
                    F2_N = N2,
                   C_N = UN,

                   F1_C = C1,
                    F2_C = ZERO,
                   C_C = ZERO,

                   F1_M = M1,
                    F2_M = UN,
                   C_M = UN)
           )

CM2=AFFE_MATERIAU( MAILLAGE=MAIL,   
                   AFFE=_F( TOUT = 'OUI', MATER = ZIRC,
                            TEMP_REF = 800.),
                   AFFE_VARC=_F(TOUT='OUI',
                            EVOL=TEMPE,
                            NOM_VARC='M_ZIRC',
                            NOM_CHAM='META_ELNO_TEMP'),

           )

MO=AFFE_MODELE(  MAILLAGE=MAIL,    VERIF='MAILLE',
                 AFFE=_F( TOUT = 'OUI',PHENOMENE = 'MECANIQUE',
                           MODELISATION = 'AXIS'))

TEMPER=AFFE_CHAR_MECA( MODELE=MO,
                       TEMP_CALCULEE=TEMPE  )

FORCE=DEFI_FONCTION(   NOM_PARA='INST',
           PROL_GAUCHE='CONSTANT',  PROL_DROITE='CONSTANT',
           VALE=(0.0,0.0, 10.,25., 120.,  25.,))

CH_FO=AFFE_CHAR_MECA( MODELE=MO,
                      PRES_REP=_F(  GROUP_MA = 'D3',  PRES = 1.)
           )

CHARGE=AFFE_CHAR_MECA( MODELE=MO,
                       FACE_IMPO=_F( GROUP_MA = 'D1',
                                     DY = 0.)
           )

L_INST=DEFI_LIST_REEL(  DEBUT=0.0,
             INTERVALLE=_F( JUSQU_A = 120.,      NOMBRE = 120)
           )

U=STAT_NON_LINE(  MODELE=MO,  CHAM_MATER=CM2,EXCIT=(
           _F( CHARGE = CH_FO,
                  FONC_MULT = FORCE),
           _F( CHARGE = CHARGE),
           _F( CHARGE = TEMPER)),
            COMP_INCR=_F( RELATION = 'META_V_IL',
                RELATION_KIT = ('ZIRC',)),
           INCREMENT=_F( LIST_INST = L_INST),
              NEWTON=_F( MATRICE = 'TANGENTE', REAC_ITER = 1),
           CONVERGENCE=_F( RESI_GLOB_RELA = 1.E-6, ITER_GLOB_MAXI = 40)
           )

U=CALC_ELEM( reuse=U,       
                      RESULTAT=U,    OPTION=('EPSI_ELNO_DEPL',
      'SIEF_ELNO_ELGA', 'VARI_ELNO_ELGA',),
         )

CHSIG120=CREA_CHAMP( OPERATION='EXTR', TYPE_CHAM='ELNO_SIEF_R',
                     RESULTAT=U, NOM_CHAM='SIEF_ELNO_ELGA',
                       INST=120. )

CHEPS120=CREA_CHAMP( OPERATION='EXTR', TYPE_CHAM='ELNO_EPSI_R',
                     RESULTAT=U, NOM_CHAM='EPSI_ELNO_DEPL',
                       INST=120. )

#------------------------------------------------------------------

TEST_RESU(CHAM_ELEM=(
    
       _F( CHAM_GD = CHEPS120, CRITERE = 'RELATIF', PRECISION = 1.E-1,
        MAILLE = 'M3', NOEUD = 'N5', NOM_CMP = 'EPYY',   VALE = -3.1E-2),

       _F( CHAM_GD = CHSIG120, CRITERE = 'RELATIF', PRECISION = 1.E-1,
        MAILLE = 'M3', NOEUD = 'N5', NOM_CMP = 'SIYY',   VALE = -25.))


        )

FIN()
#
