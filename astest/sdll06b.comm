# MODIF  DATE 31/05/2011   AUTEUR NISTOR I.NISTOR 
# TITRE REPONSE TRANSITOIRE D'UN POTEAU ENCASTRE LIBRE (FORCE IMPOSEE)
# sdll06b.para = tps_job 60 mem_job 64Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# --------------------------------------------------------------------
# * SFM.VPCS  SDLL06 / B
# * REPONSE TRANSITOIRE D'UN POTEAU ENCASTRE-LIBRE
# * SOUS FORCE IMPOSEE
# * 1 RESSORT  1 MASSE  --   K = 3.942E+7   M = 43.8E+3
# --------------------------------------------------------------------
#

DEBUT( CODE=_F(  NOM = 'SDLL06B',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

MAILLAGE=LIRE_MAILLAGE( )

MODELE=AFFE_MODELE(  MAILLAGE=MAILLAGE,AFFE=(
                  _F(  GROUP_NO = 'MASSES',   PHENOMENE = 'MECANIQUE',
                         MODELISATION = 'DIS_TR'),
                       _F(  GROUP_MA = 'LIAI_NOE', PHENOMENE = 'MECANIQUE',
                         MODELISATION = 'DIS_TR'))                   )

#

CON_LIM=AFFE_CHAR_MECA( MODELE=MODELE,DDL_IMPO=(
                             _F(  GROUP_NO = 'ENCASTRE',
                                        DX = 0., DY = 0., DZ = 0.,
                                        DRX = 0., DRY = 0., DRZ = 0.),
                                      _F(  GROUP_NO = 'DY',   DY = 0.),
                                      _F(  GROUP_NO = 'DZ',   DZ = 0.),
                                      _F(  GROUP_NO = 'DRX',  DRX = 0.),
                                      _F(  GROUP_NO = 'DRY',  DRY = 0.),
                                      _F(  GROUP_NO = 'DRZ',  DRZ = 0.))  )

#

FONC_X=DEFI_FONCTION(  NOM_PARA='INST',
                       VALE=( 0., 0.,  0.025, 9.81,  0.05, 0.,  10., 0., ) )

#

F_IMPO=AFFE_CHAR_MECA( MODELE=MODELE,
                              FORCE_NODALE=_F(  NOEUD = 'N02',
                                             FX = -43.8E+03)     )

#

CARA_ELE=AFFE_CARA_ELEM(  MODELE=MODELE,DISCRET=(
                       _F(  NOEUD = 'N02',  CARA = 'M_TR_D_N',
                                VALE = ( 43.8E+3, 0.0, 0.0, 0.0, 0.0,
                                         0.0, 0.0, 0.0, 0.0, 0.0, )),
                       _F(  NOEUD = 'N02',  CARA = 'K_TR_D_N',
                          VALE = ( 0., 0., 0., 0., 0., 0., )),
                       _F(  GROUP_MA = 'RLN_1',  CARA = 'K_TR_D_L',
                                VALE = ( 0.0, 3.942E7, 0.0, 0.0, 0.0,
                                         0.0,                        ),
                                REPERE = 'LOCAL')) )

#

RIGI_ELE=CALC_MATR_ELEM(  MODELE=MODELE,  OPTION='RIGI_MECA',
                              CARA_ELEM=CARA_ELE,
                                 CHARGE=( CON_LIM,  F_IMPO, )        )

MASS_ELE=CALC_MATR_ELEM( MODELE=MODELE,  OPTION='MASS_MECA',
                              CARA_ELEM=CARA_ELE,
                                 CHARGE=( CON_LIM,  F_IMPO, )        )

VECT_ELE=CALC_VECT_ELEM(  OPTION='CHAR_MECA',  CARA_ELEM=CARA_ELE,
                                 CHARGE=( CON_LIM,  F_IMPO, )        )

#

NUMEDDL=NUME_DDL(  MATR_RIGI=RIGI_ELE )

RIGIDITE=ASSE_MATRICE(  MATR_ELEM=RIGI_ELE,  NUME_DDL=NUMEDDL  )

MASSE=ASSE_MATRICE(  MATR_ELEM=MASS_ELE,  NUME_DDL=NUMEDDL  )

VECTEUR=ASSE_VECTEUR(  VECT_ELEM=VECT_ELE,  NUME_DDL=NUMEDDL  )

#

MODE_MEC=MODE_ITER_INV(  MATR_A=RIGIDITE,  MATR_B=MASSE,
              CALC_FREQ=_F(  OPTION = 'PROCHE', FREQ = ( 4.77, ))  )

#
#-----------------------------------------------------------------------

L_INST=DEFI_LIST_REEL(  DEBUT=0.,
                                         INTERVALLE=_F(  JUSQU_A = 0.21, PAS = 0.001) )

L_RECU=DEFI_LIST_REEL(  DEBUT=0.01,INTERVALLE=(
                                         _F(  JUSQU_A = 0.1,  PAS = 0.01),
                                         _F(  JUSQU_A = 0.2,  PAS = 0.02)) )

#-----------------------------------------------------------------------
#
MACRO_PROJ_BASE(  BASE=MODE_MEC,MATR_ASSE_GENE=(
                   _F(
                                   MATRICE = CO("MASS_GEN"),
                                   MATR_ASSE = MASSE),
                   _F(
                                   MATRICE = CO("RIGI_GEN"),
                                   MATR_ASSE = RIGIDITE)),
                   VECT_ASSE_GENE=_F(
                                   VECTEUR = CO("VECT_X"),
                                   VECT_ASSE = VECTEUR)
)

#

TRAN_GEN=DYNA_TRAN_MODAL(  MATR_MASS=MASS_GEN,   MATR_RIGI=RIGI_GEN,
SCHEMA_TEMPS=_F(SCHEMA='EULER',),
                       EXCIT=_F(VECT_ASSE = VECT_X,    FONC_MULT = FONC_X),
                       INCREMENT=_F(  INST_INIT = 0.,   INST_FIN = 0.21,
                                   PAS = 1.E-3) )

#

DYNA1=REST_GENE_PHYS(  RESU_GENE=TRAN_GEN,
    TITRE=( ' CAS TEST &CODE','&RL COMMANDE &COMMANDE', ),
                              LIST_INST=L_RECU,   NOM_CHAM='DEPL'    )

#FONC_DY1 = RECU_FONCTION ( NOEUD: N02, NOM_CMP: 'DX',  NOM_CHAM: 'DEPL'
#                           RESULTAT: DYNA1,  LIST_INST: L_RECU      ) ;
#

TEST_RESU(RESU=(
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 1,    NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -0.0650E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 2,    NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -0.513E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 3,    NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -1.679E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 4,    NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -3.457E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 5,    NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -5.316E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 6,    NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -6.764E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 7,    NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -7.609E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 8,    NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -7.774E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 9,    NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -7.244E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 10,   NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -6.068E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 11,   NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = -2.242E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 12,   NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = 2.367E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 13,   NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = 6.149E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 14,   NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = 7.783E-03),
           _F(  RESULTAT = DYNA1,  NUME_ORDRE = 15,   NOM_CHAM = 'DEPL',
             CRITERE = 'RELATIF',     PRECISION = 1.E-02,
             NOEUD = 'N02',      NOM_CMP = 'DX',          VALE = 6.698E-03))
            )

FIN( )
#
