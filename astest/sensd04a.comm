# MODIF  DATE 31/05/2011   AUTEUR NISTOR I.NISTOR 
# RESPONSABLE H.ANDRIAMBOLOLONA
# TITRE Sensibilite au chargement/condition limite dans DYNA_LYNE_TRAN
# sensd04a.para = tps_job 60 mem_job 32Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

# SYSTEME MASSE-RESSORT : REPONSE TRANSITOIRE
# 9 RESSORTS  8 MASSES  -- K =1.E+5    M =10 --
# ----------------------------------------------------------------------

DEBUT(CODE=_F(NOM='sensd04a',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='NON'))

#
# 1. Definition des parametres sensibles
#
F1=DEFI_PARA_SENSI(VALE = 2.)

F2=DEFI_PARA_SENSI(VALE = 0.)

D1=DEFI_PARA_SENSI(VALE = 1.)

I_DEBUT = 0.
I_FIN = 1.E-4

#
# 2. Maillage, Modele ...
#
MA=LIRE_MAILLAGE()

MO=AFFE_MODELE(MAILLAGE=MA,
               AFFE=(_F(GROUP_MA='RESSORT',PHENOMENE='MECANIQUE',MODELISATION='DIS_T'),
                     _F(GROUP_NO='MASSE',PHENOMENE='MECANIQUE',MODELISATION='DIS_T'),),)

CARELEM=AFFE_CARA_ELEM(MODELE=MO,
                       DISCRET=(_F(GROUP_MA='RESSORT',CARA='K_T_D_L',VALE=(1.E+5,1.,1.,),),
                                _F(GROUP_MA='RESSORT',CARA='M_T_L',VALE=(0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                                                0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,),),
                                _F(GROUP_NO='MASSE',CARA='M_T_D_N',VALE=10.),),)
#
# 3. Chargement ...
#
CHF=AFFE_CHAR_MECA_F(MODELE=MO,
                    FORCE_NODALE=(_F(NOEUD='NO5',FX=F1),
                                  _F(NOEUD='NO6',FX=F2),
                                  ))

FC=DEFI_FONCTION(NOM_PARA='INST',
                 PROL_DROITE='CONSTANT',
                 PROL_GAUCHE='CONSTANT',
                 VALE=(I_DEBUT,0.,I_FIN,1.,))

#
# 4. Conditions aux limites ...
#
CLIM1=AFFE_CHAR_MECA(MODELE=MO,
                     DDL_IMPO=(_F(GROUP_NO='A_ET_B',DX=0.,DY=0.,DZ=0.),
                               _F(GROUP_NO='MASSE',DY=0.,DZ=0.),))

CLIM2=AFFE_CHAR_MECA_F(MODELE=MO,
                       DDL_IMPO=(_F(NOEUD='NO2',DX=D1)))

#
# 5. Premier membre
#
MATELER=CALC_MATR_ELEM(MODELE=MO,OPTION='RIGI_MECA',
                       CARA_ELEM=CARELEM,CHARGE=(CLIM1,CLIM2,))

MATELEM=CALC_MATR_ELEM(MODELE=MO,
                       OPTION='MASS_MECA_DIAG',
                       CARA_ELEM=CARELEM,CHARGE=(CLIM1,CLIM2,))

NUM=NUME_DDL(MATR_RIGI=MATELER)

MATASSR=ASSE_MATRICE(MATR_ELEM=MATELER,NUME_DDL=NUM)

MATASSM=ASSE_MATRICE(MATR_ELEM=MATELEM,NUME_DDL=NUM)

L_TEMPS=DEFI_LIST_REEL(DEBUT=I_DEBUT,
                       INTERVALLE=_F(JUSQU_A=I_FIN,NOMBRE=10))

#
# 6. Calcul
#
DYTRN=DYNA_LINE_TRAN(MODELE=MO,CARA_ELEM=CARELEM,
                    MATR_MASS=MATASSM, MATR_RIGI=MATASSR,
                    INCREMENT=_F(LIST_INST=L_TEMPS,),
                    EXCIT=(
                           _F(CHARGE=CLIM2,),
                           _F(FONC_MULT=FC,CHARGE=CHF),
                           ),
                    SENSIBILITE=(F1,F2,D1),)

PAS = (I_FIN - I_DEBUT)/100.

DYTRD=DYNA_LINE_TRAN(MODELE=MO,CARA_ELEM=CARELEM,
                    MATR_MASS=MATASSM, MATR_RIGI=MATASSR,
                    INCREMENT=_F(INST_INIT=I_DEBUT,PAS=PAS,INST_FIN=I_FIN,),
                    EXCIT=(
                           _F(FONC_MULT=FC,CHARGE=CHF),
                           ),
                    SENSIBILITE=(F1,F2),
                    SCHEMA_TEMPS=_F(SCHEMA='DIFF_CENTRE',),)

I_FIN = 2.E-4
L_TMPS=DEFI_LIST_REEL(DEBUT=I_DEBUT,
                       INTERVALLE=_F(JUSQU_A=I_FIN,NOMBRE=20))

DYTRN=DYNA_LINE_TRAN(MODELE=MO,CARA_ELEM=CARELEM,
                    MATR_MASS=MATASSM, MATR_RIGI=MATASSR,
                    INCREMENT=_F(LIST_INST=L_TMPS,),
                    reuse=DYTRN,ETAT_INIT=_F(RESULTAT=DYTRN,),
                    EXCIT=(
                           _F(CHARGE=CLIM2,),
                           _F(FONC_MULT=FC,CHARGE=CHF),
                           ),
                    SENSIBILITE=(F1,F2,D1),)

DEP_INI=CREA_CHAMP(OPERATION='EXTR',
                   TYPE_CHAM='NOEU_DEPL_R',
                   RESULTAT=DYTRN,
                   NOM_CHAM='DEPL',
                   NUME_ORDRE=0,)

VIT_INI=CREA_CHAMP(OPERATION='EXTR',
                   TYPE_CHAM='NOEU_DEPL_R',
                   RESULTAT=DYTRN,
                   NOM_CHAM='VITE',
                   NUME_ORDRE=0,)

ACC_INI=CREA_CHAMP(OPERATION='EXTR',
                   TYPE_CHAM='NOEU_DEPL_R',
                   RESULTAT=DYTRN,
                   NOM_CHAM='ACCE',
                   NUME_ORDRE=0,)

DYTRNI=DYNA_LINE_TRAN(MODELE=MO,CARA_ELEM=CARELEM,
                    MATR_MASS=MATASSM, MATR_RIGI=MATASSR,
                    INCREMENT=_F(LIST_INST=L_TMPS,),
                    ETAT_INIT=_F(DEPL=DEP_INI,
                                 VITE=VIT_INI,
                                 ACCE=ACC_INI,),
                    EXCIT=(
                           _F(CHARGE=CLIM2,),
                           _F(FONC_MULT=FC,CHARGE=CHF),
                           ),
                    SENSIBILITE=(F1,F2,D1),)

#
# 7. Test
#----------------------------------------------------------
#

TEST_RESU(RESU=(
                _F(RESULTAT=DYTRN,NUME_ORDRE=10,
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(3.35E-10,),REFERENCE='NON_REGRESSION',VERSION='7.1.3'),
                _F(RESULTAT=DYTRN,NUME_ORDRE=20,
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(2.33E-09,),REFERENCE='NON_REGRESSION',VERSION='7.2.17'),
                _F(RESULTAT=DYTRNI,NUME_ORDRE=20,
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(2.33E-09,),REFERENCE='NON_REGRESSION',VERSION='7.2.17'),
                _F(RESULTAT=DYTRN,NUME_ORDRE=10,
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='ABSOLU',PRECISION=1.E-8,
                   NOM_CMP='DY',VALE=(0.00000E+00,),REFERENCE='ANALYTIQUE'),
                _F(RESULTAT=DYTRN,NUME_ORDRE=10,
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='ABSOLU',PRECISION=1.E-8,
                   NOM_CMP='DZ',VALE=(0.00000E+00,),REFERENCE='ANALYTIQUE'),

                _F(RESULTAT=DYTRN,NUME_ORDRE=10,
                   SENSIBILITE=(F1),
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(1.67E-10,),REFERENCE='AUTRE_ASTER'),
                _F(RESULTAT=DYTRN,NUME_ORDRE=10,
                   SENSIBILITE=(F1),
                   NOM_CHAM='VITE',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(5.00E-06,),REFERENCE='AUTRE_ASTER'),
                _F(RESULTAT=DYTRN,NUME_ORDRE=20,
                   SENSIBILITE=(F1),
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(1.17E-09,),REFERENCE='AUTRE_ASTER'),

                _F(RESULTAT=DYTRN,NUME_ORDRE=10,
                   SENSIBILITE=(F2),
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(8.75E-16,),REFERENCE='AUTRE_ASTER'),
                _F(RESULTAT=DYTRN,NUME_ORDRE=10,
                   SENSIBILITE=(F2),
                   NOM_CHAM='ACCE',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(1.67E-06,),REFERENCE='AUTRE_ASTER'),
                _F(RESULTAT=DYTRNI,NUME_ORDRE=10,
                   SENSIBILITE=(F2),
                   NOM_CHAM='ACCE',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(1.67E-06,),REFERENCE='AUTRE_ASTER'),

                _F(RESULTAT=DYTRN,NUME_ORDRE=10,
                   SENSIBILITE=(D1),
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(1.18E-15,),REFERENCE='AUTRE_ASTER'),
                _F(RESULTAT=DYTRN,NUME_ORDRE=20,
                   SENSIBILITE=(D1),
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(7.91E-14,),REFERENCE='AUTRE_ASTER'),
                _F(RESULTAT=DYTRNI,NUME_ORDRE=20,
                   SENSIBILITE=(D1),
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(7.91E-14,),REFERENCE='AUTRE_ASTER'),

                _F(RESULTAT=DYTRD,NUME_ORDRE=100,
                   SENSIBILITE=(F1),
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(1.67E-10,),REFERENCE='AUTRE_ASTER'),
                _F(RESULTAT=DYTRD,NUME_ORDRE=100,
                   SENSIBILITE=(F1),
                   NOM_CHAM='VITE',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(5.00E-06,),REFERENCE='AUTRE_ASTER'),

                _F(RESULTAT=DYTRD,NUME_ORDRE=100,
                   SENSIBILITE=(F2),
                   NOM_CHAM='DEPL',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-2,
                   NOM_CMP='DX',VALE=(8.75E-16,),REFERENCE='AUTRE_ASTER'),
                _F(RESULTAT=DYTRD,NUME_ORDRE=100,
                   SENSIBILITE=(F2),
                   NOM_CHAM='ACCE',NOEUD='NO5',
                   CRITERE='RELATIF',PRECISION=5.E-3,
                   NOM_CMP='DX',VALE=(1.67E-06,),REFERENCE='AUTRE_ASTER'),

                ),);

FIN()
#
