# MODIF  DATE 17/01/2012   AUTEUR SELLENET N.SELLENET 
# TITRE CALCUL DES FREQUENCES PROPRES D'UNE POUTRE ARTICULEE
# sdlx400b.para = tps_job 60 mem_job 130Mo ncpus 1 liste_test V
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
# MELANGE D'ELEMNTS POUTRE, COQUE ET VOLUME
# ELEMENTS  : MEPOUDE,DKQQU8 ET HEXA20
# REFERENCE : ANALYTIQUE

DEBUT(CODE=_F( NOM = 'SDLX400B',NIV_PUB_WEB='INTERNET'))

ACIER=DEFI_MATERIAU(          
                         ELAS=_F(  RHO = 2400.,
                           NU = 0., 
                           E = 6.7E10))

MAYA=LIRE_MAILLAGE(FORMAT='MED', )

MATER=AFFE_MATERIAU(    MAILLAGE=MAYA,AFFE=( 
                                 _F(  GROUP_MA = 'VOLUME',
                                        MATER = ACIER),
                                      _F(  GROUP_MA = 'POUTRE',
                                        MATER = ACIER)))

STRUC_1=AFFE_MODELE(    MAILLAGE=MAYA,AFFE=(
                               _F(  GROUP_MA = 'VOLUME',
                                      MODELISATION = '3D', 
                                      PHENOMENE = 'MECANIQUE'),
                                    _F(  GROUP_MA = 'FACES', 
                                      MODELISATION = '3D', 
                                      PHENOMENE = 'MECANIQUE'),

                                    _F(  GROUP_MA = 'POUTRE',
                                      MODELISATION = 'POU_D_E', 
                                      PHENOMENE = 'MECANIQUE'))
                       )

CARA_1=AFFE_CARA_ELEM(      MODELE=STRUC_1,

                                POUTRE=_F( 
                            GROUP_MA = 'POUTRE',
                            SECTION = 'RECTANGLE',
                            CARA = ( 'HY',  'HZ', ),
                            VALE = ( 0.014,  0.014,  ))


                          )

FIXA_1=AFFE_CHAR_MECA(      MODELE=STRUC_1,
                              DDL_IMPO=_F(  GROUP_NO = 'POINT_A',
                                               DX = 0.,
                                               DY = 0.),
                              LIAISON_ELEM=_F(  OPTION = '3D_POU',
                                             GROUP_MA_1 = 'FACES',
                                             GROUP_NO_2 = 'NOE1')

                          )

# CALCUL DES MATRICES ELEMENTAIRES DE RIGIDITE ET DE MASSE

K_EL_1=CALC_MATR_ELEM(        MODELE=STRUC_1,
                                 CARA_ELEM=CARA_1,
                                    CHARGE=FIXA_1,
                                CHAM_MATER=MATER, 
                                   OPTION='RIGI_MECA' )

M_EL_1=CALC_MATR_ELEM(        MODELE=STRUC_1,
                                 CARA_ELEM=CARA_1,
                                    CHARGE=FIXA_1,
                                CHAM_MATER=MATER, 
                                   OPTION='MASS_MECA' )

# NUMEROTATION

NUMERO_1=NUME_DDL(    MATR_RIGI=K_EL_1 )

# ASSEMBLAGE DES MATRICES DE RIGIDITE ET DE MASSE


K_AS_1=ASSE_MATRICE(    MATR_ELEM=K_EL_1, 
                             NUME_DDL=NUMERO_1)

M_AS_1=ASSE_MATRICE(    MATR_ELEM=M_EL_1, 
                             NUME_DDL=NUMERO_1 )

# CALCUL DES MODES PAR SORENSEN + BANDE

MODE_A_1=MODE_ITER_SIMULT(       MATR_A=K_AS_1, 
                                   MATR_B=M_AS_1, 
                               CALC_FREQ=_F(  OPTION = 'BANDE',
                                           FREQ = ( 10.,  2000., )))

TEST_RESU(RESU=(
   _F(   RESULTAT = MODE_A_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.85E-2,
           NUME_MODE = 5,
           VALE = 85.5,     
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_A_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.7E-2,
           NUME_MODE = 7,
           VALE = 277.,         
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_A_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.8E-2,
           NUME_MODE = 9,
           VALE = 577.9,      
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_A_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 1.2E-2,
           NUME_MODE = 11,
           VALE = 988.2,       
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_A_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 3.6E-2,
           NUME_MODE = 13,
           VALE = 1507.9,   
           REFERENCE = 'ANALYTIQUE'))

        )

# CALCUL DES MODES PAR JACOBI  + BANDE

MODE_B_1=MODE_ITER_SIMULT(       MATR_A=K_AS_1, 
                                   MATR_B=M_AS_1, 
                                  METHODE='JACOBI',
                               CALC_FREQ=_F(  OPTION = 'BANDE',
                                           FREQ = ( 10.,  2000., )),
                                VERI_MODE=_F(  SEUIL = 1.E-3))

TEST_RESU(RESU=(
   _F(   RESULTAT = MODE_B_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.85E-2,
           NUME_MODE = 5,
           VALE = 85.5,        
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_B_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.7E-2,
           NUME_MODE = 7,
           VALE = 277.,    
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_B_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.8E-2,
           NUME_MODE = 9,
           VALE = 577.9,    
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_B_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 1.2E-2,
           NUME_MODE = 11,
           VALE = 988.2,     
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_B_1,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 3.7E-2,
           NUME_MODE = 13,
           VALE = 1507.9,     
           REFERENCE = 'ANALYTIQUE'))

        )

# APPUI ELASTIQUE

STRUC_2=AFFE_MODELE(    MAILLAGE=MAYA,AFFE=(
                               _F(  GROUP_MA = 'VOLUME',
                                      MODELISATION = '3D', 
                                      PHENOMENE = 'MECANIQUE'),
                                    _F(  GROUP_MA = 'FACES', 
                                      MODELISATION = '3D', 
                                      PHENOMENE = 'MECANIQUE'),
                                    _F(  GROUP_MA = 'FAC_RES',
                                      MODELISATION = '3D', 
                                      PHENOMENE = 'MECANIQUE'),


                                    _F(  GROUP_MA = 'POUTRE',
                                      MODELISATION = 'POU_D_E', 
                                      PHENOMENE = 'MECANIQUE'),

                                    _F(  GROUP_MA = 'RESSORT',
                                      MODELISATION = 'DIS_TR',
                                      PHENOMENE = 'MECANIQUE'))
                       )

CARA_2=AFFE_CARA_ELEM(      MODELE=STRUC_2,

                                POUTRE=_F( 
                            GROUP_MA = 'POUTRE',
                            SECTION = 'RECTANGLE',
                            CARA = ( 'HY',  'HZ', ),
                            VALE = ( 0.014,  0.014,  )),

                               DISCRET=(_F( 
                            CARA = 'K_TR_D_N',
                            GROUP_MA = 'RESSORT',
                            REPERE = 'GLOBAL',
                            VALE = ( 0.,18000.,0.,
                                        0.,0.,0.,       )),
                                          _F( 
                            CARA = 'M_TR_D_N',
                            GROUP_MA = 'RESSORT',
                            REPERE = 'GLOBAL',
                  VALE = ( 0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,)),)


                          )

FIXA_2=AFFE_CHAR_MECA(      MODELE=STRUC_2,
                              DDL_IMPO=_F(  GROUP_NO = 'POINT_A',
                                               DX = 0.,
                                               DY = 0.),LIAISON_ELEM=(
                              _F(  OPTION = '3D_POU',
                                             GROUP_MA_1 = 'FACES',
                                             GROUP_NO_2 = 'NOE1'),
                              _F(  OPTION = '3D_POU',
                                             GROUP_MA_1 = 'FAC_RES',
                                             GROUP_NO_2 = 'NO_RES'))

                          )

# CALCUL DES MATRICES ELEMENTAIRES DE RIGIDITE ET DE MASSE

K_EL_2=CALC_MATR_ELEM(        MODELE=STRUC_2,
                                 CARA_ELEM=CARA_2,
                                    CHARGE=FIXA_2,
                                CHAM_MATER=MATER, 
                                   OPTION='RIGI_MECA' )

M_EL_2=CALC_MATR_ELEM(        MODELE=STRUC_2,
                                 CARA_ELEM=CARA_2,
                                    CHARGE=FIXA_2,
                                CHAM_MATER=MATER, 
                                   OPTION='MASS_MECA' )

# NUMEROTATION

NUMERO_2=NUME_DDL(    MATR_RIGI=K_EL_2,METHODE='MULT_FRONT',RENUM='MDA' )

# ASSEMBLAGE DES MATRICES DE RIGIDITE ET DE MASSE


K_AS_2=ASSE_MATRICE(    MATR_ELEM=K_EL_2, 
                             NUME_DDL=NUMERO_2)

M_AS_2=ASSE_MATRICE(    MATR_ELEM=M_EL_2, 
                             NUME_DDL=NUMERO_2 )

# CALCUL DES MODES PAR SORENSEN + BANDE

MODE_A_2=MODE_ITER_SIMULT(       MATR_A=K_AS_2, 
                                   MATR_B=M_AS_2, 
                               CALC_FREQ=_F(  OPTION = 'BANDE',
                                           FREQ = ( 10.,  2000., )))

TEST_RESU(RESU=(
   _F(   RESULTAT = MODE_A_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.4E-2,
           NUME_ORDRE = 1,
           VALE = 43.1,       
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_A_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.6E-2,
           NUME_ORDRE = 2,
           VALE = 115.4,      
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_A_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.6E-2,
           NUME_ORDRE = 4,
           VALE = 286.5,       
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_A_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.8E-2,
           NUME_ORDRE = 6,
           VALE = 582.3,      
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_A_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 1.2E-2,
           NUME_ORDRE = 8,
           VALE = 990.7,       
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_A_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 3.7E-2,
           NUME_ORDRE = 10,
           VALE = 1509.6,      
           REFERENCE = 'ANALYTIQUE'))

        )

# CALCUL DES MODES PAR JACOBI  + BANDE

MODE_B_2=MODE_ITER_SIMULT(       MATR_A=K_AS_2, 
                                   MATR_B=M_AS_2, 
                                  METHODE='JACOBI',
                                  PREC_BATHE=1.E-12,
                                  PREC_JACOBI=1.E-4,
                               CALC_FREQ=_F(  OPTION = 'BANDE',
                                           FREQ = ( 10.,  2000., )),
                                VERI_MODE=_F( SEUIL = 2.E-4) )

TEST_RESU(RESU=(
   _F(   RESULTAT = MODE_B_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.4E-2,
           NUME_ORDRE = 1,
           VALE = 43.1,      
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_B_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.6E-2,
           NUME_ORDRE = 2,
           VALE = 115.4,     
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_B_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.6E-2,
           NUME_ORDRE = 4,
           VALE = 286.5,         
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_B_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 0.8E-2,
           NUME_ORDRE = 6,
           VALE = 582.3,     
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_B_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 1.2E-2,
           NUME_ORDRE = 8,
           VALE = 990.7,       
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODE_B_2,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 3.7E-2,
           NUME_ORDRE = 10,
           VALE = 1509.6,      
           REFERENCE = 'ANALYTIQUE'))

        )

FIN()
#
