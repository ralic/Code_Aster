# MODIF  DATE 23/08/2004   AUTEUR CIBHHLV L.VIVAN 
# RESPONSABLE JMBHH01 J.M.PROIX
#
DEBUT(CODE=_F(NOM='FORMA01A', NIV_PUB_WEB='INTERNET',),);
# TITRE TRAVAUX PRATIQUES FORMATION DE BASE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#
#        TUYAUTERIE COMPORTANT UN COUDE
#     MODELISATION PAR DES ELEMENTS POUTRES
#     -------------------------------------
#      CALCUL 1 : LECTURE MAILLAGE GIBI, SANS COEF FLEX
#      CALCUL 2 : LECTURE MAILLAGE GMSH, POU_D_T + POU_C_T, AVEC COEF FLEX
#
#

RC = 0.6;

EPTUB = 0.02;

REXT = 0.2;

LG = 3.0;

#
# INTERFACE AVEC GIBI ET LECTURE DU MAILLAGE
#
#
#


PRE_GIBI();

MAIL=LIRE_MAILLAGE();

DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_MA=_F(NOM='TOUT',
                                 TOUT='OUI',),);
#
# DEFINITION DES ELEMENTS FINIS UTILISES
#
#
#


MODMECA=AFFE_MODELE(MAILLAGE=MAIL,
                    AFFE=(_F(GROUP_MA=('TUY1','TUY2',),
                             PHENOMENE='MECANIQUE',
                             MODELISATION='POU_D_T',),
                          _F(GROUP_MA='COUDE',
                             PHENOMENE='MECANIQUE',
                             MODELISATION='POU_C_T',),),);
#
# DEFINITION DU MATERIAU UTILISE
#
#
#


ACIER=DEFI_MATERIAU(ELAS=_F(E=204000000000.0,
                            NU=0.3,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=_F(TOUT='OUI',
                            MATER=ACIER,),);
#
# CARACTERISTIQUES DES POUTRES
#
#
#


CARA_POU=AFFE_CARA_ELEM(MODELE=MODMECA,
                        POUTRE=_F(GROUP_MA='TOUT',
                                  SECTION='CERCLE',
                                  CARA=('R','EP',),
                                  VALE=(REXT,EPTUB,),),
                        DEFI_ARC=_F(GROUP_MA='COUDE',
                                    CENTRE=(RC,LG,0.0,),),);
#
# DEFINITION DES CONDITIONS AUX LIMITES ET DU CHARGEMENT
#   AU POINT A : ENCASTREMENT
#   AU POINT B : FORCE IMPOSEE
#                FY = 100000. N (FX,FZ,MX,MY,MZ NULLES)
#
#
#


BLOQUAGE=AFFE_CHAR_MECA(MODELE=MODMECA,
                        DDL_IMPO=_F(GROUP_NO='PA',
                                    DX=0.0,
                                    DY=0.0,
                                    DZ=0.0,
                                    DRX=0.0,
                                    DRY=0.0,
                                    DRZ=0.0,),);

# BLOQUAGE=AFFE_CHAR_MECA(MODELE=MODMECA,
#                         DDL_IMPO=_F(GROUP_NO='PA',
#                                     LIAISON='ENCASTRE',)
#                                     ,);

CHARGT=AFFE_CHAR_MECA(MODELE=MODMECA,
                      FORCE_NODALE=_F(GROUP_NO='PB',
                                      FY=100000.0,),);
#
# RESOLUTION DU PROBLEME ELASTIQUE
#
#
#


RESU1=MECA_STATIQUE(MODELE=MODMECA,
                    CHAM_MATER=CHMAT,
                    CARA_ELEM=CARA_POU,
                    EXCIT=(_F(CHARGE=BLOQUAGE,),
                           _F(CHARGE=CHARGT,),),);
#
# CALCUL DES EFFORTS
#
#


CALC_ELEM(reuse =RESU1,
                OPTION='EFGE_ELNO_DEPL',
                RESULTAT=RESU1,);

# ECRITURE DES RESULTATS AU FORMAT RESULTAT
#
# VALEURS MIN ET MAX DES EFFORTS
#
#
IMPR_RESU(MODELE=MODMECA,
          RESU=(_F(RESULTAT=RESU1,
                   NOM_CHAM='EFGE_ELNO_DEPL',
                   TOUT_CMP='OUI',
                   TOUT='OUI',
                   VALE_MAX='OUI',
                   VALE_MIN='OUI',),
                _F(RESULTAT=RESU1,
                   NOM_CHAM='EFGE_ELNO_DEPL',
                   TOUT_CMP='OUI',
                   GROUP_NO='PB',),),);

IMPR_RESU(MODELE=MODMECA,
          RESU=_F(RESULTAT=RESU1,
                  NOM_CHAM='DEPL',
                  GROUP_NO='PB',),);

# ECRITURE DES RESULTATS AU FORMAT CASTEM
#
#
IMPR_RESU(MODELE=MODMECA,FORMAT='CASTEM',
          RESU=(_F(MAILLAGE=MAIL,
                   RESULTAT=RESU1,
                   NOM_CHAM=('DEPL','EFGE_ELNO_DEPL',),),),);
# COEF DE FLEXIBILITE POUR
# COMPARAISON AUX COQUES (MODELISATION B) ET TUYAU (MODELISATION D)
# RAYON DE COURBURE DES COUDES
#
#
#
#

RMOY=REXT-(EPTUB/2)

RINT=RMOY-(EPTUB/2)

SINT=pi*(RINT*RINT)

SEXT=pi*(REXT*REXT)

SURF=SEXT-SINT

#CALCUL DU COEFFICIENT DE FLEXIBILITE COUDE SELON RCCM
#
#


LAMBDA=(EPTUB*RC)/(RMOY*RMOY)

FRCCM=1.65/LAMBDA

PRE_GMSH(UNITE_GMSH=18,
           UNITE_MAILLAGE=21,);

MAIL2=LIRE_MAILLAGE(UNITE=21);

MAIL2=DEFI_GROUP(reuse =MAIL2,
              MAILLAGE=MAIL2,
              CREA_GROUP_NO=(
              _F(GROUP_NO='GM101',NOM='PA'),
              _F(GROUP_NO='GM102',NOM='PB'),
              ),
              CREA_GROUP_MA=(
              _F(GROUP_MA='GM103',NOM='TUY1'),
              _F(GROUP_MA='GM105',NOM='TUY2'),
              _F(GROUP_MA='GM104',NOM='COUDE'),
              _F(TOUT='OUI',NOM='TOUT'),
              ),);

#
# DEFINITION DES ELEMENTS FINIS UTILISES
#
#
#


MODMECA2=AFFE_MODELE(MAILLAGE=MAIL2,
                    AFFE=(_F(GROUP_MA=('TUY1','TUY2',),
                             PHENOMENE='MECANIQUE',
                             MODELISATION='POU_D_T',),
                          _F(GROUP_MA='COUDE',
                             PHENOMENE='MECANIQUE',
                             MODELISATION='POU_C_T',),),);
#
# DEFINITION DU MATERIAU UTILISE
#
#


CHMAT2=AFFE_MATERIAU(MAILLAGE=MAIL2,
                    AFFE=_F(TOUT='OUI',
                            MATER=ACIER,),);

#
# DEFINITION DES CONDITIONS AUX LIMITES ET DU CHARGEMENT
#   AU POINT A : ENCASTREMENT
#   AU POINT B : FORCE IMPOSEE
#                FY = 100000. N (FX,FZ,MX,MY,MZ NULLES)

# BLOQUAG2=AFFE_CHAR_MECA(MODELE=MODMECA2,
#                         DDL_IMPO=_F(GROUP_NO='PA',
#                                     DX=0.0,
#                                     DY=0.0,
#                                     DZ=0.0,
#                                     DRX=0.0,
#                                     DRY=0.0,
#                                     DRZ=0.0,),);

BLOQUAG2=AFFE_CHAR_MECA_F(MODELE=MODMECA2,
                        DDL_IMPO=_F(GROUP_NO='PA',
                                    LIAISON='ENCASTRE',)
                                    ,);

CHARGT2=AFFE_CHAR_MECA(MODELE=MODMECA2,
                      FORCE_NODALE=_F(GROUP_NO='PB',
                                      FY=100000.0,),);
#
# CARACTERISTIQUES DES POUTRES
#

CARAFLEX=AFFE_CARA_ELEM(MODELE=MODMECA2,
                        POUTRE=_F(GROUP_MA='TOUT',
                                  SECTION='CERCLE',
                                  CARA=('R','EP',),
                                  VALE=(REXT,EPTUB,),),
                        DEFI_ARC=_F(GROUP_MA='COUDE',
                                    CENTRE=(RC,LG,0.0,),
                                    RAYON=RC,
                                    COEF_FLEX=FRCCM,),);


RESU2=MECA_STATIQUE(MODELE=MODMECA2,
                     CHAM_MATER=CHMAT2,
                     CARA_ELEM=CARAFLEX,
                     EXCIT=(_F(CHARGE=BLOQUAG2,),
                            _F(CHARGE=CHARGT2,),),
                     );

CALC_ELEM( reuse= RESU2 ,RESULTAT= RESU2 , 
                     OPTION=('SIGM_ELNO_DEPL','EFGE_ELNO_DEPL',),);

IMPR_RESU(MODELE=MODMECA2,
          RESU=(_F(RESULTAT=RESU2,
                   NOM_CHAM='DEPL',
                   GROUP_NO='PB',),),)

IMPR_RESU(MODELE=MODMECA2,FORMAT='GMSH',UNITE=30,
          RESU=(_F(RESULTAT=RESU2,
                   NOM_CHAM='DEPL',),),)

TEST_RESU(RESU=(_F(RESULTAT=RESU1,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PB',
                   VALE=-0.0265735393344,
                   REFERENCE='NON_REGRESSION',
                   VERSION='5.6.6',),
                _F(RESULTAT=RESU1,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PB',
                   VALE=0.0670161110121,
                   REFERENCE='NON_REGRESSION',
                   VERSION='5.6.6',),
                _F(RESULTAT=RESU1,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRZ',
                   GROUP_NO='PB',
                   VALE=0.0209702889635,
                   REFERENCE='NON_REGRESSION',
                   VERSION='5.6.6',),
                _F(RESULTAT=RESU2,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PB',
                   VALE=-0.029830769731,
                   REFERENCE='NON_REGRESSION',
                   VERSION='5.6.6',),
                _F(RESULTAT=RESU2,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PB',
                   VALE=0.11562748791,
                   REFERENCE='NON_REGRESSION',
                   VERSION='5.6.6',),
                _F(RESULTAT=RESU2,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRZ',
                   GROUP_NO='PB',
                   VALE=0.0353012450526,
                   REFERENCE='NON_REGRESSION',
                   VERSION='5.6.6',),),);

FIN();
#
