# MODIF  DATE 03/05/2010   AUTEUR PROIX J-M.PROIX 
# TITRE CAS TEST HYDROSTATIQUE CAM_CLAY EN 3D; AVEC SIMU_POINT_MAT
# ssnv160e.para = tps_job 60 mem_job 60Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2007  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================

DEBUT(CODE=_F( NOM = 'SSNV160E',NIV_PUB_WEB='INTERNET')   )

############################################

#  CARACTERISTIQUES DU MATERIAU
#

MATER=DEFI_MATERIAU(ELAS=_F(E=7.74E6,
                            NU=0.285,
                            ALPHA=0.,),
                CAM_CLAY=_F(MU  = 6.E6,
                            PORO=0.66,
                            LAMBDA=0.25,
                            KAPA=0.05,           
                            M=0.9,
                            PRES_CRIT=3.E5,
                            KCAM=0.,
                            PTRAC=0.,),);

############################################

#  CHARGEMENT
#

PRESS1=DEFI_FONCTION(NOM_PARA='INST',
                    NOM_RESU='PRESSION',
                    VALE=
                    (0.0,0.0,
                    100.0,-100000.0),
                    PROL_DROITE='CONSTANT',
                    PROL_GAUCHE='EXCLU',);

PRESS2=DEFI_FONCTION(NOM_PARA='INST',
                    NOM_RESU='PRESSION',
                    VALE=
                    (0.0,0.0,
                    100.0,-100000.0,
                    600.0,-320000.0,
                    1000.0,-350000.0,
                    5000.0,-500000.0,
                    6000.0,-600000.0,
                    8000.0,-800000.0),
                    PROL_DROITE='CONSTANT',
                    PROL_GAUCHE='EXCLU',);

############################################

#  LISTE DES INSTANTS DE CALCUL
#


LI1=DEFI_LIST_REEL(DEBUT=0.0,
                   INTERVALLE=(_F(JUSQU_A=100.0,
                                  NOMBRE=1,),
                               _F(JUSQU_A=600.0,
                                  NOMBRE=5,),
                               _F(JUSQU_A=1000.0,
                                  NOMBRE=4,),
                               _F(JUSQU_A=5000.0,
                                  NOMBRE=10,),
                               _F(JUSQU_A=6000.0,
                                  NOMBRE=10,),
                               _F(JUSQU_A=7000.0,
                                  NOMBRE=10,),
                               _F(JUSQU_A=7990.0,
                                  NOMBRE=9,),
                               _F(JUSQU_A=8000.0,
                                  NOMBRE=1,),
                               _F(JUSQU_A=9000.0,
                                  NOMBRE=10,),
                               _F(JUSQU_A=9990.0,
                                  NOMBRE=9,),
                               _F(JUSQU_A=1.E4,
                                  NOMBRE=1,),),);

############################################
# CALCUL ELASTIQUE PRELIMINAIRE

RESU1=SIMU_POINT_MAT(
                   COMP_INCR=_F(RELATION='ELAS',),
                   NEWTON=_F(MATRICE='TANGENTE',REAC_ITER=1,),
                   CONVERGENCE=_F(ITER_GLOB_MAXI=10,),
                   MATER      = MATER,  
                   INCREMENT=_F(LIST_INST=LI1,INST_FIN=100.),
                   SIGM_IMPOSE=_F(SIXX=PRESS1, SIYY=PRESS1, SIZZ=PRESS1,
                   ),
                        );

IMPR_TABLE(TABLE=RESU1)


############################################
#   CHARGE
#

SXXINI= -1.E5
SYYINI= -1.E5
SZZINI= -1.E5
SXYINI= 0
SYZINI= 0
SXZINI= 0


RESU2=SIMU_POINT_MAT(
                   COMP_INCR=_F(RELATION='CAM_CLAY',ITER_INTE_MAXI=100,ITER_INTE_PAS=-10,),
                   NEWTON=_F(MATRICE='TANGENTE',REAC_ITER=1,),
                   CONVERGENCE=_F(ITER_GLOB_MAXI=10,),
                   MATER      = MATER,  
                   INCREMENT=_F(LIST_INST=LI1,INST_FIN = 7990.,INST_INIT=100.),
                   SIGM_INIT=_F(SIXX=SXXINI,SIYY=SYYINI,SIZZ=SZZINI,
                                ),
                   SIGM_IMPOSE=_F(SIXX=PRESS2, SIYY=PRESS2, SIZZ=PRESS2,
                   ),
                        );
IMPR_TABLE(TABLE=RESU2)

############################################
# TEST DE LA REPRISE

SXXINI= -7.99000E+05
SYYINI= SXXINI
SZZINI= SXXINI
SXYINI= 0
SYZINI= 0
SXZINI= 0


EXXINI= -1.82689E-02
EYYINI= EXXINI
EZZINI= EXXINI
EXYINI= 0
EYZINI= 0
EXZINI= 0

RESU3=SIMU_POINT_MAT(
                   COMP_INCR=_F(RELATION='CAM_CLAY',ITER_INTE_MAXI=100,ITER_INTE_PAS=-10,),
                   NEWTON=_F(MATRICE='TANGENTE',REAC_ITER=1,),
                   CONVERGENCE=_F(ITER_GLOB_MAXI=10,),
                   MATER      = MATER,  
                   INCREMENT=_F(LIST_INST=LI1,INST_INIT= 7990.,INST_FIN = 8000.),
                   SIGM_INIT=_F(SIXX=SXXINI,SIYY=SYYINI,SIZZ=SZZINI,
                                #SIXY=SXYINI,SIYZ=SYZINI,SIXZ=SXZINI,
                                ),
                   EPSI_INIT=_F(EPXX=EXXINI,EPYY=EYYINI,EPZZ=EZZINI,
                                EPXY=EXYINI,EPYZ=EYZINI,EPXZ=EXZINI,
                                ),
                   VARI_INIT=_F(
                                 VALE=(3.99500E+05,  1.00000E+00,  7.99000E+05 , 4.63066E-10,  1.94773E-02,  2.99086E-17,  1.79821E+00),
                                ),
                   SIGM_IMPOSE=_F(SIXX=PRESS2, SIYY=PRESS2, SIZZ=PRESS2,
                   ),
                        );
IMPR_TABLE(TABLE=RESU3)

############################################
# ON TESTE PAR RAPPORT A lA MODELISATION C


TEST_TABLE( TABLE=RESU3,
            FILTRE=_F(NOM_PARA='INST',VALE=8000.),
            REFERENCE='AUTRE_ASTER',NOM_PARA ='EPXX',VALE=-1.830436E-02)


TEST_TABLE( TABLE=RESU3,
            FILTRE=_F(NOM_PARA='INST',VALE=8000.),
            REFERENCE='AUTRE_ASTER',NOM_PARA ='SIXX',VALE=-8.00001E+05)

TEST_TABLE( TABLE=RESU3,
            FILTRE=_F(NOM_PARA='INST',VALE=8000.),
            REFERENCE='AUTRE_ASTER',NOM_PARA ='V1',VALE=4.00000E+05)



FIN()
