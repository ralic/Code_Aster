# MODIF  DATE 06/07/2005   AUTEUR LAMARCHE S.LAMARCHE 
# TITRE  CONTACT ENTRE DEUX PLAQUES EN APPUI SIMPLE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2005  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#
# MAILLE QUA4, MODELISATION DKT, CONTACT METHODE CONTINUE
#
DEBUT( CODE=_F( NOM = 'SSNV129D',NIV_PUB_WEB='INTERNET') )
#
MA1=LIRE_MAILLAGE(VERI_MAIL=_F(VERIF='OUI'),)
#


MO=AFFE_MODELE(
                           MAILLAGE=MA1,
                           AFFE = ( _F(
                                 GROUP_MA     = ('Q21',),
                                 PHENOMENE    = 'MECANIQUE',
                                 MODELISATION = 'DKT',),
                                    _F(
                                 GROUP_MA     = 'Q1',
                                 PHENOMENE    = 'MECANIQUE',
                                 MODELISATION = 'DKT'),),
                        )
#
MA1=DEFI_GROUP(reuse     = MA1,
                MAILLAGE = MA1,
                CREA_GROUP_NO=(
                              _F(GROUP_MA='Q1',),
                              _F(GROUP_MA='Q21',),
                              _F(GROUP_MA='DR1',),
                              _F(GROUP_MA='DR2',),
                              _F(GROUP_MA='DR3',),
                              _F(GROUP_MA='DR4',),
                              _F(GROUP_MA='DR24',),
                              _F(GROUP_MA='DR23',),
                              _F(GROUP_MA='DR22',),
                              _F(GROUP_MA='DR21',),
                              )
);
#
CAREL=AFFE_CARA_ELEM(   MODELE=MO,
                              COQUE=(_F( GROUP_MA = ('Q21',),
                                     EPAIS = 0.5,),
                                    _F( GROUP_MA = 'Q1',
                                     EPAIS = 0.5,),),
                           );
#
MAT=DEFI_MATERIAU(
                            ELAS=_F(
                                  E = 2.E+11,
                                  NU = 0.3,
                               )
                          )
#
CHMAT=AFFE_MATERIAU(
                           MAILLAGE = MA1,
                           AFFE = _F(
                                 TOUT  = 'OUI',
                                 MATER = MAT)
                           )
#
CHA1=AFFE_CHAR_MECA(
                     MODELE=MO,
                     DDL_IMPO=(
                     _F(  NOEUD    = 'N177',     DX = 0.,  DY = 0.0,),
                     _F(  NOEUD    = 'N177',     DRX = 0., DRY = 0.0, DRZ = 0.0,),
                     _F(  NOEUD    = 'N466',     DX = 0.,  DY = 0.0,),
                     _F(  NOEUD    = 'N466',     DRX = 0., DRY = 0.0, DRZ = 0.0,),
                     _F(  GROUP_NO = 'DR1',      DY = 0.,  DZ = 0.0,),
                     _F(  GROUP_NO = 'DR2',      DX = 0.0, DZ = 0.0,),
                     _F(  GROUP_NO = 'DR3',      DY = 0.,  DZ = 0.0,),
                     _F(  GROUP_NO = 'DR4',      DX = 0.0, DZ = 0.0,),
                     _F(  GROUP_NO = 'DR1',      DRY = 0.0,),
                     _F(  GROUP_NO = 'DR2',      DRX = 0.,),
                     _F(  GROUP_NO = 'DR3',      DRY = 0.0,),
                     _F(  GROUP_NO = 'DR4',      DRX = 0.,),
                     _F(  GROUP_NO = 'DR21',     DY = 0.,  DZ = 0.0,),
                     _F(  GROUP_NO = 'DR22',     DX = 0.0, DZ = 0.0,),
                     _F(  GROUP_NO = 'DR23',     DY = 0.,  DZ = 0.0,),
                     _F(  GROUP_NO = 'DR24',     DX = 0.0, DZ = 0.0,),
                     _F(  GROUP_NO = 'DR21',     DRY = 0.0,),
                     _F(  GROUP_NO = 'DR22',     DRX = 0.,),
                     _F(  GROUP_NO = 'DR23',     DRY = 0.0,),
                     _F(  GROUP_NO = 'DR24',     DRX = 0.,),),
                     PRES_REP = _F( GROUP_MA = 'Q21', PRES = -2.5E+8, ),
                     )
#

#
CHA2=AFFE_CHAR_MECA(
                     MODELE=MO,
                     CONTACT=_F(  
                                  APPARIEMENT    = 'MAIT_ESCL',
                                  RECHERCHE      = 'NOEUD_BOUCLE',
                                  METHODE        = 'CONTINUE',
                                  MODL_AXIS      = 'NON',
                                  GROUP_MA_MAIT     = 'Q1',
                                  GROUP_MA_ESCL     = 'Q21S',

                                      ),
                           )
#

#
RAMPE=DEFI_FONCTION(   NOM_PARA='INST',
            PROL_GAUCHE='LINEAIRE',   PROL_DROITE='LINEAIRE',
            VALE=(0.0,0.0,1.0,1.0,) )

#
L_INST=DEFI_LIST_REEL(
                       DEBUT      = 0.0,
                       INTERVALLE = _F( JUSQU_A = 1., NOMBRE = 1)
                           )

L_INST2 = DEFI_LIST_REEL(
                       DEBUT      = 0.0,
                       INTERVALLE = _F( JUSQU_A = 1., NOMBRE = 5)
                           )
#
RESU=STAT_NON_LINE(
                    MODELE     = MO,
                    CARA_ELEM  = CAREL,
                    CHAM_MATER = CHMAT,
                    EXCIT      = ( _F(
                               CHARGE    = CHA1,
                               FONC_MULT = RAMPE),
                                   _F( CHARGE = CHA2,),
                                 ),
                    COMP_INCR  = _F(
                               RELATION   = 'ELAS',
                                   ),
                    NEWTON     = _F(
                               MATRICE    = 'TANGENTE',
                               REAC_ITER  = 1,
                                   ),
                    INCREMENT  = _F(
                               LIST_INST     = L_INST,
                                   ),
                    SOLVEUR    = _F( 
                               METHODE     = 'MULT_FRONT',
                               RENUM       = 'METIS',
                                   ),
                               CONVERGENCE = _F(
                                           ITER_GLOB_MAXI = 10),
                    INFO       = 1
              )
#

RESU = CALC_ELEM( reuse = RESU,
                  OPTION='VARI_ELNO_ELGA',
                  RESULTAT=RESU)

RESU = CALC_ELEM( reuse = RESU,
                  NIVE_COUCHE='INF',
                  OPTION='SIGM_ELNO_COQU',
                  RESULTAT=RESU)

TEST_RESU(RESU=(  _F( 
                     RESULTAT   = RESU,
                     NUME_ORDRE = 1, 
                     NOM_CHAM   = 'DEPL', 
                     NOEUD      = 'N177', 
                     NOM_CMP    = 'DZ', 
                     VALE       = -3.45721E-1, 
                     PRECISION  = 1.E-3,
                     CRITERE    = 'RELATIF',
                     REFERENCE='NON_REGRESSION',
                     VERSION = '8.0.25',
                    ),
               _F( 
                     RESULTAT   = RESU, 
                     NUME_ORDRE = 1, 
                     NOM_CHAM   = 'DEPL', 
                     NOEUD      = 'N132', 
                     NOM_CMP    = 'DZ', 
                     VALE       = -2.89054E-1, 
                     PRECISION  = 1.E-3,
                     CRITERE    = 'RELATIF',
                     REFERENCE='NON_REGRESSION',
                     VERSION = '8.0.25',
                    ),
               _F( 
                     RESULTAT   = RESU, 
                     NUME_ORDRE = 1, 
                     NOM_CHAM   = 'DEPL', 
                     NOEUD      = 'N204', 
                     NOM_CMP    = 'DZ', 
                     VALE       = -2.79986E-1, 
                     PRECISION  = 1.E-3, 
                     CRITERE    = 'RELATIF',
                     REFERENCE='NON_REGRESSION',
                     VERSION = '8.0.25',
                    ),
               _F( 
                     RESULTAT   = RESU, 
                     NUME_ORDRE = 1, 
                     NOM_CHAM   = 'DEPL', 
                     NOEUD      = 'N211', 
                     NOM_CMP    = 'DZ', 
                     VALE       = -2.46713E-1, 
                     PRECISION  = 1.E-3,
                     CRITERE    = 'RELATIF',
                     REFERENCE='NON_REGRESSION',
                     VERSION = '8.0.25',
                    ))
       )




TEST_RESU(RESU=(  _F( 
                     RESULTAT   = RESU,
                     NUME_ORDRE = 1, 
                     NOM_CHAM   = 'SIGM_ELNO_COQU', 
                     MAILLE     = 'M120',
                     NOEUD      = 'N177', 
                     NOM_CMP    = 'SIYY', 
                     VALE       = 7.67837E+09, 
                     PRECISION  = 1.E-3,
                     CRITERE    = 'RELATIF',
                     REFERENCE='NON_REGRESSION',
                     VERSION = '8.0.25',
                    ),
               _F( 
                     RESULTAT   = RESU, 
                     NUME_ORDRE = 1, 
                     NOM_CHAM   = 'SIGM_ELNO_COQU', 
                     MAILLE     = 'M72',
                     NOEUD      = 'N132', 
                     NOM_CMP    = 'SIYY', 
                     VALE       = 6.63855E+09, 
                     PRECISION  = 1.E-3,
                     CRITERE    = 'RELATIF',
                     REFERENCE='NON_REGRESSION',
                     VERSION = '8.0.25',
                    ),
               _F( 
                     RESULTAT   = RESU, 
                     NUME_ORDRE = 1, 
                     NOM_CHAM   = 'SIGM_ELNO_COQU', 
                     MAILLE     = 'M149',
                     NOEUD      = 'N204', 
                     NOM_CMP    = 'SIYY', 
                     VALE       = 6.42730E+09, 
                     PRECISION  = 1.E-3, 
                     CRITERE    = 'RELATIF',
                     REFERENCE='NON_REGRESSION',
                     VERSION = '8.0.25',
                    ),
               _F( 
                     RESULTAT   = RESU, 
                     NUME_ORDRE = 1, 
                     NOM_CHAM   = 'SIGM_ELNO_COQU', 
                     MAILLE     = 'M156',
                     NOEUD      = 'N211', 
                     NOM_CMP    = 'SIYY', 
                     VALE       = 5.75036E+09, 
                     PRECISION  = 1.E-3,
                     CRITERE    = 'RELATIF',
                     REFERENCE='NON_REGRESSION',
                     VERSION = '8.0.25',
                    ))
       )

#

FIN();
