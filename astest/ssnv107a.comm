# MODIF  DATE 28/05/2004   AUTEUR LEBOUVIE F.LEBOUVIER 
# CE CAS TEST AVAIT INITIALEMENT POUR REFERENCE LE NUMERO :
# SSNV129A
# TITRE ESSAI DE TRACTION 3D (OHNO)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#----------------------------------------------------------------------
#              TEST MODELE OHNO 3D A CONTRAINTE IMPOSEE 
#                    ESSAI EN TRACTION CISAILLEMENT  
#                        CONTRAINTE IMPOSEE
#----------------------------------------------------------------------
#         ELEMENT 3D CUBE A 8 NOEUDS EN TRACTION - COMPRESSION
#              ETAT UNIAXIAL DE CONTRAINTE DEFORMATION
#       UNITES : NEWTON , MILLIMETRE , SECONDE (N,MM,S,->MPA)
#
#
#               Z       A                     A = 1 MM
#               L<------------->                      2
#                                             S = 1 MM
#                / N5            N8
#              >O--------------O 
#              /L             /L
#         N6  / L         N7 / L
#           >O--+-----------O  L   
#            L  L           L  L
#            L  L     S     L  L
#            L  L           L  L
#            L  L/ N1       L  L N4
#            L >O-----------L--O-> Y
#            L /V           L /    
#         N2 L/          N3 L/ 
#           >O--------------O    
#            
#          /
#         X         
#                                   
#
#
#----------------------------------------------------------------------
#

DEBUT(     CODE=_F( NOM = 'SSNV107A',NIV_PUB_WEB='INTERNET') )

CUBE=LIRE_MAILLAGE(    )

TROISD=AFFE_MODELE(            MAILLAGE=CUBE,
                                    AFFE=_F(   PHENOMENE = 'MECANIQUE',
                                            MODELISATION = '3D',
                                            MAILLE = 'MA1'))

R_I_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     151.,
                                 1000.,  151.,      ))

R_0_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     87.,
                                 1000.,  87.,      ))

B_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     13.2,
                                 1000.,  13.2,     ))

PHI_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     0.69,
                                 1000.,  0.69,       ))

A1_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     114428.40,
                                 1000.,  114428.40,   ))

A2_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     13551.68,
                                 1000., 13551.68,   ))

A3_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     34049.96,
                                 1000.,  34049.96,   ))

A4_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     7396.90,
                                 1000., 7396.90,   ))

A5_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     7396.90,
                                 1000.,  7396.90, ))

GAMMA1_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     1296.58,
                                 1000.,  1296.58,  ))

GAMMA2_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     322.24,
                                 1000.,  322.24,  ))

GAMMA3_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     6401.20,
                                 1000.,  6401.20,  ))

GAMMA4_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     866.74,
                                 1000.,  866.74,  ))

GAMMA5_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     866.74,
                                 1000.,  866.74,  ))

M1_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,       30.,
                                 1000.,    30.,   ))

M2_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     4.43,
                                 1000.,  4.43,   ))

M3_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     0.27,
                                 1000.,  0.27,   ))

M4_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     6.68,
                                 1000.,  6.68,   ))

M5_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     6.68,
                                 1000.,  6.68,   ))

ACIER=DEFI_MATERIAU(            ELAS=_F(   E = 168500.,
                                            NU = .3,      
                                            ALPHA = 0.),

                             OHNO_FO=_F(       R_I = R_I_T,
                                            R_0 = R_0_T,
                                            B = B_T,
                                            PHI = PHI_T,
                                            A1 = A1_T,
                                            A2 = A2_T,
                                            A3 = A3_T,
                                            A4 = A4_T,
                                            A5 = A5_T,
                                            GAMMA1 = GAMMA1_T,
                                            GAMMA2 = GAMMA2_T,
                                            GAMMA3 = GAMMA3_T,
                                            GAMMA4 = GAMMA4_T,
                                            GAMMA5 = GAMMA5_T,
                                            M1 = M1_T,
                                            M2 = M2_T,
                                            M3 = M3_T,
                                            M4 = M4_T,
                                            M5 = M5_T))

MAT=AFFE_MATERIAU(            MAILLAGE=CUBE,
                                    AFFE=_F(  MAILLE = 'MA1',
                                           MATER = ACIER))

#
L_INST=DEFI_LIST_REEL(
      DEBUT=0.0,     INTERVALLE=_F( JUSQU_A = 10., PAS = 1.) )

#

COND_LIM=AFFE_CHAR_MECA(    
                     MODELE=TROISD,DDL_IMPO=(
                   _F(  NOEUD = 'N6',         DZ = 0.,  DY = 0.),
                            _F(  NOEUD = 'N2',         DY = 0.),
                            _F(  GROUP_NO = 'FACE1YZ',  DX = 0.)))

TRAC=AFFE_CHAR_MECA(    
                     MODELE=TROISD,
               FORCE_NODALE=_F(  GROUP_NO = 'FACEYZ',  FX = -.25))

CIS=AFFE_CHAR_MECA(    
                     MODELE=TROISD,FORCE_NODALE=(
               _F(  GROUP_NO = 'FACEYZ',  FY = -.25),
               _F(  GROUP_NO = 'FACEXZ',  FX = -.25),
               _F(  GROUP_NO = 'FACE1YZ', FY = .25),
               _F(  GROUP_NO = 'FACE1XZ', FX = .25)))

COEF_TR=DEFI_FONCTION(  
                              NOM_PARA='INST',
                                  VALE=(
                                           0.,   0.,
                                          10.,   200.,
     ))

COEF_CS=DEFI_FONCTION(  
                              NOM_PARA='INST',
                                  VALE=(
                                           0.,     0.,
                                          10.,    120.,
     ))

SOLNL=STAT_NON_LINE( 
                            MODELE=TROISD,
                        CHAM_MATER=MAT,EXCIT=(
                             _F( 
                CHARGE = COND_LIM),
                             _F( 
                CHARGE = TRAC,
                FONC_MULT = COEF_TR),
                             _F( 
                CHARGE = CIS,
                FONC_MULT = COEF_CS)),
                         COMP_INCR=_F( 
                RELATION = 'OHNO',
                DEFORMATION = 'PETIT',
                TOUT = 'OUI'),
                         INCREMENT=_F( 
                LIST_INST = L_INST),
                            NEWTON=_F( 
                MATRICE = 'TANGENTE',
                REAC_INCR = 1,
                REAC_ITER = 5),
                       CONVERGENCE=_F( 
                ITER_GLOB_MAXI = 40,
                RESI_GLOB_RELA = 1.E-4,
                ITER_INTE_MAXI = 40,
                ITER_INTE_PAS = 5,),
                     RECH_LINEAIRE=_F( 
                ITER_LINE_MAXI = 3,
                RESI_LINE_RELA = 1.E-3)
              )

SOLNL=CALC_ELEM( reuse=SOLNL,
                            OPTION=(
                  'SIEF_ELNO_ELGA',  'VARI_ELNO_ELGA',),
                          RESULTAT=SOLNL,
              )

SOLNL=CALC_ELEM( reuse=SOLNL,               
                                    OPTION='EPSI_ELNO_DEPL',
                                  RESULTAT=SOLNL )

#
TEST_RESU(RESU=(
  _F(  RESULTAT = SOLNL,  NOM_CHAM = 'SIEF_ELNO_ELGA',  NUME_ORDRE = 10,
              MAILLE = 'MA1',  NOEUD = 'N1',  NOM_CMP = 'SIXX',  VALE = 200.),

  _F(  RESULTAT = SOLNL,  NOM_CHAM = 'SIEF_ELNO_ELGA',  NUME_ORDRE = 10,
              MAILLE = 'MA1',  NOEUD = 'N1',  NOM_CMP = 'SIXY',  VALE = 120.),

  _F(  RESULTAT = SOLNL,  NOM_CHAM = 'EPSI_ELNO_DEPL',  NUME_ORDRE = 10,
              MAILLE = 'MA1',  NOEUD = 'N1',  NOM_CMP = 'EPXX',  VALE = 2.91740E-2),

  _F(  RESULTAT = SOLNL,  NOM_CHAM = 'EPSI_ELNO_DEPL',  NUME_ORDRE = 10,
              MAILLE = 'MA1',  NOEUD = 'N1',  NOM_CMP = 'EPXY',  VALE = 2.61142E-2),

  _F(  RESULTAT = SOLNL,  NOM_CHAM = 'VARI_ELNO_ELGA',  NUME_ORDRE = 10,
              MAILLE = 'MA1',  NOEUD = 'N1',
              NOM_CMP = 'V31', VALE = 4.03640E-02))
)

FIN( )
#  
