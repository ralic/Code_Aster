# MODIF  DATE 06/07/2004   AUTEUR CIBHHLV L.VIVAN 
# RESPONSABLE JMBHH01 J.M.PROIX
#
#
DEBUT(CODE=_F(NOM='FORMA01E',
              NIV_PUB_WEB='INTERNET',),);
# TITRE TRAVAUX PRATIQUES FORMATION DE BASE 
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#
#        TUYAUTERIE COMPORTANT UN COUDE
#     MODELISATION PAR DES ELEMENTS TUYAU
#     -------------------------------------
#
#
#

RC = 0.6;

EPTUB = 0.02;

REXT = 0.2;

LG = 3.0;

#
# INTERFACE AVEC GIBI ET LECTURE DU MAILLAGE
#
#
#


PRE_GIBI();

MAIL=LIRE_MAILLAGE();
#
# DEFINITION DES ELEMENTS FINIS UTILISES
#
#
#


MODMECA=AFFE_MODELE(MAILLAGE=MAIL,
                    AFFE=_F(GROUP_MA='TUYAU',
                            PHENOMENE='MECANIQUE',
                            MODELISATION='TUYAU_3M',),);
#
# DEFINITION DU MATERIAU UTILISE
#
#
#


ACIER=DEFI_MATERIAU(ELAS=_F(E=204000000000.0,
                            NU=0.3,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=_F(TOUT='OUI',
                            MATER=ACIER,),);
#
# CARACTERISTIQUES DES POUTRES
#
#
#


CARA_POU=AFFE_CARA_ELEM(MODELE=MODMECA,
                        POUTRE=_F(GROUP_MA='TUYAU',
                                  SECTION='CERCLE',
                                  CARA=('R','EP',),
                                  VALE=(REXT,EPTUB,),
                                  MODI_METRIQUE='OUI',),);
#
# DEFINITION DES CONDITIONS AUX LIMITES ET DU CHARGEMENT
#   AU POINT A : ENCASTREMENT
#   AU POINT B : FORCE IMPOSEE
#                FY = 100000. N (FX,FZ,MX,MY,MZ NULLES)
#
#
#


BLOQUAGE=AFFE_CHAR_MECA(MODELE=MODMECA,
                        DDL_IMPO=_F(GROUP_NO='PA',
                                    DX=0.0,
                                    DY=0.0,
                                    DZ=0.0,
                                    DRX=0.0,
                                    DRY=0.0,
                                    DRZ=0.0,),);

CHARGT=AFFE_CHAR_MECA(MODELE=MODMECA,
                      FORCE_NODALE=_F(GROUP_NO='PB',
                                      FY=100000.0,),);
#
# RESOLUTION DU PROBLEME ELASTIQUE
#
#
#


RESU1=MECA_STATIQUE(MODELE=MODMECA,
                    CHAM_MATER=CHMAT,
                    CARA_ELEM=CARA_POU,
                    EXCIT=(_F(CHARGE=BLOQUAGE,),
                           _F(CHARGE=CHARGT,),),);
#
# CALCUL DES EFFORTS
#
#
#


RESU1=CALC_ELEM(reuse =RESU1,
                MODELE=MODMECA,
                CHAM_MATER=CHMAT,
                CARA_ELEM=CARA_POU,
                OPTION='EFGE_ELNO_DEPL',
                RESULTAT=RESU1,);

RMOY=REXT-(EPTUB/2);

RINT=RMOY-(EPTUB/2);

SINT=pi*(RINT*RINT);

SEXT=pi*(REXT*REXT);

SURF=SEXT-SINT;
PINT = 15000000.0;


CHARG2=AFFE_CHAR_MECA(MODELE=MODMECA,
                      FORCE_TUYAU=_F(GROUP_MA='TUYAU',
                                     PRES=PINT,),);

RESU2=MECA_STATIQUE(MODELE=MODMECA,
                    CHAM_MATER=CHMAT,
                    CARA_ELEM=CARA_POU,
                    EXCIT=(_F(CHARGE=BLOQUAGE,),
                           _F(CHARGE=CHARG2,),),);

RESU2=CALC_ELEM(reuse =RESU2,
                MODELE=MODMECA,
                CHAM_MATER=CHMAT,
                CARA_ELEM=CARA_POU,
                OPTION='EFGE_ELNO_DEPL',
                RESULTAT=RESU2,
                NIVE_COUCHE='SUP',);
# ECRITURE DES RESULTATS AU FORMAT RESULTAT
#
#
#


IMPR_RESU(MODELE=MODMECA,
          RESU=(_F(RESULTAT=RESU1,
                   NOM_CHAM='DEPL',
                   GROUP_NO='PB',),
                _F(RESULTAT=RESU2,
                   NOM_CHAM='DEPL',
                   GROUP_NO='PB',),),);
# VALEURS MIN ET MAX 
#
#
#


IMPR_RESU(MODELE=MODMECA,
          RESU=_F(RESULTAT=RESU1,
                  NOM_CHAM=('EFGE_ELNO_DEPL','DEPL',),
                  VALE_MAX='OUI',
                  VALE_MIN='OUI',),);

IMPR_RESU(MODELE=MODMECA,FORMAT='CASTEM',
          RESU=(_F(MAILLAGE=MAIL,),
                _F(RESULTAT=RESU1,
                   NOM_CHAM=('EFGE_ELNO_DEPL','DEPL',),),
                _F(RESULTAT=RESU2,
                   NOM_CHAM=('EFGE_ELNO_DEPL','DEPL',),),),);

IMPR_RESU(MODELE=MODMECA,FORMAT='GMSH',UNITE=30,
          RESU=_F(RESULTAT=RESU1,
                  NOM_CHAM='DEPL',),);

TEST_RESU(RESU=(_F(RESULTAT=RESU1,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PB',
                   VALE=-0.029348458035,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RESU1,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PB',
                   VALE=0.108348478362,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RESU1,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRZ',
                   GROUP_NO='PB',
                   VALE=0.0332593133346,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RESU2,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PB',
                   VALE=-0.276238753518,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RESU2,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PB',
                   VALE=0.450500046927,
                   REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RESU2,
                   NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRZ',
                   GROUP_NO='PB',
                   VALE=0.125685928458,
                   REFERENCE='NON_REGRESSION',),),);

FIN();
#
