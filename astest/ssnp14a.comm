# MODIF  DATE 25/09/2006   AUTEUR MJBHHPE J.L.FLEJOU 
# TITRE ESSAI DE TRACTION-CISAILLEMENT (MISES ECROUISSAGE CINEMATIQUE)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#......................................................................
# PLAQUE CARREE EN TRACTION CISAILLEMENT CALCUL 3D
# ELASTOPLASTICITE  CINEMATIQUE VON MISES
#......................................................................

DEBUT( CODE=_F(  NOM = 'SSNP14A',NIV_PUB_WEB='INTERNET') )

MA=LIRE_MAILLAGE( )

MO=AFFE_MODELE(   MAILLAGE=MA,
                              VERIF='MAILLE',
                               AFFE=_F(   TOUT = 'OUI',
                                       PHENOMENE = 'MECANIQUE',
                                       MODELISATION = '3D')
                        )

ACIER=DEFI_MATERIAU(        ELAS=_F(  E = 195000.,
                                         NU = 0.3),
                             ECRO_LINE=_F(  D_SIGM_EPSI = 1930.,
                                         SY = 181.)
                          )

CM=AFFE_MATERIAU(   MAILLAGE=MA,
                                 AFFE=_F(  TOUT = 'OUI',
                                        MATER = ACIER)
                          )

SIGMA_F=DEFI_FONCTION(      NOM_PARA='INST',
                              PROL_DROITE='EXCLU',
                             PROL_GAUCHE='EXCLU',
                                    VALE=( 0.0,    0.0,
                                           1.0,  151.2,
                                           2.0,  257.2,
                                           3.0,  259.3,
                                           4.0,    0.0,
                                         )
                          )

TAU_F=DEFI_FONCTION(      NOM_PARA='INST',
                              PROL_DROITE='EXCLU',
                             PROL_GAUCHE='EXCLU',
                                    VALE=( 0.0,    0.0,
                                           1.0,   93.1,
                                           2.0,   33.1,
                                           3.0,    0.0,
                                           4.0,    0.0,
                                         )
                          )

TRACTION=AFFE_CHAR_MECA(        MODELE=MO,
                               FORCE_FACE=_F(  MAILLE = 'GAUCHE',
                                            FX = -1.)
                           )

CISAIL=AFFE_CHAR_MECA(        MODELE=MO,FORCE_FACE=(
                              
                                  _F(  MAILLE = 'GAUCHE',          FY = -1.),
                                  _F(  MAILLE = 'DROITE',          FY = 1.),
                                  _F(  MAILLE = 'HAUT',    FX = 1.),
                                  _F(  MAILLE = 'BAS',     FX = -1.))
                           )

LIAISON=AFFE_CHAR_MECA(      MODELE=MO,DDL_IMPO=(
                              
                               _F(  NOEUD = 'NO4',   DX = 0.,  DY = 0.),
                               _F(  NOEUD = 'NO8',   DX = 0.,  DY = 0.,  DZ = 0.),
                               _F(  NOEUD = 'NO2',   DX = 0.),
                               _F(  NOEUD = 'NO6',   DX = 0.))
                           )

L_INST=DEFI_LIST_REEL(   DEBUT=0.0,INTERVALLE=(
                               _F(  JUSQU_A = 0.1,   NOMBRE = 1),
                                          _F(  JUSQU_A = 0.9,   NOMBRE = 1),
                                          _F(  JUSQU_A = 1.0,   NOMBRE = 1),
                                          _F(  JUSQU_A = 2.0,   NOMBRE = 1),
                                          _F(  JUSQU_A = 3.0,   NOMBRE = 1),
                                          _F(  JUSQU_A = 4.0,   NOMBRE = 1))
                           )

U=STAT_NON_LINE( 
                            MODELE=MO,
                        CHAM_MATER=CM,
                         COMP_INCR=_F( 
                RELATION = 'VMIS_CINE_LINE'),
                         INCREMENT=_F( 
                LIST_INST = L_INST,
                SUBD_METHODE='UNIFORME', SUBD_PAS = 5,
                SUBD_PAS_MINI = 0.0001,
                SUBD_COEF_PAS_1 = 0.001),
                         ARCHIVAGE=_F( 
                LIST_INST = L_INST),
                            NEWTON=_F( 
                MATRICE = 'TANGENTE',
                REAC_ITER = 3),
                       CONVERGENCE=_F( 
                #RESI_GLOB_MAXI   : 1.E-3
                ITER_GLOB_MAXI = 10),EXCIT=(
                             _F( 
                CHARGE = LIAISON), _F( 
                CHARGE = TRACTION,
                FONC_MULT = SIGMA_F), _F( 
                CHARGE = CISAIL,
                FONC_MULT = TAU_F)),
                     RECH_LINEAIRE=_F( 
                ITER_LINE_MAXI = 5)
              )

U=CALC_ELEM( reuse=U,       
                            RESULTAT=U,
                              OPTION=( 'VARI_ELNO_ELGA',
                                       'SIEF_ELNO_ELGA', 
                                       'EPSI_ELNO_DEPL',  )   )

U=CALC_ELEM( reuse=U,      
                           RESULTAT=U,
                             OPTION=( 'DCHA_ELGA_SIGM',
                                      'DCHA_ELNO_SIGM',
                                      'RADI_ELNO_SIGM',  ),
                              NORME='VMIS_CINE'         )

U=CALC_NO( reuse=U,     RESULTAT=U,
                              INST=1.,
                            OPTION='VARI_NOEU_ELGA'     )

VARI=CREA_CHAMP(  OPERATION='EXTR', TYPE_CHAM='ELNO_VARI_R',
      NOM_CHAM='VARI_ELNO_ELGA', RESULTAT=U,  INST=1. )

VARI_N=CREA_CHAMP(  OPERATION='EXTR', TYPE_CHAM='NOEU_VAR2_R',
        NOM_CHAM='VARI_NOEU_ELGA', RESULTAT=U,  INST=1. )

TEST_RESU(RESU=(
 
     _F(  RESULTAT = U,      NOM_CHAM = 'SIEF_ELNO_ELGA',   INST = 1.,
       MAILLE = 'CUBE',   NOEUD = 'NO2',                NOM_CMP = 'SIXX',
       VALE = 151.2),
     _F(  RESULTAT = U,      NOM_CHAM = 'SIEF_ELNO_ELGA',   INST = 1.,
       MAILLE = 'CUBE',   NOEUD = 'NO2',                NOM_CMP = 'SIXY',
       VALE = 93.1),
     _F(  RESULTAT = U,      NOM_CHAM = 'EPSI_ELNO_DEPL',   INST = 1.,
       MAILLE = 'CUBE',   NOEUD = 'NO2',                NOM_CMP = 'EPXX',
       VALE = 1.48297E-2),
     _F(  RESULTAT = U,      NOM_CHAM = 'EPSI_ELNO_DEPL',   INST = 1.,
       MAILLE = 'CUBE',   NOEUD = 'NO2',                NOM_CMP = 'EPXY',
       VALE = 1.36014E-2),
     _F(  RESULTAT = U,      NOM_CHAM = 'VARI_ELNO_ELGA',   INST = 1.,
       MAILLE = 'CUBE',   NOEUD = 'NO2',   NOM_CMP = 'V2',
       VALE = -9.13200),
     _F(  RESULTAT = U,      NOM_CHAM = 'VARI_ELNO_ELGA',   INST = 1.,
       MAILLE = 'CUBE',   NOEUD = 'NO2',   NOM_CMP = 'V4',
       VALE = 1.68688E+01),
     _F(  RESULTAT = U,      NOM_CHAM = 'VARI_ELNO_ELGA',   INST = 1.,
       MAILLE = 'CUBE',   NOEUD = 'NO2',   NOM_CMP = 'V7',
       VALE = 1.),
     _F(  RESULTAT = U,      NOM_CHAM = 'RADI_ELNO_SIGM',   NUME_ORDRE = 1,
       MAILLE = 'CUBE',   NOEUD = 'NO2',   NOM_CMP = 'V1',
       VALE = 0.,     CRITERE = 'ABSOLU'),
     _F(  RESULTAT = U,      NOM_CHAM = 'RADI_ELNO_SIGM',   NUME_ORDRE = 2,
       MAILLE = 'CUBE',   NOEUD = 'NO4',   NOM_CMP = 'V1',
       VALE = 0.,     CRITERE = 'ABSOLU')),
 
     CHAM_ELEM=_F(  CHAM_GD = VARI,
       MAILLE = 'CUBE',   NOEUD = 'NO2',   NOM_CMP = 'V2',
       VALE = -9.13200)
            )

#=========================================


TR1=POST_RELEVE_T( 
        ACTION=_F(  INTITULE = 'EXTR_EPSI',
                 NOEUD = 'NO2',
                 RESULTAT = U,
                 NOM_CHAM = 'EPSI_ELNO_DEPL',
                 INST = 1.,
                 NOM_CMP = ( 'EPXX', 'EPXY', ),
                 OPERATION = 'EXTRACTION')   )

TR2=POST_RELEVE_T( 
        ACTION=_F(  INTITULE = 'VARI 1 2',
                 NOEUD = 'NO2',
                 CHAM_GD = VARI_N,
                 NOM_CMP = ( 'V1', 'V2',),
                 OPERATION = 'EXTRACTION')   )

TR3=POST_RELEVE_T( 
        ACTION=_F(  INTITULE = 'VARI',
                 NOEUD = 'NO2',
                 CHAM_GD = VARI,
                 TOUT_CMP = 'OUI',
                 OPERATION = 'EXTRACTION')   )

TR4=POST_RELEVE_T( 
        ACTION=_F(  INTITULE = 'VARI 2 5',
                 NOEUD = 'NO2',
                 CHAM_GD = VARI,
                 NOM_CMP = ( 'V2',  'V5', ),
                 OPERATION = 'EXTRACTION')   )

TR5=POST_RELEVE_T( 
        ACTION=_F(  INTITULE = 'VARI 137',
                 NOEUD = 'NO2',
                 CHAM_GD = VARI,
                 NOM_CMP = ( 'V1',  'V3',  'V7', ),
                 OPERATION = 'EXTRACTION')   )

IMPR_TABLE(TABLE=TR5)

FIN()
#
