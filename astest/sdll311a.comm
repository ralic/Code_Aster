# TITRE REPONSE TRANSITOIRE PAR INTEGRATION DIRECTE DEPLACEMENT IMPOSE
# ======================================================================
# COPYRIGHT (C) 1991 - 2015  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#CAS_TEST__:SDLL311A
# AMV , AVRIL 97  AC. LEGER - VALIDATION CODE_ASTER
# CAS TEST DE L'IRCN MODIFIE
#         DE TYPE HEAVYSIDE
#
#

DEBUT( CODE=_F(NIV_PUB_WEB='INTERNET'))

#

POUTRE=LIRE_MAILLAGE( )

POUTRE=DEFI_GROUP( reuse=POUTRE,   MAILLAGE=POUTRE,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

#

MODELE=AFFE_MODELE(   MAILLAGE=POUTRE,
                         AFFE=_F( TOUT = 'OUI', PHENOMENE = 'MECANIQUE',
                        MODELISATION = 'POU_D_T'))

#
MATER1=DEFI_MATERIAU(  ELAS=_F( E = 98696.044E6,  NU = 0.0,  RHO = 3.0E6))

#
CHAMPMAT=AFFE_MATERIAU(  MAILLAGE=POUTRE,
                                AFFE=_F( TOUT = 'OUI',MATER = MATER1))

#
ELEMNT=AFFE_CARA_ELEM(  MODELE=MODELE,
                 POUTRE=_F(  GROUP_MA = 'TOUT',  SECTION = 'CERCLE',
                          CARA = ('R','EP',), VALE = (0.05,0.05,)))

#----------------------------------------------------------------------
#
#
#
CONDLIM=AFFE_CHAR_MECA(  MODELE=MODELE,DDL_IMPO=(
               _F( GROUP_NO = 'ENCAS',  DX = 0.0, DY = 0.0, DZ = 0.0,
                                      DRX = 0.0, DRY = 0., DRZ = 0.0),
                        _F( GROUP_NO = 'DEPIMP',  DX = 0.001)) )

#
RIGIELEM=CALC_MATR_ELEM(  MODELE=MODELE,  CHARGE=CONDLIM,
                         CHAM_MATER=CHAMPMAT,  CARA_ELEM=ELEMNT,
                         OPTION='RIGI_MECA')

#
MASSELEM=CALC_MATR_ELEM(  MODELE=MODELE,  CHARGE=CONDLIM,
                         CHAM_MATER=CHAMPMAT,  CARA_ELEM=ELEMNT,
                         OPTION='MASS_MECA')

#
VECTELEM=CALC_VECT_ELEM(   CHARGE=CONDLIM,  CARA_ELEM=ELEMNT,
                          OPTION='CHAR_MECA')

#
NUMEROTA=NUME_DDL(   MATR_RIGI=RIGIELEM)

#
MATRRIGI=ASSE_MATRICE(MATR_ELEM=RIGIELEM,NUME_DDL=NUMEROTA)

#
MATRMASS=ASSE_MATRICE(MATR_ELEM=MASSELEM,NUME_DDL=NUMEROTA)

#
MATRAMOR=COMB_MATR_ASSE(COMB_R=(_F( MATR_ASSE = MATRMASS, COEF_R = 5.0),
                                 _F( MATR_ASSE = MATRRIGI, COEF_R = .0005)),
                           SANS_CMP='LAGR'
                           )

#
VECAS=ASSE_VECTEUR(   VECT_ELEM=VECTELEM,  NUME_DDL=NUMEROTA)

#
FONC=DEFI_FONCTION(   NOM_PARA='INST', VALE=(0.,0.,1.E-8,1.,1.,1.,),
                        PROL_DROITE='CONSTANT' )

#
DEPLIMPO=CREA_CHAMP( OPERATION='AFFE', PROL_ZERO='OUI', TYPE_CHAM='NOEU_DEPL_R',
MAILLAGE=POUTRE,
                            AFFE=_F( GROUP_NO = 'DEPIMP',
                                  NOM_CMP = 'DX',
                                  VALE = 0.001),
                            NUME_DDL=NUMEROTA         )

#
TEMPLI=DEFI_LIST_REEL(DEBUT=0., INTERVALLE=_F( JUSQU_A = .03, PAS = 1.E-5))

#

L_ARCH=DEFI_LIST_ENTI(DEBUT=0, INTERVALLE=_F( JUSQU_A = 3000, PAS = 10) )

#
# TEMPS D'OBSERVATION POINT B  -- DEPLACEMENT ET VITESSE
L_RECUDV=( 0.00, 0.0054, 0.0055, 0.0108, 0.0109, 0.0163, 0.0164,
            0.0217, 0.0218, 0.0271, 0.0272, )

LRECUDV=DEFI_LIST_REEL(   VALE=L_RECUDV )

#
# TEMPS D'OBSERVATION POINT B  -- VITESSE ET ACCELERATION
L_RECUVA=( 0.0024, 0.0025, 0.0078, 0.0079, )

LRECUVA=DEFI_LIST_REEL(   VALE=L_RECUVA )

#
# TEMPS D'OBSERVATION POINT B  -- ACCELERATION
L_RECUA=( 0.00, 0.001, 0.005, )

LRECUA=DEFI_LIST_REEL(   VALE=L_RECUA )

#
#
#-----------------------------------------------------------------------
# METHODE NEWMARK AVEC AMORT

NEWAMO=DYNA_VIBRA(TYPE_CALCUL='TRAN',BASE_CALCUL='PHYS',
                           MATR_MASS=MATRMASS,   MATR_RIGI=MATRRIGI,
                           MATR_AMOR=MATRAMOR,
                          ETAT_INIT=_F(
                          DEPL = DEPLIMPO),
                           SCHEMA_TEMPS=_F(SCHEMA='NEWMARK',),
                          INCREMENT=_F(
                          LIST_INST = TEMPLI),
                           ARCHIVAGE=_F(  PAS_ARCH = 10),
                            EXCIT=_F( VECT_ASSE = VECAS, FONC_MULT = FONC))

#
# DEPLACEMENT AU POINT B LISTE 1
B_X_DEP1=RECU_FONCTION(  NOEUD='B',  NOM_CMP='DX',   NOM_CHAM='DEPL',
                             RESULTAT=NEWAMO,  LIST_INST=LRECUDV  )

#
# VITESSE AU POINT B LISTE 1
B_X_VIT1=RECU_FONCTION(  NOEUD='B',  NOM_CMP='DX',   NOM_CHAM='VITE',
                             RESULTAT=NEWAMO,  LIST_INST=LRECUDV  )

#
# VITESSE AU POINT B LISTE 2
B_X_VIT2=RECU_FONCTION(  NOEUD='B',  NOM_CMP='DX',   NOM_CHAM='VITE',
                             RESULTAT=NEWAMO,  LIST_INST=LRECUVA  )

#
# ACCELERATION AU POINT B LISTE 2
B_X_ACC2=RECU_FONCTION(  NOEUD='B',  NOM_CMP='DX',   NOM_CHAM='ACCE',
                             RESULTAT=NEWAMO,  LIST_INST=LRECUVA  )

#
# ACCELERATION AU POINT B LISTE 3
B_X_ACC3=RECU_FONCTION(  NOEUD='B',  NOM_CMP='DX',   NOM_CHAM='ACCE',
                             RESULTAT=NEWAMO,  LIST_INST=LRECUA  )

#
#
#
# DEPLACEMENTS AU POINT B LISTE 1
#

TEST_FONCTION(VALEUR=(_F(VALE_CALC=0.000873762508662,
                         VALE_REFE=8.7376000000000001E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=5.4000000000000003E-3,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      _F(VALE_CALC=0.000873598094476,
                         VALE_REFE=8.7359999999999998E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=5.4999999999999997E-3,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      _F(VALE_CALC=0.000268178470465,
                         VALE_REFE=2.6818000000000002E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.010800000000000001,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      _F(VALE_CALC=0.000268000274649,
                         VALE_REFE=2.6800000000000001E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.0109,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      _F(VALE_CALC=0.00064386546939,
                         VALE_REFE=6.4386000000000001E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.016299999999999999,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      _F(VALE_CALC=0.000643662755367,
                         VALE_REFE=6.4366E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.016400000000000001,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      _F(VALE_CALC=0.000410827960693,
                         VALE_REFE=4.1083E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.021700000000000001,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      _F(VALE_CALC=0.000410843859698,
                         VALE_REFE=4.1083999999999999E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.0218,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      _F(VALE_CALC=0.000555246518633,
                         VALE_REFE=5.5524999999999997E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.027099999999999999,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      _F(VALE_CALC=0.000555305173592,
                         VALE_REFE=5.553E-4,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.027199999999999998,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=B_X_DEP1,),
                      ),
              )

#
#
#
# DEPLACEMENT AU POINT C LISTE 1
C_X_DEP1=RECU_FONCTION(  NOEUD='C',  NOM_CMP='DX',   NOM_CHAM='DEPL',
                             RESULTAT=NEWAMO,  LIST_INST=LRECUDV  )

#
# VITESSE AU POINT C LISTE 1
#C_X_VIT1 = RECU_FONCTION( NOEUD: C, NOM_CMP: 'DX',  NOM_CHAM: 'VITE'
#                            RESULTAT: NEWAMO, LIST_INST: LRECUDV  ) ;
#
# ACCELERATION AU POINT C LISTE 1
#C_X_ACC1 = RECU_FONCTION( NOEUD: C, NOM_CMP: 'DX',  NOM_CHAM: 'ACCE'
#                            RESULTAT: NEWAMO, LIST_INST: LRECUDV  ) ;

TEST_FONCTION(VALEUR=(_F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=5.4000000000000003E-3,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      _F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=5.4999999999999997E-3,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      _F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.010800000000000001,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      _F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.0109,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      _F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.016299999999999999,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      _F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.016400000000000001,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      _F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.021700000000000001,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      _F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.0218,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      _F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.027099999999999999,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      _F(VALE_CALC=0.001,
                         VALE_REFE=1.E-3,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.027199999999999998,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=C_X_DEP1,),
                      ),
              )

FIN()
#
