# MODIF  DATE 30/07/2012   AUTEUR LEFEBVRE J-P.LEFEBVRE 
# TITRE FERRAILLAGE SELON LA METHODE DE CAPRA ET MAURY (CAS ANALYTIQUE)
# ssls134a.para = tps_job 20 mem_job 256Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================

DEBUT(CODE=_F(NOM='SSLS134A', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

MA=LIRE_MAILLAGE()

MODEL=AFFE_MODELE(MAILLAGE=MA,
                  AFFE=_F(GROUP_MA='PLAQUE', PHENOMENE='MECANIQUE', MODELISATION='DKT',))


CARA=AFFE_CARA_ELEM(MODELE=MODEL,
                    COQUE= _F(GROUP_MA='PLAQUE', EPAIS=0.2))


# on cree une sd evol_elas avec des champs d'efforts imposes :
#-------------------------------------------------------------
CHEFF1=CREA_CHAMP(MAILLAGE=MA, OPERATION='AFFE', TYPE_CHAM='CART_SIEF_R',
                   AFFE= _F(GROUP_MA='PLAQUE',
                            NOM_CMP= ('NXX'   , 'NYY','NXY','MXX','MYY','MXY','QX','QY'),
                            VALE=    (-1000.0E3,   0.0,  0.0,  0.0,  0.0,  0.0, 0.0, 0.0)))

CHEFF2=CREA_CHAMP(MAILLAGE=MA, OPERATION='AFFE', TYPE_CHAM='CART_SIEF_R',
                   AFFE= _F(GROUP_MA='PLAQUE',
                            NOM_CMP= ('NXX'   ,'NYY','NXY','MXX','MYY','MXY','QX','QY'),
                            VALE=    (+1000.0E3,  0.0,  0.0,  0.0,  0.0,  0.0, 0.0, 0.0)))

CHEFF3=CREA_CHAMP(MAILLAGE=MA, OPERATION='AFFE', TYPE_CHAM='CART_SIEF_R',
                   AFFE= _F(GROUP_MA='PLAQUE',
                            NOM_CMP= ('NXX','NYY'    ,'NXY','MXX','MYY','MXY','QX','QY'),
                            VALE=    (  0.0, +1000.0E3,  0.0,  0.0, 0.0,   0.0, 0.0,0.0)))

CHEFF4=CREA_CHAMP(MAILLAGE=MA, OPERATION='AFFE', TYPE_CHAM='CART_SIEF_R',
                   AFFE= _F(GROUP_MA='PLAQUE',
                            NOM_CMP= ('NXX','NYY','NXY','MXX' ,'MYY'   ,'MXY','QX','QY'),
                            VALE=    (  0.0,  0.0,  0.0,   0.0,+100.0E3,  0.0, 0.0,0.0)))

RESU1=CREA_RESU(OPERATION='AFFE',TYPE_RESU='EVOL_ELAS',
           NOM_CHAM='EFGE_ELNO',
           AFFE=(
             _F( CHAM_GD=CHEFF1,INST=1., MODELE=MODEL, CARA_ELEM=CARA,),
             _F( CHAM_GD=CHEFF2,INST=2., MODELE=MODEL, CARA_ELEM=CARA,),
             _F( CHAM_GD=CHEFF3,INST=3., MODELE=MODEL, CARA_ELEM=CARA,),
             _F( CHAM_GD=CHEFF4,INST=4., MODELE=MODEL, CARA_ELEM=CARA,),
           ))

# calcul du ferraillage :
#------------------------
RESU1= CALC_FERRAILLAGE( RESULTAT =RESU1, reuse=RESU1,
         TYPE_COMB    = 'ELU',  INST=(1., 2., 3., 4.),
         AFFE  = (
            _F( TOUT='OUI', ENROBG=0.04, SIGM_ACIER=500.0E6, SIGM_BETON=21E6, PIVA=10.0E-3, PIVB= 3.5E-3),
         ))


TEST_RESU(RESU=(

# Configuration 1 :
      _F(RESULTAT=RESU1, INST=1., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSXI',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=1., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSXS',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=1., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSYI',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=1., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSYS',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),

# Configuration 2 :
      _F(RESULTAT=RESU1, INST=2., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSXI',  MAILLE='M1', POINT=1, VALE=1.0E-3  , CRITERE='RELATIF', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=2., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSXS',  MAILLE='M1', POINT=1, VALE=1.0E-3  , CRITERE='RELATIF', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=2., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSYI',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=2., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSYS',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),

# Configuration 3 :
      _F(RESULTAT=RESU1, INST=3., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSXI',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=3., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSXS',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=3., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSYI',  MAILLE='M1', POINT=1, VALE=1.0E-3  , CRITERE='RELATIF', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=3., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSYS',  MAILLE='M1', POINT=1, VALE=1.0E-3  , CRITERE='RELATIF', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),

# Configuration 4 :
      _F(RESULTAT=RESU1, INST=4., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSXI',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=4., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSXS',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=4., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSYI',  MAILLE='M1', POINT=1, VALE=0.0E+00  , CRITERE='ABSOLU', PRECISION=1.E-5, REFERENCE='ANALYTIQUE',),
      _F(RESULTAT=RESU1, INST=4., NOM_CHAM='FERRAILLAGE',
         NOM_CMP='DNSYS',  MAILLE='M1', POINT=1, VALE=1.3947E-3  , CRITERE='RELATIF', PRECISION=3.E-5, REFERENCE='ANALYTIQUE',),
))


FIN()
