# MODIF  DATE 13/09/2011   AUTEUR GENIAUT S.GENIAUT 
# TITRE  MURAKAMI 9.35 FISSURE SEMI-ELLIPTIQUE DEBOUCHANT A LA PEAU
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#        INTERNE D'UN TUBE EPAIS SOUS PRESSION
#

DEBUT( CODE=_F( NOM = 'SSLV310A',NIV_PUB_WEB='INTERNET'))

MA=LIRE_MAILLAGE()

MO=AFFE_MODELE(   MAILLAGE=MA, 
                        AFFE=_F(  TOUT = 'OUI',
                               PHENOMENE = 'MECANIQUE',
                               MODELISATION = '3D')
                )

MA=MODI_MAILLAGE( reuse=MA,   MAILLAGE=MA,
                  ORIE_PEAU_3D=_F(  GROUP_MA = ( 'LEVREINS', 'SPRES', ) )
                     )

MAT1=DEFI_MATERIAU(    ELAS=_F(  E = 2.E+11,
                                NU = 0.3)
                     )

CHMAT=AFFE_MATERIAU(   MAILLAGE=MA,
                             AFFE=_F(  GROUP_MA = 'VMAT',
                                    MATER = MAT1)
                     )

MA=DEFI_GROUP( reuse=MA,   MAILLAGE=MA, 
                     CREA_GROUP_NO=_F( 
                        GROUP_MA = ( 'SYME3',  'SYME2',  'SYME1', 
                                     'SPRES',  'LEVREINS',
                                   ))
                 )

CH=AFFE_CHAR_MECA( MODELE=MO,
                   DDL_IMPO=( _F(  GROUP_NO = 'SYME1',     DX = 0.),
                              _F(  GROUP_NO = 'PI3',       DY = 0.),
                              _F(  GROUP_NO = 'SYME2',     DZ = 0.),
                              _F(  GROUP_NO = 'SYME3',     DZ = 0.)),
                   PRES_REP=( _F(  GROUP_MA = 'LEVREINS',  PRES =  75.E6),
                              _F(  GROUP_MA = 'SPRES',     PRES =  75.E6))
                    )

CHAMDEPL=MECA_STATIQUE(        MODELE=MO,
                              CHAM_MATER=CHMAT,
                                   EXCIT=_F( CHARGE = CH)
                          )


FISS1=DEFI_FOND_FISS(         MAILLAGE=MA,
                              SYME='OUI',
                              FOND_FISS=_F(NOEUD = ( 'N2613', 'N2610', 'N2867',
                                                     'N2864', 'N2863', 'N2858',
                                                     'N3203', 'N3200', 'N3499',
                                                     'N3496', 'N4072',
                                                     'N4066', 'N4632', 'N4626',
                                                     'N5093', 'N5087', 'N5548',
                                                     'N5542', 'N5919', 'N5913',
                                                     'N6186', 'N6180', 'N6426',
                                                     'N6420', 'N6658', 'N6652',
                                                     'N6841', 'N6835', 'N6957',
                                                     'N6951', 'N6971', 'N6965',
                                                     'N6962',
                                                   ),
                                           DTAN_ORIG=( 1.,  0.,  0.,),
                                           DTAN_EXTR=( 0.,  1.,  0.,)

                                                   ),
                               LEVRE_SUP=_F(  GROUP_MA = 'LEVREINS'),
                      )

#
#
#----------------------------------------------------------------------
#                           COURONNE
#----------------------------------------------------------------------
#
# DEFINITION DES RAYONS DES COURONNES DU CHAMPS THETA
#
#
# PREMIERE COURONNE
#
RAY_INF1=DEFI_CONSTANTE(   VALE=5.E-4)

RAY_SUP1=DEFI_CONSTANTE(   VALE=1.25E-3)

MOD_T1=DEFI_CONSTANTE(   VALE=1.    )

THETA1=CALC_THETA(      OPTION='COURONNE',
                          MODELE=MO,
                         FOND_FISS=FISS1,
                        THETA_3D=_F(  TOUT = 'OUI',
                                   MODULE_FO = MOD_T1,
                                   R_INF_FO = RAY_INF1,
                                   R_SUP_FO = RAY_SUP1)
                    )

G0_C1=CALC_G(         OPTION='CALC_G_GLOB',
                      RESULTAT=CHAMDEPL,
                      NUME_ORDRE=1,
                      THETA=_F(THETA=THETA1),
                       )

#
# CALCUL DE G LOCAL AVEC THETA_LEGENDRE
#
GLO1_LE5=CALC_G(         RESULTAT=CHAMDEPL,
                         TOUT_ORDRE='OUI',
                         THETA=_F(FOND_FISS=FISS1,
                                  R_INF_FO=RAY_INF1,
                                  R_SUP_FO=RAY_SUP1),
                         )

GLOC1=CALC_G(            RESULTAT=CHAMDEPL,
                         NUME_ORDRE=1,
                         THETA=_F(FOND_FISS=FISS1,
                                  R_INF_FO=RAY_INF1,
                                  R_SUP_FO=RAY_SUP1,),
                         EXCIT=_F( CHARGE = CH),
                         )

#
# DEUXIEME COURONNE
#
RAY_INF2=DEFI_CONSTANTE(   VALE=1.25E-3)

RAY_SUP2=DEFI_CONSTANTE(   VALE=2.E-3)

THETA2=CALC_THETA(      OPTION='COURONNE',
                          MODELE=MO,
                         FOND_FISS=FISS1,
                        THETA_3D=_F(  TOUT = 'OUI',
                                   MODULE_FO = MOD_T1,
                                   R_INF_FO = RAY_INF2,
                                   R_SUP_FO = RAY_SUP2)
                    )

#
G0_C2=CALC_G (        OPTION='CALC_G_GLOB',
                      RESULTAT=CHAMDEPL,
                      NUME_ORDRE=1,
                      THETA=_F(THETA=THETA2),
                       )

#
# CALCUL DE G LOCAL AVEC THETA_LEGENDRE
#
GLO2_LE5=CALC_G(        RESULTAT=CHAMDEPL,
                        TOUT_ORDRE='OUI',
                        THETA=_F(FOND_FISS=FISS1, 
                                 R_INF_FO=RAY_INF2,
                                 R_SUP_FO=RAY_SUP2),
                         )

GLOC2=CALC_G(           RESULTAT=CHAMDEPL,
                        NUME_ORDRE=1,
                        THETA=_F(FOND_FISS=FISS1,
                                 R_INF_FO=RAY_INF2,
                                 R_SUP_FO=RAY_SUP2),
                         )

#
# TROISIEME COURONNE
#
RAY_INF3=DEFI_CONSTANTE(   VALE=2.E-3)

RAY_SUP3=DEFI_CONSTANTE(   VALE=2.5E-3)

#
THETA3=CALC_THETA(      OPTION='COURONNE',
                        MODELE=MO,
                        FOND_FISS=FISS1,
                        THETA_3D=_F(  TOUT = 'OUI',
                                   MODULE_FO = MOD_T1,
                                   R_INF_FO = RAY_INF3,
                                   R_SUP_FO = RAY_SUP3)
                    )

G0_C3=CALC_G(          OPTION='CALC_G_GLOB',
                       RESULTAT=CHAMDEPL,
                       NUME_ORDRE=1,
                       THETA=_F(THETA=THETA3),
                       )

#
# CALCUL DE G LOCAL AVEC THETA_LEGENDRE
#
GLO3_LE4=CALC_G(               RESULTAT=CHAMDEPL,
                               TOUT_ORDRE='OUI',
                               THETA=_F(FOND_FISS=FISS1,
                                        R_INF_FO=RAY_INF3,
                                        R_SUP_FO=RAY_SUP3),
                               LISSAGE=_F( DEGRE=4),
                         )

GLOC3=CALC_G(                 RESULTAT=CHAMDEPL,
                              NUME_ORDRE=1,
                              THETA=_F(FOND_FISS=FISS1,
                                       R_INF_FO=RAY_INF3,
                                       R_SUP_FO=RAY_SUP3,),
                              LISSAGE=_F(DEGRE=4,),
                         )

#
# TEST DE G
#
# 1ERE COURONNE
#
# ANGLE POLAIRE = 0
#

TEST_TABLE(       TABLE=GLOC1,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N2613'),
                       VALE=3843.21,
                  PRECISION=0.2       )

#
# ANGLE POLAIRE = 14.1
#

TEST_TABLE(       TABLE=GLOC1,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N3203'),
                       VALE=3338.13,
                  PRECISION=0.04       )

#
# ANGLE POLAIRE = 30.9
#

TEST_TABLE(       TABLE=GLOC1,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N4066'),
                       VALE=2888.99,
                  PRECISION=0.1       )

#
# ANGLE POLAIRE = 45.0
#

TEST_TABLE(       TABLE=GLOC1,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N5548'),
                       VALE=2799.46,
                  PRECISION=0.1       )

#
# ANGLE POLAIRE = 59.1
#

TEST_TABLE(       TABLE=GLOC1,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N6180'),
                       VALE=2850.43,
                  PRECISION=0.1       )

#
# ANGLE POLAIRE = 75.9
#

TEST_TABLE(       TABLE=GLOC1,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N6835'),
                       VALE=2891.32,
                  PRECISION=0.05       )

#
# ANGLE POLAIRE = 90.0
#

TEST_TABLE(       TABLE=GLOC1,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N6962'),
                       VALE=2944.52,
                  PRECISION=0.06       )

#
# 2IEME COURONNE
#
# ANGLE POLAIRE = 0
#

TEST_TABLE(       TABLE=GLOC2,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N2613'),
                       VALE=3843.21,
                  PRECISION=0.15       )

#
# ANGLE POLAIRE = 14.1
#

TEST_TABLE(       TABLE=GLOC2,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N3203'),
                       VALE=3338.13,
                  PRECISION=0.005       )

#
# ANGLE POLAIRE = 30.9
#

TEST_TABLE(       TABLE=GLOC2,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N4066'),
                       VALE=2888.99,
                  PRECISION=0.05       )

#
# ANGLE POLAIRE = 45.0
#

TEST_TABLE(       TABLE=GLOC2,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N5548'),
                       VALE=2799.46,
                  PRECISION=0.05       )

#
# ANGLE POLAIRE = 59.1
#

TEST_TABLE(       TABLE=GLOC2,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N6180'),
                       VALE=2850.43,
                  PRECISION=0.03       )

#
# ANGLE POLAIRE = 75.9
#

TEST_TABLE(       TABLE=GLOC2,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N6835'),
                       VALE=2891.32,
                  PRECISION=0.1       )

#
# ANGLE POLAIRE = 90.0
#

TEST_TABLE(       TABLE=GLOC2,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N6962'),
                       VALE=2944.52,
                  PRECISION=0.005       )

#
# 3IEME COURONNE
#
# ANGLE POLAIRE = 0
#

TEST_TABLE(       TABLE=GLOC3,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N2613'),
                       VALE=3843.21,
                  PRECISION=0.15       )

#
# ANGLE POLAIRE = 14.1
#

TEST_TABLE(       TABLE=GLOC3,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N3203'),
                       VALE=3338.13,
                  PRECISION=0.005       )

#
# ANGLE POLAIRE = 30.9
#

TEST_TABLE(       TABLE=GLOC3,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N4066'),
                       VALE=2888.99,
                  PRECISION=0.05       )

#
# ANGLE POLAIRE = 45.0
#

TEST_TABLE(       TABLE=GLOC3,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N5548'),
                       VALE=2799.46,
                  PRECISION=0.05       )

#
# ANGLE POLAIRE = 59.1
#

TEST_TABLE(       TABLE=GLOC3,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N6180'),
                       VALE=2850.43,
                  PRECISION=0.03       )

#
# ANGLE POLAIRE = 75.9
#

TEST_TABLE(       TABLE=GLOC3,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N6835'),
                       VALE=2891.32,
                  PRECISION=0.01       )

#
# ANGLE POLAIRE = 90.0
#

TEST_TABLE(       TABLE=GLOC3,
                   NOM_PARA='G',
                     FILTRE=_F(  NOM_PARA = 'NOEUD',
                              VALE_K = 'N6962'),
                       VALE=2944.52,
                  PRECISION=0.005       )

#
# TEST DE NON REGRESSION DE LA VALEUR DE G
#

TEST_TABLE(       TABLE=G0_C1,
                         NOM_PARA='G',
                             VALE=1.65E+02,
                        PRECISION=0.05       )

TEST_TABLE(       TABLE=G0_C2,
                         NOM_PARA='G',
                             VALE=1.65E+02,
                        PRECISION=0.001      )

TEST_TABLE(       TABLE=G0_C3,
                         NOM_PARA='G',
                             VALE=1.65E+02,
                        PRECISION=0.001      )

FIN( )
#
