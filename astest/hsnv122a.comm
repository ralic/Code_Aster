# MODIF  DATE 01/10/2002   AUTEUR CIBHHLV L.VIVAN 
# TITRE THERMO_METALLO_MECANIQUE DECOUPLEE EN TRACTION SIMPLE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
# EN GRANDES DEFORMATIONS
# AVEC PLASTICITE DE TRANSFORMATION
# BARREAU CYLINDRIQUE COUPLE EN TRACTION SIMPLE
# MODELISATION AXIS_META  (ELEMENTS AXISYMETRIQUES METALLURGIQUES)
#             13 NOEUDS  2 MAILLES QUAD8
# DEFORMATION SIMO_MIEHE
#======================================================================


DEBUT(CODE=_F( NOM = 'HSNV122A',NIV_PUB_WEB='INTERNET'))

MAIL=LIRE_MAILLAGE( )

TRCMNDA=DEFI_TRC(HIST_EXP=(
  
 _F( VALE = (
-1.106E+03,  1.100E+01,  8.563E+00, -2.760E-02,
 1.220E-04, -2.955E-07,  3.402E-10, -1.517E-13,
 0.000E+00,  0.000E+00,  0.000E+00,  8.360E+02,
 0.000E+00,  0.000E+00,  0.000E+00,  6.001E+02,
 0.000E+00,  0.000E+00,  1.000E+00,  3.400E+02,
      )),
 _F( VALE = (
-2.206E+03,  1.100E+01,  8.563E+00, -2.760E-02,
 1.220E-04, -2.955E-07,  3.402E-10, -1.517E-13,
 0.000E+00,  0.000E+00,  0.000E+00,  8.360E+02,
 0.000E+00,  0.000E+00,  0.000E+00,  6.001E+02,
 0.000E+00,  0.000E+00,  1.000E+00,  3.400E+02,
      ))),
   TEMP_MS=_F( 
    SEUIL = 4.500E-01,
    AKM = -3.125E+01,
    BKM = 1.406E+01,
    TPLM = -3.497E+03)
   )

ACIER=DEFI_MATERIAU(         THER=_F(  RHO_CP = 2000000.0, LAMBDA = 9999.9),
                           META_ACIER=_F(  TRC = TRCMNDA,    AR3 = 830.0,
                                       ALPHA = -0.0300,    MS0 = 200.0,
                                       AC1 = 724.0,     AC3 = 846.0,
                                       TAUX_1 = 0.34,     TAUX_3 = 0.34)
                       )

CHMAT=AFFE_MATERIAU(    MAILLAGE=MAIL,
                               AFFE=_F(  TOUT = 'OUI', MATER = ACIER)
                       )

MOTH=AFFE_MODELE(    MAILLAGE=MAIL,
                             AFFE=_F(  TOUT = 'OUI',
                                    MODELISATION = 'AXIS',
                                    PHENOMENE = 'THERMIQUE')
                     )

TIMPO=DEFI_FONCTION(       NOM_PARA='INST',
                              NOM_RESU='TEMP',
                                  VALE=(0.0, 900.0, 180.0,  0.0,),
                           PROL_GAUCHE='LINEAIRE',
                            PROL_DROITE='LINEAIRE',
                              INTERPOL='LIN'
                       )

CHTH=AFFE_CHAR_THER_F(       MODELE=MOTH,
                              TEMP_IMPO=_F( TOUT = 'OUI',
                                         TEMP = TIMPO)
                       )

LR8=DEFI_LIST_REEL(   DEBUT=0.,
                          INTERVALLE=_F(  JUSQU_A = 176.0,  NOMBRE = 88)
                      )

PHASINIT=CREA_CHAMP(OPERATION='AFFE', TYPE_CHAM='CART_VAR2_R',
                           MAILLAGE=MAIL,
                           AFFE=_F(  TOUT = 'OUI',
             NOM_CMP = ( 'V1', 'V2', 'V3', 'V4', 'V5',),
             VALE = ( 0.0, 0.0, 0.0, 0.0, 10.,   ))
                        )

TEMPE=THER_LINEAIRE(        MODELE=MOTH,
                           CHAM_MATER=CHMAT,
                           PARM_THETA=0.57,
                                EXCIT=_F(  CHARGE = CHTH),
                            INCREMENT=_F(  LIST_INST = LR8),
                            TEMP_INIT=_F(  VALE = 900.)

                        )

TEMPE=CALC_META( reuse=TEMPE,  MODELE=MOTH,
                     CHAM_MATER=CHMAT,
                     RESULTAT=TEMPE,
                     ETAT_INIT=_F( META_INIT = PHASINIT),
                     COMP_INCR=_F(  RELATION = 'ACIER',
                                 TOUT = 'OUI')
                   )

FBM1=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='LINEAIRE',
                           PROL_GAUCHE='LINEAIRE',
                                 VALE=( 0.,  4353.14E+6,  20., 4257.40E+6,
                                       40.,  4161.57E+6,  60., 4065.64E+6,
                                       80.,  3969.62E+6, 100., 3873.50E+6,
                                      120.,  3777.29E+6, 140., 3680.98E+6,
                                      160.,  3584.58E+6, 180., 3488.09E+6,
                                      200.,  3391.50E+6, 220., 3294.81E+6,
                                      240.,  3198.03E+6, 260., 3101.16E+6,
                                      280.,  3004.19E+6, 300., 2907.12E+6,
                                      320.,  2809.96E+6, 340., 2712.70E+6,
                                      360.,  2615.35E+6, 380., 2517.90E+6,
                                      400.,  2420.35E+6, 420., 2322.71E+6,
                                      440.,  2224.97E+6, 460., 2127.13E+6,
                                      480.,  2029.20E+6, 500., 1931.17E+6,
                                      520.,  1833.04E+6, 540., 1734.82E+6,
                                      560.,  1636.50E+6, 580., 1538.08E+6,
                                      600.,  1439.56E+6, 620., 1340.95E+6,
                                      640.,  1242.24E+6, 660., 1143.42E+6,
                                      680.,  1044.52E+6, 700.,  945.51E+6,
                                      720.,   846.40E+6, 740.,  747.20E+6,
                                      760.,   647.89E+6, 780.,  548.49E+6,
                                      800.,   448.99E+6, 820.,  349.39E+6,
                                      840.,   249.69E+6, 860.,  149.89E+6,
                                      880.,    49.99E+6, 900.,  50.01E+6,
                                      ))

FBM2=DEFI_FONCTION(      NOM_PARA='TEMP',
                           PROL_DROITE='LINEAIRE',
                          PROL_GAUCHE='LINEAIRE',
                                VALE=( 0.,  80.E+6,  900., 530.E+6, ))

AUS1=DEFI_FONCTION(      NOM_PARA='TEMP',
                           PROL_DROITE='LINEAIRE',
                          PROL_GAUCHE='LINEAIRE',
                                VALE=( 0.,  5589.31E+6,  20., 5494.77E+6,
                                      40.,  5400.14E+6,  60., 5305.43E+6,
                                      80.,  5210.62E+6, 100., 5115.71E+6,
                                     120.,  5020.72E+6, 140., 4925.63E+6,
                                     160.,  4830.45E+6, 180., 4735.17E+6,
                                     200.,  4639.80E+6, 220., 4544.34E+6,
                                     240.,  4448.79E+6, 260., 4353.14E+6,
                                     280.,  4257.40E+6, 300., 4161.57E+6,
                                     320.,  4065.64E+6, 340., 3969.62E+6,
                                     360.,  3873.50E+6, 380., 3777.29E+6,
                                     400.,  3680.98E+6, 420., 3584.58E+6,
                                     440.,  3488.09E+6, 460., 3391.50E+6,
                                     480.,  3294.81E+6, 500., 3198.03E+6,
                                     520.,  3101.16E+6, 540., 3004.19E+6,
                                     560.,  2907.12E+6, 580., 2809.96E+6,
                                     600.,  2712.70E+6, 620., 2615.35E+6,
                                     640.,  2517.90E+6, 660., 2420.35E+6,
                                     680.,  2322.71E+6, 700., 2224.97E+6,
                                     720.,  2127.13E+6, 740., 2029.20E+6,
                                     760.,  1931.17E+6, 780., 1833.04E+6,
                                     800.,  1734.82E+6, 820., 1636.50E+6,
                                     840.,  1538.08E+6, 860., 1439.56E+6,
                                     880.,  1340.95E+6, 900., 1242.24E+6,
                                     ))

AUS2=DEFI_FONCTION(      NOM_PARA='TEMP',
                           PROL_DROITE='LINEAIRE',
                          PROL_GAUCHE='LINEAIRE',
                                VALE=( 0., -50.E+6,  900., 400.E+6, ))

ALP1=DEFI_FONCTION(      NOM_PARA='TEMP',
                           PROL_DROITE='CONSTANT',
                          PROL_GAUCHE='CONSTANT',
                                VALE=( 0., 15.E-6,  900., 15.E-6, ))

ALP2=DEFI_FONCTION(      NOM_PARA='TEMP',
                           PROL_DROITE='CONSTANT',
                          PROL_GAUCHE='CONSTANT',
                                VALE=( 0., 23.5E-6,  900., 23.5E-6, ))

FPRIM=DEFI_FONCTION(      NOM_PARA='META',
                           PROL_DROITE='LINEAIRE',
                          PROL_GAUCHE='LINEAIRE',
                                VALE=( 0., 2., 1., 0., ))

FMEL=DEFI_FONCTION(      NOM_PARA='META',
                          PROL_DROITE='CONSTANT',
                         PROL_GAUCHE='CONSTANT',
                               VALE=( 0.,  0.,   1.,  1., ))

YOUNG=DEFI_CONSTANTE( VALE=200000.E+6)

NU=DEFI_CONSTANTE( VALE=0.3)

ACIER2=DEFI_MATERIAU( 
             ELAS_META_FO=_F( E = YOUNG,
                      NU = NU,
                      F_ALPHA = ALP1,
                       C_ALPHA = ALP2,
               PHASE_REFE = 'CHAUD',
               EPSF_EPSC_TREF = 2.52E-3,
               F1_SY = FBM2,
               F2_SY = FBM2,
               F3_SY = FBM2,
                F4_SY = FBM2,
               C_SY = AUS2,
               SY_MELANGE = FMEL,
               TEMP_DEF_ALPHA=900.,),
            META_ECRO_LINE=_F( 
                        F1_D_SIGM_EPSI = FBM1,
                        F2_D_SIGM_EPSI = FBM1,
                        F3_D_SIGM_EPSI = FBM1,
                        F4_D_SIGM_EPSI = FBM1,
                        C_D_SIGM_EPSI = AUS1),
          META_PT=_F( F1_K = 0., F2_K = 0., F3_K = 1.E-10, F4_K = 1.E-10,
                      F1_D_F_META = FPRIM,
                      F2_D_F_META = FPRIM,
                      F3_D_F_META = FPRIM,
                      F4_D_F_META = FPRIM)

           )

CM2=AFFE_MATERIAU( MAILLAGE=MAIL,   
                   AFFE=_F( TOUT = 'OUI',MATER = ACIER2,
                            TEMP_REF = 900.)
         )

MO=AFFE_MODELE( MAILLAGE=MAIL,    VERIF='MAILLE',
                AFFE=_F( TOUT = 'OUI',PHENOMENE = 'MECANIQUE',
                         MODELISATION = 'AXIS'))

CH_FO=AFFE_CHAR_MECA( MODELE=MO,
                      PRES_REP=_F(  MAILLE = 'M3',  PRES = -1.)
           )

CH_U=AFFE_CHAR_MECA( MODELE = MO,
                     TEMP_CALCULEE = TEMPE,
                     DDL_IMPO=( _F( NOEUD = 'N4',  DY = 0.),
                                _F( NOEUD = 'N2',  DY = 0.),
                                _F(  NOEUD = 'N5',  DY = 0.))
           )

RAMPE=DEFI_FONCTION(   NOM_PARA='INST',
           PROL_GAUCHE='LINEAIRE',  PROL_DROITE='CONSTANT',
           VALE=(0.0,0.0, 60.,360.0E+6,))

L_INST=DEFI_LIST_REEL( DEBUT=0.0,
                       INTERVALLE=_F( JUSQU_A = 176.,  NOMBRE = 176)
           )

U=STAT_NON_LINE( MODELE=MO,
                 CHAM_MATER=CM2,
                 EXCIT=( _F( CHARGE = CH_FO,
                             FONC_MULT = RAMPE,
                             TYPE_CHARGE = 'SUIV'),
                         _F( CHARGE = CH_U)),
                 COMP_INCR=_F( RELATION = 'META_P_IL_PT',
                                       RELATION_KIT = ('ACIER',),
                 DEFORMATION = 'SIMO_MIEHE'),
                 INCREMENT=_F( LIST_INST = L_INST,
                               NUME_INST_FIN = 176),
                 NEWTON=_F( MATRICE = 'TANGENTE',
                            REAC_ITER = 1),
                 CONVERGENCE=_F( RESI_GLOB_RELA = 1.E-06,
                                 ITER_GLOB_MAXI = 40)
              )

TEST_RESU(RESU=(
              _F( 
               RESULTAT = U,  NOM_CHAM = 'DEPL',  INST = 47.,
               NOEUD = 'N13',   NOM_CMP = 'DY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = -8.4347E-04),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'VARI_ELGA',  INST = 47.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'V5',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 0.),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'SIEF_ELGA',  INST = 47.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'SIYY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 282.E+06),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'DEPL',  INST = 48.,
               NOEUD = 'N13',   NOM_CMP = 'DY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = -5.9639E-04),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'VARI_ELGA',  INST = 48.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'V5',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 1.326E-03),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'SIEF_ELGA',  INST = 48.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'SIYY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 288.E+06),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'DEPL',  INST = 60.,
               NOEUD = 'N13',   NOM_CMP = 'DY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 6.476E-03),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'VARI_ELGA',  INST = 60.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'V5',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 3.7295E-02),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'SIEF_ELGA',  INST = 60.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'SIYY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 360.E+06),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'DEPL',  INST = 83.,
               NOEUD = 'N13',   NOM_CMP = 'DY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 1.15441E-02),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'VARI_ELGA',  INST = 83.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'V5',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 3.7295E-02),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'SIEF_ELGA',  INST = 83.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'SIYY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 360.E+06),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'DEPL',  INST = 84.,
               NOEUD = 'N13',   NOM_CMP = 'DY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 1.17051E-02),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'VARI_ELGA',  INST = 84.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'V5',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 3.7296E-02),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'SIEF_ELGA',  INST = 84.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'SIYY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 360.E+06),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'DEPL',  INST = 85.,
               NOEUD = 'N13',   NOM_CMP = 'DY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 1.18644E-02),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'VARI_ELGA',  INST = 85.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'V5',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 3.73044E-02),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'SIEF_ELGA',  INST = 85.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'SIYY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 360.E+06),

              _F( 
               RESULTAT = U,  NOM_CHAM = 'DEPL',  INST = 176.,
               NOEUD = 'N13',   NOM_CMP = 'DY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 1.77426E-02),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'VARI_ELGA',  INST = 176.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'V3',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 5.943E-02),
              _F( 
               RESULTAT = U,  NOM_CHAM = 'SIEF_ELGA',  INST = 176.,
               MAILLE = 'M1', POINT = 1,   NOM_CMP = 'SIYY',
               PRECISION = ( 1.E-02, 1.E-03, ),
               VALE = 360.E+06))
             )

FIN()
#
