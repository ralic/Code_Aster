# MODIF  DATE 30/05/2007   AUTEUR COURTOIS M.COURTOIS 
# TITRE SIMULATION D'UNE PLAQUE TROUEE EN PLASTICITE AVEC LA METHODE ARLEQUIN - MODELE ARLEQUIN
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2007  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================

DEBUT(  CODE=_F(  NOM = 'SSNP135E',NIV_PUB_WEB='INTERNET') );

# MAILLAGE DE LA PLAQUE

PRE_GMSH(UNITE_GMSH=19,
         UNITE_MAILLAGE=20,);

MAIL1=LIRE_MAILLAGE(UNITE=20,);


# MAILLAGE DU TROU
PRE_GMSH(UNITE_GMSH=22,
         UNITE_MAILLAGE=21,);

MAIL2=LIRE_MAILLAGE(UNITE=21,);

MAIL=ASSE_MAILLAGE(MAILLAGE_1=MAIL1,
                   MAILLAGE_2=MAIL2,
                   OPERATION='SUPERPOSE',);

MOD=AFFE_MODELE(MAILLAGE=MAIL,
                VERIF='MAILLE',
                AFFE=_F(TOUT='OUI',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='C_PLAN',),);
# COURBE DE TRACTION

CTRAC=DEFI_FONCTION(NOM_PARA='EPSI',
                    VALE=(0.004,4.0,0.006,5.0,0.009,5.5,0.02,6.0,),
                    PROL_DROITE='CONSTANT',);

MATER=DEFI_MATERIAU(ELAS=_F(E=1000.0,
                            NU=0.3,),
                    TRACTION=_F(SIGM=CTRAC,),);

CHMATER=AFFE_MATERIAU(MAILLAGE=MAIL,
                      AFFE=_F(TOUT='OUI',
                              MATER=MATER,),);
# CONDITIONS DE SYMETRIE (QUART DE PLAQUE)

SYMET=AFFE_CHAR_MECA(MODELE=MOD,
                     FACE_IMPO=(_F(GROUP_MA=('GM1027','GM27',),
                                   DY=0.0,),
                                _F(GROUP_MA=('GM1029','GM29',),
                                   DX=0.0,),),);
# TRACTION REPARTIE SUR LE HAUT

EFFORT=AFFE_CHAR_MECA(MODELE=MOD,
                      FORCE_CONTOUR=_F(GROUP_MA='GM26',
                                       FY=1.0,),);

ARLQ=AFFE_CHAR_MECA(MODELE=MOD,
                    ARLEQUIN=_F(GROUP_MA_1='GM6',
                                GROUP_MA_2=('GM9','GM11',),
                                GROUP_MA_COLL='GM11',
                                COLLAGE='FIN',
                                POIDS_FIN=0.9999,),);
# L INSTANT EST EGAL A LA VALEUR DE LA TRACTION SUR HAUT

F_DEPL=DEFI_FONCTION(NOM_PARA='INST',
                     VALE=(0.0,0.0,10.0,10.0,),);
# DISCRETISATION EN TEMPS

L_INST=DEFI_LIST_REEL(DEBUT=0.0,
                      INTERVALLE=(_F(JUSQU_A=2.,
                                     NOMBRE=4,),
                                  _F(JUSQU_A=3.5,
                                     NOMBRE=15,),
                                  _F(JUSQU_A=5.4,
                                     NOMBRE=5,),),);

### CALCUL NON-LINEAIRE

RESU=STAT_NON_LINE(MODELE=MOD,
                   CHAM_MATER=CHMATER,
                   EXCIT=(_F(CHARGE=SYMET,),
                          _F(CHARGE=EFFORT,
                             FONC_MULT=F_DEPL,),
                          _F(CHARGE=ARLQ,),),
                   COMP_INCR=_F(RELATION='VMIS_ISOT_TRAC',
                                GROUP_MA='GM9',),
                   COMP_ELAS=_F(RELATION='ELAS',
                                GROUP_MA=('GM6','GM11',),),
                   INCREMENT=_F(LIST_INST=L_INST,
                                INST_FIN=3.5,                                
                                SUBD_METHODE = 'UNIFORME',
                                SUBD_PAS=4,
                                SUBD_PAS_MINI=0.0001,),
                   NEWTON=_F(REAC_INCR = 1,
                             MATRICE='TANGENTE',),
                   RECH_LINEAIRE=_F(RESI_LINE_RELA=0.1,
                                    ITER_LINE_CRIT=20,),
                   CONVERGENCE=_F(ITER_GLOB_MAXI=10,),
                   ARCHIVAGE=_F(LIST_INST=L_INST,),);


IMPR_JEVEUX(ENTITE='REPERTOIRE',CLASSE='V')

### POST-TRAITEMENTS CLASSIQUES

RESU=CALC_ELEM(reuse =RESU,
               RESULTAT=RESU,
               OPTION=('SIEF_ELNO_ELGA','EQUI_ELNO_SIGM','VARI_ELNO_ELGA',),);

RESU=CALC_NO(reuse =RESU,
             RESULTAT=RESU,
             OPTION=('SIEF_NOEU_ELGA','EQUI_NOEU_SIGM','VARI_NOEU_ELGA',),);

RESU=CALC_NO(reuse =RESU,
             RESULTAT=RESU,
             OPTION='FORC_NODA',);

# DEPLACEMENTS DU POINT A

DX_A=POST_RELEVE_T(ACTION=_F(INTITULE='DX_A',
                             GROUP_NO='GM33',
                             RESULTAT=RESU,
                             NOM_CHAM='DEPL',
                             NOM_CMP='DX',
                             OPERATION='EXTRACTION',),);


#IMPR_TABLE(TABLE=DX_A)

TEST_TABLE(TABLE=DX_A,
           FILTRE = _F(NOM_PARA='INST',VALE=2.50000E+00),
           NOM_PARA='DX',
           VALE = -2.5141094755978E-02,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);


TEST_TABLE(TABLE=DX_A,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='DX',
           VALE = -3.3919824634336E-02,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);
           
TEST_TABLE(TABLE=DX_A,
           FILTRE = _F(NOM_PARA='INST',VALE=2.50000E+00),
           NOM_PARA='DX',
           VALE = -2.5161598452013E-02,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.001,);


TEST_TABLE(TABLE=DX_A,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='DX',
           VALE = -3.4606865864745E-02,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.02,);         
           

# DEPLACEMENTS DU POINT B

DY_B=POST_RELEVE_T(ACTION=_F(INTITULE='DY_B',
                             GROUP_NO='GM32',
                             RESULTAT=RESU,
                             NOM_CHAM='DEPL',
                             NOM_CMP='DY',
                             OPERATION='EXTRACTION',),);

#IMPR_TABLE(TABLE=DY_B)

TEST_TABLE(TABLE=DY_B,
           FILTRE = _F(NOM_PARA='INST',VALE=2.50000E+00),
           NOM_PARA='DY',
           VALE = 7.6841978528252E-02,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);


TEST_TABLE(TABLE=DY_B,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='DY',
           VALE = 1.1585515715834E-01,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,); 

TEST_TABLE(TABLE=DY_B,
           FILTRE = _F(NOM_PARA='INST',VALE=2.50000E+00),
           NOM_PARA='DY',
           VALE = 7.6498982211284E-02,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.005,); 


TEST_TABLE(TABLE=DY_B,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='DY',
           VALE = 1.1557688703700E-01,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.003,); 

# CONTRAINTES

CERCLE=INTE_MAIL_2D(MAILLAGE=MAIL,
                    DEFI_CHEMIN=_F(GROUP_MA='GM28',),);

STHETA=POST_RELEVE_T(ACTION=_F(INTITULE='STHETA',
                               CHEMIN=CERCLE,
                               RESULTAT=RESU,
                               NOM_CHAM='SIEF_ELNO_ELGA',
                               INST=1.0,
                               NOM_CMP=('SIXX','SIYY','SIXY',),
                               REPERE='POLAIRE',
                               OPERATION='EXTRACTION',),);
                               
#IMPR_TABLE(TABLE=STHETA)

TEST_TABLE(TABLE=STHETA,
           FILTRE = _F(NOM_PARA='ABSC_CURV',VALE=1.57017E+01),
           NOM_PARA='SIXX',
           VALE = -1.1537404793890E-01 ,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);                            


TEST_TABLE(TABLE=STHETA,
           FILTRE = _F(NOM_PARA='ABSC_CURV',VALE=1.57017E+01),
           NOM_PARA='SIXX',
           VALE = -1.0794845533703E-01 ,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.07,); 

# COURBE SIYY AU POINT A EN FONCTION DU DEPLACEMENT 

SYY_A=POST_RELEVE_T(ACTION=_F(INTITULE='SYY_A',
                              GROUP_NO='GM33',
                              RESULTAT=RESU,
                              NOM_CHAM='SIEF_NOEU_ELGA',
                              NOM_CMP='SIYY',
                              OPERATION='EXTRACTION',),);

TEST_TABLE(TABLE=SYY_A,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='SIYY',
           VALE = 6.2699623105153E+00 ,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);

TEST_TABLE(TABLE=SYY_A,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='SIYY',
           VALE = 6.4246203319075E+00 ,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.025,);

#IMPR_TABLE(TABLE=SYY_A)

# COURBE SIXX AU POINT B EN FONCTION DU DEPLACEMENT 

SXX_B=POST_RELEVE_T(ACTION=_F(INTITULE='SXX_B',
                              GROUP_NO='GM32',
                              RESULTAT=RESU,
                              NOM_CHAM='SIEF_NOEU_ELGA',
                              NOM_CMP='SIXX',
                              OPERATION='EXTRACTION',),);

TEST_TABLE(TABLE=SXX_B,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='SIXX',
           VALE = -3.5242204022303E+00 ,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);

TEST_TABLE(TABLE=SXX_B,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='SIXX',
           VALE = -3.4520540472581E+00 ,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.021,);

#IMPR_TABLE(TABLE=SXX_B)

# COURBE FORCE RESULTANTE EN HAUT EN FONCTION DU DEPLACEMENT


HAUT=INTE_MAIL_2D(MAILLAGE=MAIL,
                  DEFI_CHEMIN=_F(GROUP_MA='GM26',),);

F_HAUT=POST_RELEVE_T(ACTION=_F(INTITULE='F_HAUT',
                               CHEMIN=HAUT,
                               RESULTAT=RESU,
                               NOM_CHAM='FORC_NODA',
                               RESULTANTE=('DX','DY','DZ',),
                               OPERATION='EXTRACTION',),);


TEST_TABLE(TABLE=F_HAUT,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='DX',
           VALE = -7.7257980876221E-01,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.21,);


TEST_TABLE(TABLE=F_HAUT,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='DX',
           VALE = -6.1490100896757E-01,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);
           
           
TEST_TABLE(TABLE=F_HAUT,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='DY',
           VALE = 3.50000E+02 ,
           REFERENCE= 'ANALYTIQUE',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);           
           

TEST_TABLE(TABLE=F_HAUT,
           FILTRE = _F(NOM_PARA='INST',VALE=3.50000E+00),
           NOM_PARA='DZ',
           VALE = 0.0E+0 ,
           REFERENCE= 'ANALYTIQUE',
           CRITERE = 'ABSOLU',
           PRECISION = 1E-8,); 




# ON CONTINUE AU DELA DE 3.5 PAR PILOTAGE

INSTFIN = 5.4;

RESU=STAT_NON_LINE(MODELE=MOD,
                   reuse = RESU,
                   ETAT_INIT=_F(EVOL_NOLI=RESU,),
                   CHAM_MATER=CHMATER,
                   EXCIT=(_F(CHARGE=SYMET,),
                          _F(CHARGE=EFFORT,
                             TYPE_CHARGE='FIXE_PILO',),
                          _F(CHARGE=ARLQ,),),
                   COMP_INCR=_F(RELATION='VMIS_ISOT_TRAC',
                                GROUP_MA='GM9',),
                   COMP_ELAS=_F(RELATION='ELAS',
                                GROUP_MA=('GM11','GM6',),),
                   INCREMENT=_F(LIST_INST=L_INST,
                                INST_FIN=INSTFIN,),
                   NEWTON=_F(PREDICTION='TANGENTE',
                              ),
                   PILOTAGE=_F(TYPE='DDL_IMPO',
                               COEF_MULT=1.0,
                               GROUP_NO='GM39',
                               NOM_CMP='DY',),
                   CONVERGENCE=_F(ARRET='NON',),
                   ARCHIVAGE=_F(LIST_INST=L_INST,),);

### POST-TRAITEMENTS CLASSIQUES

RESU=CALC_ELEM(reuse =RESU,
NUME_ORDRE = 24,
               RESULTAT=RESU,
               OPTION=('SIEF_ELNO_ELGA','EQUI_ELNO_SIGM','VARI_ELNO_ELGA',),);

RESU=CALC_NO(reuse =RESU,
NUME_ORDRE = 24,
             RESULTAT=RESU,
             OPTION=('SIEF_NOEU_ELGA','EQUI_NOEU_SIGM','VARI_NOEU_ELGA',),);


           
# CONTRAINTES
             

STHETA2=POST_RELEVE_T(ACTION=_F(INTITULE='STHETA2',
                               CHEMIN=CERCLE,
                               RESULTAT=RESU,
                               NOM_CHAM='SIEF_ELNO_ELGA',
                               INST=5.4,
                               NOM_CMP=('SIXX','SIYY','SIXY',),
                               REPERE='POLAIRE',
                               OPERATION='EXTRACTION',),);


TEST_TABLE(TABLE=STHETA2,
           FILTRE = _F(NOM_PARA='ABSC_CURV',VALE=1.56956E+01),
           NOM_PARA='SIXX',
           VALE = -2.4138468256918E+00 ,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-7,);

TEST_TABLE(TABLE=STHETA2,
           FILTRE = _F(NOM_PARA='ABSC_CURV',VALE=1.56956E+01),
           NOM_PARA='SIXX',
           VALE = -2.4138468256918E+00 ,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.25,);
           
# COURBE SIYY AU POINT A EN FONCTION DU DEPLACEMENT 

SYY_A2=POST_RELEVE_T(ACTION=_F(INTITULE='SYY_A2',
                              GROUP_NO='GM33',
                              RESULTAT=RESU,
                              NOM_CHAM='SIEF_NOEU_ELGA',
                              NOM_CMP='SIYY',
                              OPERATION='EXTRACTION',),);


TEST_TABLE(TABLE=SYY_A2,
           FILTRE = _F(NOM_PARA='INST',VALE=5.40000E+00),
           NOM_PARA='SIYY',
           VALE = 6.9194957656660E+00,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);

TEST_TABLE(TABLE=SYY_A2,
           FILTRE = _F(NOM_PARA='INST',VALE=5.40000E+00),
           NOM_PARA='SIYY',
           VALE = 6.6907391833841E+00 ,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.035,);
           
# COURBE SIXX AU POINT B EN FONCTION DU DEPLACEMENT 

SXX_B2=POST_RELEVE_T(ACTION=_F(INTITULE='SXX_B2',
                              GROUP_NO='GM32',
                              RESULTAT=RESU,
                              NOM_CHAM='SIEF_NOEU_ELGA',
                              NOM_CMP='SIXX',
                              OPERATION='EXTRACTION',),);

TEST_TABLE(TABLE=SXX_B2,
           FILTRE = _F(NOM_PARA='INST',VALE=5.40000E+00),
           NOM_PARA='SIXX',
           VALE = -6.8409790876839E+00 ,
           REFERENCE= 'NON_REGRESSION',
           VERSION  = '9.0.4',
           CRITERE = 'RELATIF',
           PRECISION = 1E-8,);

TEST_TABLE(TABLE=SXX_B2,
           FILTRE = _F(NOM_PARA='INST',VALE=5.40000E+00),
           NOM_PARA='SIXX',
           VALE = -6.6772484619171E+00 ,
           REFERENCE= 'AUTRE_ASTER',
           CRITERE = 'RELATIF',
           PRECISION = 0.025,);
           
# POUR VISUALISER LE ETA_PILOTAGE = F(INST)

ETA_PILO=RECU_FONCTION(RESULTAT=RESU,
                       NOM_PARA_RESU='ETA_PILOTAGE',
                       TOUT_ORDRE='OUI',);



FIN();
