# MODIF  DATE 22/01/2013   AUTEUR SFAYOLLE S.FAYOLLE 
# TITRE TEST DE L OPTIONS MASS_MECA DES ELEMENTS INCO_GD ET INCO_LOG EN D_PLAN
# zzzz289e.para = tps_job 60 mem_job 256Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2013  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# RESPONSABLE SFAYOLLE S.FAYOLLE

DEBUT(CODE=_F(NOM='ZZZZ289E',
NIV_PUB_WEB='INTERNET',),DEBUG=_F(SDVERI='OUI'))

#ON LIT UN MAILLAGE QUADRATIQUE EN TETRA10 POUR TESTER LES ELEM
# P2P1P1 (D_PLAN_INCO) ET P2P1 (D_PLAN_INCO_UP)
MAIL_Q=LIRE_MAILLAGE();

MATER=DEFI_MATERIAU(ELAS=_F(E=30000.0,
                            NU=0.2,
                            RHO=2764.0,),
                    ECRO_LINE=_F(D_SIGM_EPSI=-1950.0,
                                 SY=3.0,),);

CHMAT_Q=AFFE_MATERIAU(MAILLAGE=MAIL_Q,
                      AFFE=_F(TOUT='OUI',
                              MATER=MATER,),);

MODELUPG=AFFE_MODELE(MAILLAGE=MAIL_Q,
                     AFFE=_F(TOUT='OUI',
                             PHENOMENE='MECANIQUE',
                             MODELISATION='D_PLAN_INCO_GD',),);

MODELUPQ=AFFE_MODELE(MAILLAGE=MAIL_Q,
                     AFFE=_F(TOUT='OUI',
                             PHENOMENE='MECANIQUE',
                             MODELISATION='D_PLAN_INCO_LOG',),);

#CALCUL DE LA MATRICE DE MASSE POUR LES ELEM P2P2P1
MATMUPG=CALC_MATR_ELEM(OPTION='MASS_MECA',
                       MODELE=MODELUPG,
                       CHAM_MATER=CHMAT_Q,);

#CALCUL DE LA MATRICE DE MASSE POUR LES ELEM P2P1
MATMUPQ=CALC_MATR_ELEM(OPTION='MASS_MECA',
                       MODELE=MODELUPQ,
                       CHAM_MATER=CHMAT_Q,);

NUMEUPG=NUME_DDL(MODELE=MODELUPG,);
NUMEUPQ=NUME_DDL(MODELE=MODELUPQ,);

#MATRICE DE MASSE ASSEMBLEE POUR LES ELEM P2P2P1
MAMASUPG=ASSE_MATRICE(MATR_ELEM=MATMUPG,
                      NUME_DDL=NUMEUPG,);

#MATRICE DE MASSE ASSEMBLEE POUR LES ELEM P2P1
MAMASUPQ=ASSE_MATRICE(MATR_ELEM=MATMUPQ,
                      NUME_DDL=NUMEUPQ,);

#Test de non regression sur la matrice de masse

TEST_RESU(OBJET=_F(VALE_CALC=4514.5330000000004,
                   TOLE_MACHINE=1.E-3,
                   NOM='MATMUPG        .M01.RESL',),
          )

TEST_RESU(OBJET=_F(VALE_CALC=4514.5330000000004,
                   TOLE_MACHINE=1.E-3,
                   NOM='MATMUPQ        .M01.RESL',),
          )

FIN();
