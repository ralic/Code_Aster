# MODIF  DATE 28/01/2008   AUTEUR PELLET J.PELLET 
# TITRE TP ANALYSE SISMIQUE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2004  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# RESPONSABLE BOYERE E.BOYERE
#-----------------------------------------------------------------------
#
#  ANALYSE RIS12 TR4 REGLEMENTAIRE
#  SCENARIO 1
#  GL1(X,Y) + GL2(Z)
#
#-----------------------------------------------------------------------

DEBUT(CODE=_F(NOM ='FORMA12C',NIV_PUB_WEB='INTERNET'))

MAILLAGE=LIRE_MAILLAGE(INFO=2)

MODELE=AFFE_MODELE(
                  MAILLAGE=MAILLAGE,
                   AFFE=(
                         _F(GROUP_MA='GPOU_D_T',
                            PHENOMENE='MECANIQUE',
                            MODELISATION='POU_D_T',),
                         _F(GROUP_MA='GPOU_C_T',
                            PHENOMENE='MECANIQUE',
                            MODELISATION='POU_C_T',),
                         _F(GROUP_MA='GDIS_TR',
                            PHENOMENE='MECANIQUE',
                            MODELISATION='DIS_TR',),
                            ),
                              )
                              
IMPR_RESU(FORMAT='CASTEM',UNITE=37,
          MODELE=MODELE,
          RESU=_F(
                  MAILLAGE=MAILLAGE)) 
                  
                                               
                             
#-----------------------------------------------------------------------
# CARACTERISTIQUES DES ELEMENTS
#-----------------------------------------------------------------------


CARA=AFFE_CARA_ELEM(
                    MODELE=MODELE,
                    POUTRE=(
                           _F(GROUP_MA='GMEL0301',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.00711),),
                            _F(GROUP_MA='GMEL0501',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL0601',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL0701',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL1001',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL1101',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL1201',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL1501',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL1701',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL1801',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL1901',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL2001',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL2101',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL2201',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.0034),),
                            _F(GROUP_MA='GMEL2401',
                               SECTION='CERCLE',
                               CARA=('R','EP'),
                               VALE=(0.08415,0.00711),),),
                    DISCRET=(_F(MAILLE='M0801I02',
                                CARA='M_TR_D_N',
                                VALE=(36.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0),),
                             _F(MAILLE='M1301I02',
                                CARA='M_TR_D_N',
                                VALE=(36.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0),),),
                    DEFI_ARC=(_F(GROUP_MA='GMEL0601',
                                 CENTRE=(466.39260860000002,107.5500031,0.27747499939999998),
                                 RAYON=0.22859999540000001,
                                 COEF_FLEX_XY=14.43145561,
                                 COEF_FLEX_XZ=14.43145561,),
                              _F(GROUP_MA='GMEL1101',
                                 CENTRE=(466.16400149999998,107.3214035,3.7724525930000001),
                                 RAYON=0.22859999540000001,
                                 COEF_FLEX_XY=14.43145561,
                                 COEF_FLEX_XZ=14.43145561,),
                              _F(GROUP_MA='GMEL1701',
                                 CENTRE=(466.16400149999998,106.4785995,4.2335472110000003),
                                 RAYON=0.22859999540000001,
                                 COEF_FLEX_XY=14.43145561,
                                 COEF_FLEX_XZ=14.43145561,),
                              _F(GROUP_MA='GMEL1901',
                                 CENTRE=(466.16400149999998,106.4785995,8.7655010220000005),
                                 RAYON=0.22859999540000001,
                                 COEF_FLEX_XY=14.43145561,
                                 COEF_FLEX_XZ=14.43145561,),
                              _F(GROUP_MA='GMEL2101',
                                 CENTRE=(466.16400149999998,107.4713974,9.2274990080000006),
                                 RAYON=0.22859999540000001,
                                 COEF_FLEX_XY=14.43145561,
                                 COEF_FLEX_XZ=14.43145561,),),)

#-----------------------------------------------------------------------
# DEFINITION DES MATERIAUX
#-----------------------------------------------------------------------

MATP01=DEFI_MATERIAU(ELAS=_F(E=1.97E11,
                             NU=0.3,
                             RHO=1.3108749019999999E4,
                             ALPHA=1.639999937E-05,),)
MATP03=DEFI_MATERIAU(ELAS=_F(E=1.97E11,
                             NU=0.3,
                             RHO=1.956015625E4,
                             ALPHA=1.639999937E-05,),)

#-----------------------------------------------------------------------
# DEFINITION DES SUPPORTS
#-----------------------------------------------------------------------

SUPPORT=AFFE_CHAR_MECA(  
      MODELE=MODELE,
      DDL_IMPO=(
# PF1 ET PF2      
     _F( NOEUD = ('N02__I00', 'N01__I00',), 
               DX = 0., DY = 0., DZ = 0., DRX = 0., DRY = 0., DRZ = 0.),
# GL1      
     _F( NOEUD = 'N0701I00', 
               DX = 0., DY = 0.),
# GL2
     _F( NOEUD = 'N1201I00', 
               DZ = 0.),            
              ),
                  )

#-----------------------------------------------------------------------
# DEFINITION DES CHAMPS DE MATERIAUX
#-----------------------------------------------------------------------

CHMATP=AFFE_MATERIAU(MAILLAGE=MAILLAGE,
                     AFFE=(_F(GROUP_MA='GMAT01',
                              MATER=MATP01,
                              ),
                           _F(GROUP_MA='GMAT03',
                              MATER=MATP03,
                              ),),)

#-----------------------------------------------------------------------
# ASSEMBLAGE MATRICE MASSE ET RIGIDITE
#-----------------------------------------------------------------------

MACRO_MATR_ASSE(MODELE=MODELE,
                CHAM_MATER=CHMATP,
                CARA_ELEM=CARA,
                CHARGE=SUPPORT,
                NUME_DDL=CO('NUMDDL'),
                MATR_ASSE=(_F(MATRICE=CO("MATRRIGI"),
                              OPTION='RIGI_MECA',),
                           _F(MATRICE=CO("MATRMASS"),
                              OPTION='MASS_MECA',),),);
                              
                              
#-----------------------------------------------------------------------
# ASSEMBLAGE DU SECOND MEMBRE
#-----------------------------------------------------------------------

INCLUDE(UNITE=22)

CHSEIX=CALC_CHAR_SEISME(  MATR_MASS=MATRMASS,
     DIRECTION=(1., 0., 0.,), MONO_APPUI='OUI'
      )
CHSEIY=CALC_CHAR_SEISME(  MATR_MASS=MATRMASS,
     DIRECTION=(0., 1., 0.,), MONO_APPUI='OUI'
      )
CHSEIZ=CALC_CHAR_SEISME(  MATR_MASS=MATRMASS,
     DIRECTION=(0., 0., 1.,), MONO_APPUI='OUI'
      )

#-----------------------------------------------------------------------
# CALCUL DES MODES 
#-----------------------------------------------------------------------                             
MASSINER=POST_ELEM(
               MODELE=MODELE,
               CHARGE=SUPPORT,
               CARA_ELEM=CARA,
               CHAM_MATER=CHMATP,
               MASS_INER=_F( TOUT = 'OUI',)
                        )
MODES=MACRO_MODE_MECA( 
               MATR_A=MATRRIGI,
               MATR_B=MATRMASS,
               CALC_FREQ=_F( 
               FREQ_MIN = 0.0,
               FREQ_MAX = 33.0,
               NB_BLOC_FREQ = 1),
               VERI_MODE=_F( STOP_ERREUR = 'NON'),
               NORM_MODE=_F( 
                     NORME = 'MASS_GENE',
                     ),
                 IMPRESSION=_F( TOUT_PARA = 'OUI')
                  )

# TEST_RESU UNIQUEMENT POUR FAIRE CAS TEST
TEST_RESU(RESU=(_F(RESULTAT=MODES,
                   NUME_ORDRE=1,
                   PARA='FREQ',
                   VALE= 4.5135794612152,
                   PRECISION=1e-05,
                   REFERENCE='NON_REGRESSION',
                   VERSION='7.3.19',)))

MODES=CALC_ELEM(
                reuse=MODES,
                MODELE=MODELE,
                CHAM_MATER=CHMATP,
                CARA_ELEM=CARA,
                OPTION=(
                'EFGE_ELNO_DEPL',
                  ),
                RESULTAT=MODES,)

###########################################################
#----  REPONSE TRANSITOIRE PAR SUPERPOSITION MODALE ------
#----  MONO APPUI GRANDEURS RELATIVES ------
###########################################################

# DEFINITION DES INSTANTS DE RECUPERATION

L_RECU=DEFI_LIST_REEL(  DEBUT=0.,
                      INTERVALLE=_F(  
                        JUSQU_A = 20.47,  
                        PAS = 0.01) 
                              )

#----------------------------------------------------
#------------- PROJECTION SUR LA BASE MODALE --------
#----------------------------------------------------
MACRO_PROJ_BASE(
               BASE=MODES,
               MATR_ASSE_GENE=(
                        _F(
                        MATRICE=CO("MASSEGEN"),
                        MATR_ASSE=MATRMASS,
                        ),
                        _F(
                        MATRICE=CO("RIGIDGEN"),
                        MATR_ASSE=MATRRIGI,
                        ),        
               ),
               VECT_ASSE_GENE=(
                        _F(
                        VECTEUR=CO("EFGENX"),
                        VECT_ASSE=CHSEIX,
                        ),
                        _F(
                        VECTEUR=CO("EFGENY"),
                        VECT_ASSE=CHSEIY,
                        ),
                        _F(
                        VECTEUR=CO("EFGENZ"),
                        VECT_ASSE=CHSEIZ,
                        ),                        
                      ),  
                     )

#------------------------------------------------------------------
#-------------- RESOLUTION DU PB GENERALISE -----------------------
#-------------- SANS CORRECTION STATIQUE --------------------------
#------------------------------------------------------------------
GSCR=DYNA_TRAN_MODAL(  
                  MASS_GENE=MASSEGEN,
                  RIGI_GENE=RIGIDGEN,
                  AMOR_REDUIT=0.02,
                  EXCIT=(
                  _F(
                     VECT_GENE=EFGENX,
                     FONC_MULT=ACCELH1,
                        ),
                  _F(
                     VECT_GENE=EFGENY,
                     FONC_MULT=ACCELH1,
                        ),      
                  _F(
                     VECT_GENE=EFGENZ,
                     FONC_MULT=ACCELV1,
                        ),      
                           ),
                  INCREMENT=_F(
                     INST_INIT = 0.,
                     INST_FIN =20.47,
                     PAS = 0.001
                           ),
                        )

#--------------------------------------------------------------
#---- RESTITUTION GRANDEUR PHYSIQUE DANS LE REPERE RELATIF
#--- SANS CORRECTION STATIQUE 
#--------------------------------------------------------------
# RESTITUTION GLOBALE DU CHAMP DE DEPLACEMENT RELATIF A CHAQUE INSTANT 
# DE LA LISTE L_RECU
RGSCR=REST_BASE_PHYS(  
               RESU_GENE=GSCR,
               INTERPOL='LIN',   
               LIST_INST=L_RECU,
               #TOUT_INST='OUI',
               TOUT_CHAM='OUI',
                      )
DPSCR=CREA_CHAMP(
              TYPE_CHAM='NOEU_DEPL_R',
              OPERATION='EXTR',
              RESULTAT=RGSCR,
              NOM_CHAM='DEPL',
              TYPE_MAXI='MAXI',
              TYPE_RESU='VALE',
              TOUT_ORDRE='OUI'
                     )
TDPSCR=POST_RELEVE_T( 
              ACTION=
              _F( 
            INTITULE = 'DEPL_MAX_R',
            GROUP_NO='GNSTR01',                                         
            CHAM_GD=DPSCR,            
            TOUT_CMP='OUI',                            
            OPERATION ='EXTRACTION',                           
                     ),
            )


# RESTITUTION GLOBALE DU CHAMP EFGE_ELNO_DEPL A CHAQUE INSTANT 
# DE LA LISTE L_RECU
RGSCR=CALC_ELEM(
                reuse=RGSCR,
                MODELE=MODELE,
                CHAM_MATER=CHMATP,
                CARA_ELEM=CARA,
                OPTION=(
                'EFGE_ELNO_DEPL',
                  ),
                RESULTAT=RGSCR,)                                      
EFSCR=CREA_CHAMP(
              TYPE_CHAM='ELNO_SIEF_R',
              OPERATION='EXTR',
              RESULTAT=RGSCR,
              NOM_CHAM='EFGE_ELNO_DEPL',
              TYPE_MAXI='MAXI',
              TYPE_RESU='VALE',
              TOUT_ORDRE='OUI'
                     )
TEFSCR=POST_RELEVE_T( 
              ACTION=
              _F( 
            INTITULE = 'EFGE_MAX_R',
            GROUP_NO='GNSTR01',                                         
            CHAM_GD=EFSCR,            
            TOUT_CMP='OUI',                            
            OPERATION ='EXTRACTION',                           
                     ),
            )
IMPR_TABLE(
          TABLE=TEFSCR,
         FORMAT='TABLEAU',
               )

###########################################################
#----  REPONSE TRANSITOIRE PAR SUPERPOSITION MODALE ------
#----  MULTI APPUIS GRANDEURS ABSOLUES ------
###########################################################

# DEFINITION EXCITATION MULTIPLE

MSTA=MODE_STATIQUE(
         MATR_RIGI=MATRRIGI,
         MATR_MASS=MATRMASS,
         MODE_STAT=_F(TOUT='OUI',AVEC_CMP=('DX','DY','DZ'),),)


CHSEIXM=CALC_CHAR_SEISME(
     MATR_MASS=MATRMASS,
     DIRECTION=(1., 0., 0.,),
     MODE_STAT=MSTA, 
     NOEUD=('N02__I00','N01__I00','N0701I00',),
      )

CHSEIYM=CALC_CHAR_SEISME(
     MATR_MASS=MATRMASS,
     DIRECTION=(0., 1., 0.,),
     MODE_STAT=MSTA, 
     NOEUD=('N02__I00','N01__I00','N0701I00',),
      )
      
CHSEIZM=CALC_CHAR_SEISME(
     MATR_MASS=MATRMASS,
     DIRECTION=(0., 0., 1.,),
     MODE_STAT=MSTA, 
     NOEUD=('N02__I00','N01__I00','N1201I00',),
      )

MACRO_PROJ_BASE(
               BASE=MODES,
               MATR_ASSE_GENE=(
                        _F(
                        MATRICE=CO("MASGEN2"),
                        MATR_ASSE=MATRMASS,
                        ),
                        _F(
                        MATRICE=CO("RIGGEN2"),
                        MATR_ASSE=MATRRIGI,
                        ),        
               ),
               VECT_ASSE_GENE=(
                        _F(
                        VECTEUR=CO("EFX2"),
                        VECT_ASSE=CHSEIXM,
                        ),
                        _F(
                        VECTEUR=CO("EFY2"),
                        VECT_ASSE=CHSEIYM,
                        ),
                        _F(
                        VECTEUR=CO("EFZ2"),
                        VECT_ASSE=CHSEIZM,
                        ),                        
                      ),  
                     )
               

VITESH1=CALC_FONCTION(
                  INTEGRE=_F(FONCTION=ACCELH1,METHODE='TRAPEZE',),
                  PROL_DROITE='CONSTANT'         )
DEPLAH1=CALC_FONCTION(
                  INTEGRE=_F(FONCTION=VITESH1,METHODE='TRAPEZE',),
                  PROL_DROITE='CONSTANT'         )
VITESV1=CALC_FONCTION(
                  INTEGRE=_F(FONCTION=ACCELV1,METHODE='TRAPEZE',),
                  PROL_DROITE='CONSTANT'         )
DEPLAV1=CALC_FONCTION(
                  INTEGRE=_F(FONCTION=VITESV1,METHODE='TRAPEZE',),
                  PROL_DROITE='CONSTANT'         )

GSCA=DYNA_TRAN_MODAL(  
                  MASS_GENE=MASGEN2,
                  RIGI_GENE=RIGGEN2,
                  AMOR_REDUIT=0.02,
                  MODE_STAT=MSTA,
                  EXCIT=(
                  _F(
                   VECT_GENE=EFX2,
                   ACCE=ACCELH1,
                   VITE=VITESH1,
                   DEPL=DEPLAH1,
                   MULT_APPUI='OUI',
                   DIRECTION=(1.,0.,0.,),
                   NOEUD=('N02__I00','N01__I00','N0701I00',),
                       ),
                  _F(
                   VECT_GENE=EFY2,
                   ACCE=ACCELH1,
                   VITE=VITESH1,
                   DEPL=DEPLAH1,
                   MULT_APPUI='OUI',
                   DIRECTION=(0.,1.,0.,),
                   NOEUD=('N02__I00','N01__I00','N0701I00',),
                       ),
                  _F(
                   VECT_GENE=EFZ2,
                   ACCE=ACCELV1,
                   VITE=VITESV1,
                   DEPL=DEPLAV1,
                   MULT_APPUI='OUI',
                   DIRECTION=(0.,0.,1.,),
                   NOEUD=('N02__I00','N01__I00','N1201I00',),
                       ),                      
                           ),
                  INCREMENT=_F(
                     INST_INIT = 0.,
                     INST_FIN =20.47,
                     PAS = 0.001
                           ),
                        )
                        
                        
# RESTITUTION GRANDEURS ABSOLUES
#-------------------------------

RGSCA=REST_BASE_PHYS(  
               RESU_GENE=GSCA,
               INTERPOL='LIN',   
               LIST_INST=L_RECU,
               TOUT_CHAM='OUI',
               MULT_APPUI='OUI',
                      )
                      
# DEPLACEMENTS

DPSCA=CREA_CHAMP(
              TYPE_CHAM='NOEU_DEPL_R',
              OPERATION='EXTR',
              RESULTAT=RGSCA,
              NOM_CHAM='DEPL',
              TYPE_MAXI='MAXI',
              TYPE_RESU='VALE',
              TOUT_ORDRE='OUI'
                     )
                     
TDPSCA=POST_RELEVE_T( 
              ACTION=
              _F( 
            INTITULE = 'DEPL_MAX_A',
            GROUP_NO='GNSTR01',                                         
            CHAM_GD=DPSCA,            
            TOUT_CMP='OUI',                            
            OPERATION ='EXTRACTION',                           
                     ),
            )

IMPR_TABLE(
          TABLE=TDPSCA,
         FORMAT='TABLEAU',
               )
               
# EFFORTS               
                
RGSCA=CALC_ELEM(
                reuse=RGSCA,
                MODELE=MODELE,
                CHAM_MATER=CHMATP,
                CARA_ELEM=CARA,
                OPTION=(
                'EFGE_ELNO_DEPL',
                  ),
                RESULTAT=RGSCA,)
                                                      
EFSCA=CREA_CHAMP(
              TYPE_CHAM='ELNO_SIEF_R',
              OPERATION='EXTR',
              RESULTAT=RGSCA,
              NOM_CHAM='EFGE_ELNO_DEPL',
              TYPE_MAXI='MAXI',
              TYPE_RESU='VALE',
              TOUT_ORDRE='OUI'
                     )
                     
TEFSCA=POST_RELEVE_T( 
              ACTION=
              _F( 
            INTITULE = 'EFGE_MAX_A',
            GROUP_NO='GNSTR01',                                         
            CHAM_GD=EFSCA,            
            TOUT_CMP='OUI',                            
            OPERATION ='EXTRACTION',                           
                     ),
            )
IMPR_TABLE(
          TABLE=TEFSCA,
         FORMAT='TABLEAU',
               )


# RESTITUTION GRANDEURS RELATIVES
#-------------------------------

# DEPLACEMENTS

RGSCR2=REST_BASE_PHYS(  
               RESU_GENE=GSCA,
               INTERPOL='LIN',   
               LIST_INST=L_RECU,
               TOUT_CHAM='OUI',               
                      ) 
                      
DPSCR2=CREA_CHAMP(
              TYPE_CHAM='NOEU_DEPL_R',
              OPERATION='EXTR',
              RESULTAT=RGSCR2,
              NOM_CHAM='DEPL',
              TYPE_MAXI='MAXI',
              TYPE_RESU='VALE',
              TOUT_ORDRE='OUI'
                     )
                     
TDPSCR2=POST_RELEVE_T( 
              ACTION=
              _F( 
            INTITULE = 'DEPL_MAX_R2',
            GROUP_NO='GNSTR01',                                         
            CHAM_GD=DPSCR2,            
            TOUT_CMP='OUI',                            
            OPERATION ='EXTRACTION',                           
                     ),
            )
            
IMPR_TABLE(
          TABLE=TDPSCR2,
         FORMAT='TABLEAU',
               )

# EFFORTS

RGSCR2=CALC_ELEM(
                reuse=RGSCR2,
                MODELE=MODELE,
                CHAM_MATER=CHMATP,
                CARA_ELEM=CARA,
                OPTION=(
                'EFGE_ELNO_DEPL',
                  ),
                RESULTAT=RGSCR2,)
                                                      
EFSCR2=CREA_CHAMP(
              TYPE_CHAM='ELNO_SIEF_R',
              OPERATION='EXTR',
              RESULTAT=RGSCR2,
              NOM_CHAM='EFGE_ELNO_DEPL',
              TYPE_MAXI='MAXI',
              TYPE_RESU='VALE',
              TOUT_ORDRE='OUI'
                     )
                     
TEFSCR2=POST_RELEVE_T( 
              ACTION=
              _F( 
            INTITULE = 'EFGE_MAX_R2',
            GROUP_NO='GNSTR01',                                         
            CHAM_GD=EFSCR2,            
            TOUT_CMP='OUI',                            
            OPERATION ='EXTRACTION',                           
                     ),
            )
            
IMPR_TABLE(
          TABLE=TEFSCR2,
         FORMAT='TABLEAU',
               )

###########################################################
#------REPONSE SPECTRALE PAR SUPERPOSITION MODALE--------- 
###########################################################

# CALCUL DU SPECTRE DE REPONSE OSCILLATEUR EN PSEUDO ACCELERATION ABSOLUE
# NAPPE SRO FONCTION DE AMORTISSEMENT
#------------------------------------------------------------------------
SROXY=CALC_FONCTION(
                  SPEC_OSCI=_F(
                     FONCTION=ACCELH1,
                     AMOR_REDUIT=(0.02,0.05,0.10),                     
                     NORME=9.81,
                     ),
                  )
SROZ=CALC_FONCTION(
                  SPEC_OSCI=_F(
                     FONCTION=ACCELV1,
                     AMOR_REDUIT=(0.02,0.05,0.10),                     
                     NORME=9.81,
                     ),
                  )


#-----------------------------------------------
# REPONSE SPECTRALE SANS CORRECTION STATIQUE
#-----------------------------------------------
SPEC=COMB_SISM_MODAL(
                       MODE_MECA=MODES,
                       AMOR_REDUIT=0.02,
                       MASS_INER=MASSINER,
                       EXCIT=_F(
                           MONO_APPUI='OUI',
                           TRI_SPEC='OUI',
                           SPEC_OSCI=(SROXY,SROXY,SROZ),
                           ECHELLE=(9.81,9.81,9.81),),
                       COMB_MODE=_F(TYPE='CQC',),
                       COMB_DIRECTION=_F(  TYPE = 'QUAD',),
                       OPTION=(
                       'DEPL',
                       'EFGE_ELNO_DEPL',
                       ),
                        )
                        
EFSPEC=POST_RELEVE_T( 
              ACTION=
              _F( 
            INTITULE = 'EFGE_SPEC',
            GROUP_NO='GNSTR01',                                         
            RESULTAT=SPEC,
            NOM_CHAM='EFGE_ELNO_DEPL',
            NUME_ORDRE=4,            
            TOUT_CMP='OUI',                            
            OPERATION ='EXTRACTION',                           
                     ),
            )
            
IMPR_TABLE(
          TABLE=EFSPEC,
         FORMAT='TABLEAU',
               )

DPSPEC=POST_RELEVE_T( 
              ACTION=
              _F( 
            INTITULE = 'DEPL_SPEC',
            GROUP_NO='GNSTR01',                                         
            RESULTAT=SPEC,
            NOM_CHAM='DEPL',
            NUME_ORDRE=4,            
            TOUT_CMP='OUI',                            
            OPERATION ='EXTRACTION',                           
                     ),
            )
            
IMPR_TABLE(
          TABLE=DPSPEC,
         FORMAT='TABLEAU',
               )                        
                


FIN()


                        



